import{d as Pe,H as x,q as Me,a9 as Ae,r as f,o as Ue,c as te,b as m,g as r,e as l,i as s,B as k,h as b,j as y,w as d,F as $,X as Ve,m as u,t as p,k as A,I as ae,l as D,Z as E}from"./app-DJ0pZO5B.js";import{s as X,a as g,b as le}from"./index-C6b7UG9g.js";import{s as G}from"./index-DNL7fXE4.js";import{s as ie}from"./index-abbMYiPI.js";import{s as oe}from"./index-D6zsbsG1.js";import{s as U}from"./index-DTWL4fU4.js";import{s as Z}from"./index-CBniI9_G.js";import{s as De}from"./index-CSCkJUVi.js";import{s as K}from"./index-DOmSFTcJ.js";import{s as Ee}from"./index-CxKyU6j5.js";import{s as Q}from"./index-BzItOQVE.js";import{s as Fe}from"./index-Ch0DkloZ.js";import{s as re}from"./index-BuSGUNxZ.js";import"./index-Dg0usBd7.js";import"./index-BbUuZ738.js";import"./index-Bj4n3Sk4.js";import"./index-Dr7DX1aH.js";import"./index-B0N4SZb2.js";const Te=Pe("team",{state:()=>({members:[],invitations:[],availableRoles:[],currentUserRole:null,roles:[],permissionGroups:[],loading:!1,loadingInvitations:!1,loadingRoles:!1,loadingPermissions:!1,error:null}),getters:{hasMembersi:n=>n.members.length>0,totalMembers:n=>n.members.length,pendingInvitationsCount:n=>n.invitations.length,membersByRole:n=>{const a={};return n.members.forEach(o=>{const R=o.role||"Agent";a[R]||(a[R]=[]),a[R].push(o)}),a},isOwner:n=>n.currentUserRole==="Company Owner",isAdmin:n=>n.currentUserRole==="Company Admin"||n.currentUserRole==="Company Owner",canManageTeam:n=>n.currentUserRole==="Company Owner"||n.currentUserRole==="Company Admin"},actions:{async fetchMembers(){var n,a;this.loading=!0,this.error=null;try{const o=await x.get("/team");this.members=o.data.members}catch(o){throw this.error=((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch team members",o}finally{this.loading=!1}},async fetchInvitations(){var n,a;this.loadingInvitations=!0;try{const o=await x.get("/team/invitations");this.invitations=o.data.invitations}catch(o){throw this.error=((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch invitations",o}finally{this.loadingInvitations=!1}},async fetchAvailableRoles(){var n,a;this.loadingRoles=!0;try{const o=await x.get("/team/roles");this.availableRoles=o.data.roles,this.currentUserRole=o.data.current_user_role}catch(o){throw this.error=((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch roles",o}finally{this.loadingRoles=!1}},async inviteMember(n,a){try{const o=await x.post("/team/invite",{email:n,role:a});return await this.fetchInvitations(),o.data}catch(o){throw o}},async resendInvitation(n){try{return(await x.post(`/team/invitations/${n}/resend`)).data}catch(a){throw a}},async cancelInvitation(n){try{await x.delete(`/team/invitations/${n}`),this.invitations=this.invitations.filter(a=>a.id!==n)}catch(a){throw a}},async updateMemberRole(n,a){try{const o=await x.put(`/team/members/${n}/role`,{role:a}),R=this.members.find(M=>M.id===n);return R&&(R.role=a),o.data}catch(o){throw o}},async removeMember(n){try{await x.delete(`/team/members/${n}`),this.members=this.members.filter(a=>a.id!==n)}catch(a){throw a}},async fetchRoles(){var n,a;this.loadingPermissions=!0;try{const o=await x.get("/roles");this.roles=o.data.data}catch(o){throw this.error=((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch roles",o}finally{this.loadingPermissions=!1}},async fetchPermissionGroups(){var n,a;try{const o=await x.get("/roles/permissions");this.permissionGroups=o.data.data}catch(o){throw this.error=((a=(n=o.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch permissions",o}},async updateRolePermissions(n,a){try{const o=await x.put(`/roles/${n}/permissions`,{permissions:a});return await Promise.all([this.fetchRoles(),this.fetchAvailableRoles()]),o.data}catch(o){throw o}},async createCustomRole(n,a){try{const o=await x.post("/roles",{name:n,permissions:a});return await Promise.all([this.fetchRoles(),this.fetchAvailableRoles()]),o.data}catch(o){throw o}},async updateCustomRole(n,a){try{const o=await x.put(`/roles/${n}`,{name:a});return await Promise.all([this.fetchRoles(),this.fetchAvailableRoles()]),o.data}catch(o){throw o}},async deleteCustomRole(n){try{await x.delete(`/roles/${n}`),this.roles=this.roles.filter(a=>a.id!==n),await this.fetchAvailableRoles()}catch(a){throw a}},clearError(){this.error=null},reset(){this.members=[],this.invitations=[],this.availableRoles=[],this.currentUserRole=null,this.roles=[],this.permissionGroups=[],this.loading=!1,this.loadingInvitations=!1,this.loadingRoles=!1,this.loadingPermissions=!1,this.error=null}}}),Le={class:"space-y-6"},Ne={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Se={class:"flex items-center gap-4"},Oe={class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},ze={class:"flex items-center gap-4"},Be={class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},Ge={class:"flex items-center gap-4"},qe={class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},Ye={class:"mt-4"},He={key:0,class:"space-y-4"},Je={class:"flex items-center gap-3"},Xe={class:"font-medium text-surface-900 dark:text-surface-0 flex items-center gap-2"},Ze={class:"text-sm text-surface-500 dark:text-surface-400"},Ke={class:"text-surface-900 dark:text-surface-0"},Qe={key:0,class:"flex gap-1"},We={class:"flex items-center gap-2"},es={class:"mt-4"},ss={key:0,class:"space-y-4"},ts={key:1,class:"text-center py-8"},as={class:"flex items-center gap-3"},ls={class:"text-surface-900 dark:text-surface-0"},is={class:"text-surface-900 dark:text-surface-0"},os={class:"text-surface-900 dark:text-surface-0"},rs={class:"flex gap-1"},ns={class:"mt-4"},ds={class:"flex justify-between items-center mb-4"},us={key:0,class:"space-y-4"},cs={class:"flex items-center gap-2"},ms={class:"text-surface-900 dark:text-surface-0"},vs={class:"text-surface-900 dark:text-surface-0"},ps={class:"flex gap-1"},fs={class:"space-y-4 max-h-96 overflow-y-auto"},ys={class:"font-semibold text-surface-900 dark:text-surface-0 mb-2"},hs={class:"grid grid-cols-2 gap-2 ml-2"},bs=["onClick"],xs={class:"space-y-4"},gs={key:0,class:"text-red-500"},ks={key:0,class:"text-red-500 block mb-2"},ws={class:"max-h-64 overflow-y-auto space-y-3"},_s={class:"font-semibold text-surface-900 dark:text-surface-0 mb-2 text-sm"},Rs={class:"grid grid-cols-2 gap-2 ml-2"},Cs=["onClick"],$s={class:"space-y-4"},Is={key:0,class:"text-red-500"},Ps={class:"text-surface-500 dark:text-surface-400 mt-1 block"},Ms={class:"space-y-4"},As={class:"text-surface-700 dark:text-surface-300"},Xs={__name:"Index",setup(n){const a=Te(),o=Me(),R=Ae(),M=f(!1),F=f(!1),T=f(!1),L=f(!1),w=f({email:"",role:"Agent"}),I=f({}),P=f({memberId:null,memberName:"",role:""}),N=f(!1),j=f(!1),S=f(null),O=f(!1),z=f(!1),q=f(null),B=f(null),V=f([]),_=f({name:"",permissions:[]}),C=f({});Ue(async()=>{await Promise.all([a.fetchMembers(),a.fetchInvitations(),a.fetchAvailableRoles(),a.fetchRoles(),a.fetchPermissionGroups()])});const ne=te(()=>a.availableRoles.filter(i=>i!=="Company Owner").map(i=>({label:i,value:i}))),de=te(()=>a.availableRoles.map(i=>({label:i,value:i})));function ue(i){return i?i.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?"}function Y(i){return{"Company Owner":"danger","Company Admin":"warn",Agent:"info"}[i]||"secondary"}function ce(i){return i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-"}function me(i){return i?new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function W(){w.value={email:"",role:"Agent"},I.value={},M.value=!0}async function ve(){var e,c,h,t;if(I.value={},!w.value.email.trim()){I.value.email="Email is required";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w.value.email)){I.value.email="Please enter a valid email address";return}N.value=!0;try{await a.inviteMember(w.value.email,w.value.role),o.add({severity:"success",summary:"Invitation Sent",detail:`Invitation sent to ${w.value.email}`,life:3e3}),M.value=!1}catch(v){(c=(e=v.response)==null?void 0:e.data)!=null&&c.errors?I.value=v.response.data.errors:o.add({severity:"error",summary:"Error",detail:((t=(h=v.response)==null?void 0:h.data)==null?void 0:t.message)||"Failed to send invitation",life:5e3})}finally{N.value=!1}}function pe(i){P.value={memberId:i.id,memberName:i.name,role:i.role},F.value=!0}async function fe(){var i,e;j.value=!0;try{await a.updateMemberRole(P.value.memberId,P.value.role),o.add({severity:"success",summary:"Role Updated",detail:`${P.value.memberName}'s role has been updated to ${P.value.role}`,life:3e3}),F.value=!1}catch(c){o.add({severity:"error",summary:"Error",detail:((e=(i=c.response)==null?void 0:i.data)==null?void 0:e.message)||"Failed to update role",life:5e3})}finally{j.value=!1}}const H=f(null);function ye(i){R.require({message:`Are you sure you want to remove ${i.name} from the team? They will lose access to this company.`,header:"Remove Team Member",icon:"pi pi-exclamation-triangle",rejectLabel:"Cancel",acceptLabel:"Remove",acceptClass:"p-button-danger",accept:()=>he(i)})}async function he(i){var e,c;H.value=i.id;try{await a.removeMember(i.id),o.add({severity:"success",summary:"Member Removed",detail:`${i.name} has been removed from the team`,life:3e3})}catch(h){o.add({severity:"error",summary:"Error",detail:((c=(e=h.response)==null?void 0:e.data)==null?void 0:c.message)||"Failed to remove member",life:5e3})}finally{H.value=null}}async function be(i){var e,c;S.value=i.id;try{await a.resendInvitation(i.id),o.add({severity:"success",summary:"Invitation Resent",detail:`Invitation resent to ${i.email}`,life:3e3})}catch(h){o.add({severity:"error",summary:"Error",detail:((c=(e=h.response)==null?void 0:e.data)==null?void 0:c.message)||"Failed to resend invitation",life:5e3})}finally{S.value=null}}function xe(i){R.require({message:`Are you sure you want to cancel the invitation to ${i.email}?`,header:"Cancel Invitation",icon:"pi pi-exclamation-triangle",rejectLabel:"No",acceptLabel:"Yes, Cancel",acceptClass:"p-button-danger",accept:()=>ge(i)})}async function ge(i){var e,c;try{await a.cancelInvitation(i.id),o.add({severity:"success",summary:"Invitation Cancelled",detail:"The invitation has been cancelled",life:3e3})}catch(h){o.add({severity:"error",summary:"Error",detail:((c=(e=h.response)==null?void 0:e.data)==null?void 0:c.message)||"Failed to cancel invitation",life:5e3})}}function ke(i){B.value=i,V.value=[...i.permissions],T.value=!0}function ee(i){const e=V.value.indexOf(i);e>=0?V.value.splice(e,1):V.value.push(i)}function we(i){return V.value.includes(i)}async function _e(){var i,e;O.value=!0;try{await a.updateRolePermissions(B.value.id,V.value),o.add({severity:"success",summary:"Permissions Updated",detail:`Permissions for ${B.value.name} have been updated`,life:3e3}),T.value=!1}catch(c){o.add({severity:"error",summary:"Error",detail:((e=(i=c.response)==null?void 0:i.data)==null?void 0:e.message)||"Failed to update permissions",life:5e3})}finally{O.value=!1}}function Re(){_.value={name:"",permissions:[]},C.value={},L.value=!0}function se(i){const e=_.value.permissions.indexOf(i);e>=0?_.value.permissions.splice(e,1):_.value.permissions.push(i)}async function Ce(){var i,e,c,h;if(C.value={},!_.value.name.trim()){C.value.name="Role name is required";return}if(_.value.permissions.length===0){C.value.permissions="Select at least one permission";return}z.value=!0;try{await a.createCustomRole(_.value.name,_.value.permissions),o.add({severity:"success",summary:"Role Created",detail:`Custom role "${_.value.name}" has been created`,life:3e3}),L.value=!1}catch(t){(e=(i=t.response)==null?void 0:i.data)!=null&&e.errors?C.value=t.response.data.errors:o.add({severity:"error",summary:"Error",detail:((h=(c=t.response)==null?void 0:c.data)==null?void 0:h.message)||"Failed to create role",life:5e3})}finally{z.value=!1}}function $e(i){R.require({message:`Are you sure you want to delete the "${i.name}" role? This cannot be undone.`,header:"Delete Role",icon:"pi pi-exclamation-triangle",rejectLabel:"Cancel",acceptLabel:"Delete",acceptClass:"p-button-danger",accept:()=>Ie(i)})}async function Ie(i){var e,c;q.value=i.id;try{await a.deleteCustomRole(i.id),o.add({severity:"success",summary:"Role Deleted",detail:`"${i.name}" has been deleted`,life:3e3})}catch(h){o.add({severity:"error",summary:"Error",detail:((c=(e=h.response)==null?void 0:e.data)==null?void 0:c.message)||"Failed to delete role",life:5e3})}finally{q.value=null}}return(i,e)=>{var h;const c=Ve("tooltip");return u(),m($,null,[r(s(De)),l("div",Le,[l("div",Ne,[e[12]||(e[12]=l("div",null,[l("h1",{class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},"Team Management"),l("p",{class:"text-surface-500 dark:text-surface-400 mt-1"}," Manage your team members and their roles ")],-1)),s(a).canManageTeam?(u(),k(s(y),{key:0,label:"Invite Member",icon:"pi pi-user-plus",onClick:W})):b("",!0)]),l("div",je,[r(s(Z),{class:"shadow-sm"},{content:d(()=>[l("div",Se,[e[14]||(e[14]=l("div",{class:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},[l("i",{class:"pi pi-users text-blue-500 text-xl"})],-1)),l("div",null,[e[13]||(e[13]=l("p",{class:"text-surface-500 dark:text-surface-400 text-sm"},"Team Members",-1)),l("p",Oe,p(s(a).totalMembers),1)])])]),_:1}),r(s(Z),{class:"shadow-sm"},{content:d(()=>[l("div",ze,[e[16]||(e[16]=l("div",{class:"w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center"},[l("i",{class:"pi pi-envelope text-yellow-500 text-xl"})],-1)),l("div",null,[e[15]||(e[15]=l("p",{class:"text-surface-500 dark:text-surface-400 text-sm"},"Pending Invitations",-1)),l("p",Be,p(s(a).pendingInvitationsCount),1)])])]),_:1}),r(s(Z),{class:"shadow-sm"},{content:d(()=>[l("div",Ge,[e[18]||(e[18]=l("div",{class:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center"},[l("i",{class:"pi pi-shield text-green-500 text-xl"})],-1)),l("div",null,[e[17]||(e[17]=l("p",{class:"text-surface-500 dark:text-surface-400 text-sm"},"Your Role",-1)),l("p",qe,p(s(a).currentUserRole||"-"),1)])])]),_:1})]),r(s(Ee),null,{default:d(()=>[r(s(Q),{header:"Team Members"},{default:d(()=>[l("div",Ye,[s(a).loading?(u(),m("div",He,[(u(),m($,null,A(3,t=>r(s(K),{height:"4rem",key:t})),64))])):(u(),k(s(X),{key:1,value:s(a).members,responsiveLayout:"scroll",class:"p-datatable-sm",paginator:s(a).members.length>10,rows:10},{empty:d(()=>[...e[19]||(e[19]=[l("div",{class:"text-center py-8"},[l("i",{class:"pi pi-users text-4xl text-surface-300 dark:text-surface-600 mb-4"}),l("p",{class:"text-surface-500 dark:text-surface-400"},"No team members yet")],-1)])]),default:d(()=>[r(s(g),{header:"Member",style:{"min-width":"250px"}},{body:d(({data:t})=>[l("div",Je,[r(s(ae),{label:ue(t.name),shape:"circle",class:"bg-primary text-white"},null,8,["label"]),l("div",null,[l("div",Xe,[D(p(t.name)+" ",1),t.is_current_user?(u(),k(s(U),{key:0,value:"You",severity:"secondary",class:"text-xs"})):b("",!0)]),l("div",Ze,p(t.email),1)])])]),_:1}),r(s(g),{header:"Role",style:{"min-width":"120px"}},{body:d(({data:t})=>[r(s(U),{value:t.role,severity:Y(t.role)},null,8,["value","severity"])]),_:1}),r(s(g),{header:"Status",style:{"min-width":"100px"}},{body:d(({data:t})=>[r(s(U),{value:t.is_active?"Active":"Inactive",severity:t.is_active?"success":"secondary"},null,8,["value","severity"])]),_:1}),r(s(g),{header:"Joined",style:{"min-width":"120px"}},{body:d(({data:t})=>[l("span",Ke,p(ce(t.joined_at)),1)]),_:1}),s(a).canManageTeam?(u(),k(s(g),{key:0,header:"Actions",style:{width:"120px"}},{body:d(({data:t})=>[t.is_current_user?b("",!0):(u(),m("div",Qe,[E(r(s(y),{icon:"pi pi-pencil",outlined:"",rounded:"",size:"small",severity:"secondary",onClick:v=>pe(t)},null,8,["onClick"]),[[c,"Change Role",void 0,{top:!0}]]),E(r(s(y),{icon:"pi pi-trash",outlined:"",rounded:"",size:"small",severity:"danger",loading:H.value===t.id,onClick:v=>ye(t)},null,8,["loading","onClick"]),[[c,"Remove",void 0,{top:!0}]])]))]),_:1})):b("",!0)]),_:1},8,["value","paginator"]))])]),_:1}),r(s(Q),null,{header:d(()=>[l("span",We,[e[20]||(e[20]=D(" Pending Invitations ",-1)),s(a).pendingInvitationsCount>0?(u(),k(s(U),{key:0,value:s(a).pendingInvitationsCount,severity:"warn",class:"ml-1"},null,8,["value"])):b("",!0)])]),default:d(()=>[l("div",es,[s(a).loadingInvitations?(u(),m("div",ss,[(u(),m($,null,A(3,t=>r(s(K),{height:"4rem",key:t})),64))])):s(a).invitations.length===0?(u(),m("div",ts,[e[21]||(e[21]=l("i",{class:"pi pi-envelope text-4xl text-surface-300 dark:text-surface-600 mb-4"},null,-1)),e[22]||(e[22]=l("p",{class:"text-surface-500 dark:text-surface-400"},"No pending invitations",-1)),s(a).canManageTeam?(u(),k(s(y),{key:0,label:"Invite Someone",icon:"pi pi-user-plus",class:"mt-4",onClick:W})):b("",!0)])):(u(),k(s(X),{key:2,value:s(a).invitations,responsiveLayout:"scroll",class:"p-datatable-sm"},{default:d(()=>[r(s(g),{header:"Email",style:{"min-width":"250px"}},{body:d(({data:t})=>[l("div",as,[r(s(ae),{icon:"pi pi-envelope",shape:"circle",class:"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400"}),l("span",ls,p(t.email),1)])]),_:1}),r(s(g),{header:"Role",style:{"min-width":"120px"}},{body:d(({data:t})=>[r(s(U),{value:t.role,severity:Y(t.role)},null,8,["value","severity"])]),_:1}),r(s(g),{header:"Invited By",style:{"min-width":"150px"}},{body:d(({data:t})=>[l("span",is,p(t.invited_by),1)]),_:1}),r(s(g),{header:"Expires",style:{"min-width":"150px"}},{body:d(({data:t})=>[l("span",os,p(me(t.expires_at)),1)]),_:1}),s(a).canManageTeam?(u(),k(s(g),{key:0,header:"Actions",style:{width:"150px"}},{body:d(({data:t})=>[l("div",rs,[E(r(s(y),{icon:"pi pi-refresh",outlined:"",rounded:"",size:"small",severity:"secondary",loading:S.value===t.id,disabled:S.value!==null,onClick:v=>be(t)},null,8,["loading","disabled","onClick"]),[[c,"Resend Invitation",void 0,{top:!0}]]),E(r(s(y),{icon:"pi pi-times",outlined:"",rounded:"",size:"small",severity:"danger",disabled:S.value!==null,onClick:v=>xe(t)},null,8,["disabled","onClick"]),[[c,"Cancel Invitation",void 0,{top:!0}]])])]),_:1})):b("",!0)]),_:1},8,["value"]))])]),_:1}),s(a).isOwner?(u(),k(s(Q),{key:0,header:"Roles & Permissions"},{default:d(()=>[l("div",ns,[l("div",ds,[e[23]||(e[23]=l("p",{class:"text-surface-500 dark:text-surface-400"}," Manage role permissions and create custom roles for your team. ",-1)),r(s(y),{label:"Create Role",icon:"pi pi-plus",size:"small",onClick:Re})]),s(a).loadingPermissions?(u(),m("div",us,[(u(),m($,null,A(3,t=>r(s(K),{height:"4rem",key:t})),64))])):(u(),k(s(X),{key:1,value:s(a).roles,responsiveLayout:"scroll",class:"p-datatable-sm"},{empty:d(()=>[...e[24]||(e[24]=[l("div",{class:"text-center py-8"},[l("i",{class:"pi pi-shield text-4xl text-surface-300 dark:text-surface-600 mb-4"}),l("p",{class:"text-surface-500 dark:text-surface-400"},"No roles found")],-1)])]),default:d(()=>[r(s(g),{header:"Role",style:{"min-width":"200px"}},{body:d(({data:t})=>[l("div",cs,[r(s(U),{value:t.name,severity:Y(t.name)},null,8,["value","severity"]),t.is_custom?(u(),k(s(U),{key:0,value:"Custom",severity:"secondary",class:"text-xs"})):b("",!0)])]),_:1}),r(s(g),{header:"Members",style:{"min-width":"100px"}},{body:d(({data:t})=>[l("span",ms,p(t.member_count),1)]),_:1}),r(s(g),{header:"Permissions",style:{"min-width":"100px"}},{body:d(({data:t})=>[l("span",vs,p(t.permissions.length),1)]),_:1}),r(s(g),{header:"Actions",style:{width:"150px"}},{body:d(({data:t})=>[l("div",ps,[t.is_editable?E((u(),k(s(y),{key:0,icon:"pi pi-lock",outlined:"",rounded:"",size:"small",severity:"secondary",onClick:v=>ke(t)},null,8,["onClick"])),[[c,"Edit Permissions",void 0,{top:!0}]]):b("",!0),t.is_custom?E((u(),k(s(y),{key:1,icon:"pi pi-trash",outlined:"",rounded:"",size:"small",severity:"danger",loading:q.value===t.id,onClick:v=>$e(t)},null,8,["loading","onClick"])),[[c,"Delete Role",void 0,{top:!0}]]):b("",!0)])]),_:1})]),_:1},8,["value"]))])]),_:1})):b("",!0)]),_:1}),r(s(G),{visible:T.value,"onUpdate:visible":e[1]||(e[1]=t=>T.value=t),header:`Edit Permissions - ${((h=B.value)==null?void 0:h.name)||""}`,modal:"",style:{width:"600px"},closable:!O.value},{footer:d(()=>[r(s(y),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[0]||(e[0]=t=>T.value=!1),disabled:O.value},null,8,["disabled"]),r(s(y),{label:"Save Permissions",icon:"pi pi-check",onClick:_e,loading:O.value},null,8,["loading"])]),default:d(()=>[l("div",fs,[(u(!0),m($,null,A(s(a).permissionGroups,t=>(u(),m("div",{key:t.name},[l("h4",ys,p(t.name),1),l("div",hs,[(u(!0),m($,null,A(t.permissions,v=>(u(),m("div",{key:v,class:"flex items-center gap-2"},[r(s(le),{modelValue:we(v),binary:!0,"onUpdate:modelValue":J=>ee(v)},null,8,["modelValue","onUpdate:modelValue"]),l("label",{class:"text-sm text-surface-700 dark:text-surface-300 cursor-pointer",onClick:J=>ee(v)},p(v),9,bs)]))),128))]),r(s(re))]))),128))])]),_:1},8,["visible","header","closable"]),r(s(G),{visible:L.value,"onUpdate:visible":e[4]||(e[4]=t=>L.value=t),header:"Create Custom Role",modal:"",style:{width:"600px"},closable:!z.value},{footer:d(()=>[r(s(y),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[3]||(e[3]=t=>L.value=!1),disabled:z.value},null,8,["disabled"]),r(s(y),{label:"Create Role",icon:"pi pi-plus",onClick:Ce,loading:z.value},null,8,["loading"])]),default:d(()=>[l("div",xs,[l("div",null,[e[25]||(e[25]=l("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2"},"Role Name *",-1)),r(s(ie),{modelValue:_.value.name,"onUpdate:modelValue":e[2]||(e[2]=t=>_.value.name=t),class:"w-full",placeholder:"e.g. Supervisor",invalid:!!C.value.name},null,8,["modelValue","invalid"]),C.value.name?(u(),m("small",gs,p(C.value.name),1)):b("",!0)]),l("div",null,[e[26]||(e[26]=l("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2"},"Permissions *",-1)),C.value.permissions?(u(),m("small",ks,p(C.value.permissions),1)):b("",!0),l("div",ws,[(u(!0),m($,null,A(s(a).permissionGroups,t=>(u(),m("div",{key:t.name},[l("h4",_s,p(t.name),1),l("div",Rs,[(u(!0),m($,null,A(t.permissions,v=>(u(),m("div",{key:v,class:"flex items-center gap-2"},[r(s(le),{modelValue:_.value.permissions.includes(v),binary:!0,"onUpdate:modelValue":J=>se(v)},null,8,["modelValue","onUpdate:modelValue"]),l("label",{class:"text-sm text-surface-700 dark:text-surface-300 cursor-pointer",onClick:J=>se(v)},p(v),9,Cs)]))),128))]),r(s(re))]))),128))])])])]),_:1},8,["visible","closable"]),r(s(G),{visible:M.value,"onUpdate:visible":e[8]||(e[8]=t=>M.value=t),header:"Invite Team Member",modal:"",style:{width:"450px"},closable:!N.value},{footer:d(()=>[r(s(y),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[7]||(e[7]=t=>M.value=!1),disabled:N.value},null,8,["disabled"]),r(s(y),{label:"Send Invitation",icon:"pi pi-send",onClick:ve,loading:N.value},null,8,["loading"])]),default:d(()=>[l("div",$s,[r(s(Fe),{severity:"info",closable:!1},{default:d(()=>[...e[27]||(e[27]=[D(" An invitation email will be sent to the team member with a link to join your team. ",-1)])]),_:1}),l("div",null,[e[28]||(e[28]=l("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2"}," Email Address * ",-1)),r(s(ie),{modelValue:w.value.email,"onUpdate:modelValue":e[5]||(e[5]=t=>w.value.email=t),class:"w-full",placeholder:"colleague@example.com",invalid:!!I.value.email},null,8,["modelValue","invalid"]),I.value.email?(u(),m("small",Is,p(I.value.email),1)):b("",!0)]),l("div",null,[e[29]||(e[29]=l("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2"}," Role ",-1)),r(s(oe),{modelValue:w.value.role,"onUpdate:modelValue":e[6]||(e[6]=t=>w.value.role=t),options:ne.value,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options"]),l("small",Ps,[w.value.role==="Agent"?(u(),m($,{key:0},[D(" Agents can view and reply to conversations. ")],64)):w.value.role==="Company Admin"?(u(),m($,{key:1},[D(" Admins can manage team members and most settings. ")],64)):b("",!0)])])])]),_:1},8,["visible","closable"]),r(s(G),{visible:F.value,"onUpdate:visible":e[11]||(e[11]=t=>F.value=t),header:"Change Role",modal:"",style:{width:"400px"},closable:!j.value},{footer:d(()=>[r(s(y),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[10]||(e[10]=t=>F.value=!1),disabled:j.value},null,8,["disabled"]),r(s(y),{label:"Update Role",onClick:fe,loading:j.value},null,8,["loading"])]),default:d(()=>[l("div",Ms,[l("p",As,[e[30]||(e[30]=D(" Change the role for ",-1)),l("strong",null,p(P.value.memberName),1)]),l("div",null,[e[31]||(e[31]=l("label",{class:"block text-sm font-medium text-surface-700 dark:text-surface-300 mb-2"}," New Role ",-1)),r(s(oe),{modelValue:P.value.role,"onUpdate:modelValue":e[9]||(e[9]=t=>P.value.role=t),options:de.value,optionLabel:"label",optionValue:"value",class:"w-full"},null,8,["modelValue","options"])])])]),_:1},8,["visible","closable"])])],64)}}};export{Xs as default};
