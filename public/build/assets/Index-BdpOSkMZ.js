import{d as Le,H as h,a9 as Te,q as Ne,r as C,c as _,o as Oe,b as p,e as i,B as M,h as U,g as r,x as b,w as y,t as x,F as X,k as Y,m as u,l as z,a5 as Re,n as j,y as q}from"./app-DJ0pZO5B.js";import{_ as qe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ke=Le("media",{state:()=>({items:[],selectedItems:[],loading:!1,error:null,pagination:{page:1,perPage:24,total:0,lastPage:1},filters:{type:"",collection:"",folder:"",search:"",attached:null},folders:[],storageUsage:null,currentView:"grid",sortBy:"created_at",sortOrder:"desc"}),getters:{hasItems:t=>t.items.length>0,hasSelectedItems:t=>t.selectedItems.length>0,selectedCount:t=>t.selectedItems.length,images:t=>t.items.filter(e=>e.media_type==="image"),videos:t=>t.items.filter(e=>e.media_type==="video"),audio:t=>t.items.filter(e=>e.media_type==="audio"),documents:t=>t.items.filter(e=>e.media_type==="document"),files:t=>t.items.filter(e=>e.media_type==="file"),isSelected:t=>e=>t.selectedItems.includes(e),allSelected:t=>t.items.length>0&&t.selectedItems.length===t.items.length,activeFilters:t=>{const e=[];return t.filters.type&&e.push(`Type: ${t.filters.type}`),t.filters.collection&&e.push(`Collection: ${t.filters.collection}`),t.filters.folder&&e.push(`Folder: ${t.filters.folder}`),t.filters.search&&e.push(`Search: ${t.filters.search}`),e}},actions:{async fetchItems(t=null){var e,o;this.loading=!0,this.error=null;try{const s={page:t||this.pagination.page,per_page:this.pagination.perPage,sort_by:this.sortBy,sort_order:this.sortOrder};this.filters.type&&(s.type=this.filters.type),this.filters.collection&&(s.collection=this.filters.collection),this.filters.folder!==""&&(s.folder=this.filters.folder),this.filters.search&&(s.search=this.filters.search),this.filters.attached!==null&&(s.attached=this.filters.attached);const d=await h.get("/media",{params:s});this.items=d.data.data,this.pagination={page:d.data.current_page,perPage:d.data.per_page,total:d.data.total,lastPage:d.data.last_page}}catch(s){this.error=((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load media",console.error("Failed to fetch media:",s)}finally{this.loading=!1}},async upload(t,e={}){var s,d;const o=new FormData;o.append("file",t),e.collection&&o.append("collection",e.collection),e.folder&&o.append("folder",e.folder),e.alt&&o.append("alt",e.alt),e.title&&o.append("title",e.title),e.description&&o.append("description",e.description),e.caption&&o.append("caption",e.caption),o.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await h.post("/media",o,{headers:{"Content-Type":"multipart/form-data"}})).data.media}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload file")}},async bulkUpload(t,e={}){var s,d;const o=new FormData;t.forEach(f=>{o.append("files[]",f)}),e.collection&&o.append("collection",e.collection),e.folder&&o.append("folder",e.folder),o.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await h.post("/media/bulk-upload",o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e.onProgress})).data}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload files")}},async importFromUrl(t,e={}){var o,s;try{return(await h.post("/media/import-from-url",{url:t,file_name:e.fileName,collection:e.collection,folder:e.folder,ai_analyze:e.aiAnalyze!==!1})).data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to import from URL")}},async getItem(t){var e,o;try{return(await h.get(`/media/${t}`)).data.media}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to get media")}},async updateItem(t,e){var o,s;try{const d=await h.put(`/media/${t}`,e),f=this.items.findIndex(w=>w.id===t);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to update media")}},async deleteItem(t){var e,o;try{return await h.delete(`/media/${t}`),this.items=this.items.filter(s=>s.id!==t),this.selectedItems=this.selectedItems.filter(s=>s!==t),!0}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete media")}},async bulkDelete(t){var e,o;try{const s=await h.post("/media/bulk-delete",{ids:t});return this.items=this.items.filter(d=>!t.includes(d.id)),this.selectedItems=this.selectedItems.filter(d=>!t.includes(d)),s.data.deleted}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete media")}},async copyItem(t,e){var o,s;try{return(await h.post(`/media/${t}/copy`,{file_name:e})).data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to copy media")}},async moveToFolder(t,e){var o,s;try{const d=await h.post(`/media/${t}/move`,{folder:e}),f=this.items.findIndex(w=>w.id===t);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to move media")}},async attachToModel(t,e,o,s=0){var d,f;try{return(await h.post(`/media/${t}/attach`,{mediable_type:e,mediable_id:o,order:s})).data.media}catch(w){throw new Error(((f=(d=w.response)==null?void 0:d.data)==null?void 0:f.message)||"Failed to attach media")}},async detachFromModel(t){var e,o;try{return(await h.post(`/media/${t}/detach`)).data.media}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to detach media")}},async getForModel(t,e){var o,s;try{return(await h.get("/media/for-model",{params:{mediable_type:t,mediable_id:e}})).data}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to get media")}},async reorder(t){var e,o;try{await h.post("/media/reorder",{media:t})}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to reorder media")}},async analyzeItem(t){var e,o;try{await h.post(`/media/${t}/analyze`);const s=await this.getItem(t),d=this.items.findIndex(f=>f.id===t);return d!==-1&&(this.items[d]=s),s}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to analyze media")}},async fetchStorageUsage(){try{const t=await h.get("/media/storage-usage");return this.storageUsage=t.data,t.data}catch(t){return console.error("Failed to fetch storage usage:",t),null}},async fetchFolders(){try{const t=await h.get("/media/folders");return this.folders=t.data.folders,t.data.folders}catch(t){return console.error("Failed to fetch folders:",t),[]}},async fetchByCollection(t){var e,o;try{const s={per_page:this.pagination.perPage};return this.filters.type&&(s.type=this.filters.type),(await h.get(`/media/collection/${t}`,{params:s})).data}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to fetch media")}},setFilter(t,e){this.filters[t]=e,this.pagination.page=1},clearFilters(){this.filters={type:"",collection:"",folder:"",search:"",attached:null},this.pagination.page=1},setSorting(t,e="desc"){this.sortBy=t,this.sortOrder=e},setView(t){this.currentView=t},toggleSelect(t){this.selectedItems.includes(t)?this.selectedItems=this.selectedItems.filter(e=>e!==t):this.selectedItems.push(t)},toggleSelectAll(){this.allSelected?this.selectedItems=[]:this.selectedItems=this.items.map(t=>t.id)},clearSelection(){this.selectedItems=[]},selectMultiple(t){t.forEach(e=>{this.selectedItems.includes(e)||this.selectedItems.push(e)})},nextPage(){this.pagination.page<this.pagination.lastPage&&(this.pagination.page++,this.fetchItems())},prevPage(){this.pagination.page>1&&(this.pagination.page--,this.fetchItems())},goToPage(t){this.pagination.page=t,this.fetchItems()},setPerPage(t){this.pagination.perPage=t,this.pagination.page=1,this.fetchItems()},getFileIcon(t){return t.startsWith("image/")?"pi pi-image":t.startsWith("video/")?"pi pi-video":t.startsWith("audio/")?"pi pi-volume-up":t.includes("pdf")?"pi pi-file-pdf":t.includes("word")||t.includes("document")?"pi pi-file-word":t.includes("excel")||t.includes("sheet")?"pi pi-file-excel":t.includes("powerpoint")||t.includes("presentation")?"pi pi-file":t.includes("zip")||t.includes("rar")||t.includes("compressed")?"pi pi-file-zip":"pi pi-file"},getMediaTypeColor(t){const e={image:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",video:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",audio:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",document:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",file:"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300"};return e[t]||e.file}}}),We={class:"media-library"},Ge={class:"flex items-center justify-between mb-6"},He={class:"flex items-center gap-3"},Je={class:"flex items-center justify-between"},Qe={class:"flex-1"},Xe={class:"flex items-center justify-between text-sm mb-2"},Ye={class:"font-medium"},Ze={class:"flex items-center gap-4 mt-3 text-xs text-surface-500"},et={class:"flex flex-col md:flex-row gap-4"},tt={class:"flex-1"},lt={class:"flex items-center gap-1 border rounded-lg p-1"},at={key:0,class:"flex items-center gap-2 mt-4 flex-wrap"},st={key:1,class:"fixed bottom-0 left-0 right-0 bg-surface-0 dark:bg-surface-900 border-t border-surface-200 dark:border-surface-700 p-4 shadow-lg z-10"},it={class:"max-w-7xl mx-auto flex items-center justify-between"},ot={class:"text-surface-600 dark:text-surface-400"},rt={class:"flex items-center gap-2"},nt={key:2,class:"flex items-center justify-center py-20"},dt={key:3,class:"flex flex-col items-center justify-center py-20 text-center"},ct={key:4,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},ut=["onClick"],mt={class:"aspect-square bg-surface-100 dark:bg-surface-800 rounded-lg overflow-hidden"},pt=["src","alt"],ft={key:1,class:"w-full h-full flex items-center justify-center"},vt={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2"},gt={class:"mt-2"},yt=["title"],ht={class:"text-xs text-surface-500"},bt={class:"flex items-center gap-3"},xt={class:"w-12 h-12 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center flex-shrink-0"},_t=["src","alt"],wt={class:"min-w-0"},kt=["title"],Ct={class:"text-xs text-surface-500"},It={class:"flex items-center gap-1"},Ft={key:6,class:"flex items-center justify-between mt-6"},Vt={class:"text-sm text-surface-600 dark:text-surface-400"},Ut={class:"mt-4"},St={class:"space-y-4"},zt={key:0,class:"space-y-4"},Pt={class:"flex justify-center"},$t={class:"w-32 h-32 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center"},Dt=["src","alt"],Et={key:0,class:"space-y-4"},At={class:"flex justify-center bg-surface-100 dark:bg-surface-800 rounded-lg p-4"},Mt=["src","alt"],jt=["src"],Bt=["src"],Lt={key:3,class:"text-center"},Tt={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Nt={class:"text-sm text-surface-600 dark:text-surface-400"},Ot={key:0,class:"flex flex-wrap gap-2 mt-3"},Rt={__name:"Index",setup(t){const e=Ke(),o=Te(),s=Ne(),d=C(!1),f=C(!1),w=C(!1),$=C(!1),g=C(null),c=C(null),D=C(""),B=C(""),K=C(!1),W=C(!1),F=C([]),Z=C({collection:"",folder:"",aiAnalyze:!0}),ee=[{label:"All Types",value:""},{label:"Images",value:"image"},{label:"Videos",value:"video"},{label:"Audio",value:"audio"},{label:"Documents",value:"document"},{label:"Files",value:"file"}],G=[{label:"All Collections",value:""},{label:"Product Images",value:"products"},{label:"Message Attachments",value:"messages"},{label:"General Attachments",value:"attachments"},{label:"Profile Photos",value:"avatars"},{label:"Company Logos",value:"logos"},{label:"Documents",value:"documents"},{label:"Broadcast Media",value:"broadcasts"}],H=_(()=>e.items),L=_(()=>e.loading),k=_(()=>e.pagination),S=_(()=>e.storageUsage),E=_({get:()=>e.currentView,set:n=>e.setView(n)}),v=_({get:()=>e.filters,set:n=>e.filters=n}),ce=_(()=>Object.values(v.value).some(n=>n!==""&&n!==null)),ue=_(()=>{const n=[];if(v.value.type){const l=ee.find(m=>m.value===v.value.type);n.push({key:"type",label:(l==null?void 0:l.label)||v.value.type})}if(v.value.collection){const l=G.find(m=>m.value===v.value.collection);n.push({key:"collection",label:(l==null?void 0:l.label)||v.value.collection})}return v.value.folder&&n.push({key:"folder",label:`Folder: ${v.value.folder}`}),v.value.search&&n.push({key:"search",label:`Search: ${v.value.search}`}),n}),me=_(()=>["",...e.folders||[]]),te=_(()=>e.hasItems),pe=_(()=>F.value.length>0),T=_(()=>F.value.length),fe=_(()=>{if(!S.value)return 0;const n=5*1024*1024*1024;return Math.min(100,Math.round(S.value.total_size/n*100))}),ve=_(()=>c.value?[{key:"Type",value:c.value.media_type},{key:"MIME Type",value:c.value.mime_type},{key:"Size",value:c.value.human_size},{key:"Dimensions",value:c.value.width&&c.value.height?`${c.value.width} Ã— ${c.value.height}`:"-"},{key:"Uploaded",value:ie(c.value.created_at)},{key:"Collection",value:c.value.collection||"-"},{key:"Usage Count",value:c.value.usage_count||0}]:[]),le=n=>F.value.includes(n),ge=n=>{const l=F.value.indexOf(n);l>-1?F.value.splice(l,1):F.value.push(n)},ae=()=>{F.value=[]},A=()=>{e.filters={...v.value},e.fetchItems()},ye=n=>{v.value[n]=n==="attached"?null:"",A()},he=()=>{e.clearFilters(),v.value={...e.filters}},J=n=>{c.value=n,$.value=!0},Q=n=>{g.value={...n},w.value=!0},be=async()=>{W.value=!0;try{await e.updateItem(g.value.id,{file_name:g.value.file_name,alt:g.value.alt,title:g.value.title,description:g.value.description}),w.value=!1,s.add({severity:"success",summary:"Success",detail:"Media updated successfully",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{W.value=!1}},se=n=>{o.require({message:`Are you sure you want to delete "${n.file_name}"?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>xe(n.id)})},xe=async n=>{try{await e.deleteItem(n),s.add({severity:"success",summary:"Success",detail:"Media deleted",life:3e3})}catch(l){s.add({severity:"error",summary:"Error",detail:l.message,life:3e3})}},_e=()=>{o.require({message:`Are you sure you want to delete ${T.value} item${T.value!==1?"s":""}?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:we})},we=async()=>{try{const n=await e.bulkDelete(F.value);ae(),s.add({severity:"success",summary:"Success",detail:`${n} item(s) deleted`,life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}},ke=async()=>{d.value=!1,await e.fetchItems(),s.add({severity:"success",summary:"Success",detail:"Files uploaded successfully",life:3e3})},Ce=n=>{},Ie=async()=>{K.value=!0;try{await e.importFromUrl(D.value,{fileName:B.value||void 0,aiAnalyze:!0}),f.value=!1,D.value="",B.value="",await e.fetchItems(),s.add({severity:"success",summary:"Success",detail:"Media imported successfully",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{K.value=!1}},Fe=async()=>{try{await e.analyzeItem(c.value.id),s.add({severity:"success",summary:"Success",detail:"AI analysis started",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}},Ve=n=>{e.goToPage(n.page+1)},ie=n=>n?new Date(n).toLocaleDateString():"-",N=n=>e.getFileIcon(n),Ue=n=>({image:"info",video:"warn",audio:"success",document:"secondary",file:"secondary"})[n]||"secondary";return Oe(async()=>{await Promise.all([e.fetchItems(),e.fetchStorageUsage(),e.fetchFolders()])}),(n,l)=>{var de;const m=b("Button"),Se=b("ProgressBar"),oe=b("Card"),ze=b("InputIcon"),P=b("InputText"),Pe=b("IconField"),O=b("Dropdown"),re=b("Chip"),$e=b("ProgressSpinner"),De=b("Checkbox"),V=b("Column"),Ee=b("Tag"),ne=b("DataTable"),Ae=b("Paginator"),Me=b("FileUpload"),R=b("Dialog"),je=b("Textarea"),Be=b("ConfirmDialog");return u(),p("div",We,[i("div",Ge,[l[26]||(l[26]=i("div",null,[i("h1",{class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},"Media Library"),i("p",{class:"text-surface-600 dark:text-surface-400 mt-1"}," Manage all your images, videos, documents, and files ")],-1)),i("div",He,[r(m,{label:"Add New",icon:"pi pi-plus",onClick:l[0]||(l[0]=a=>d.value=!0),disabled:L.value},null,8,["disabled"]),r(m,{label:"Import from URL",icon:"pi pi-link",outlined:"",onClick:l[1]||(l[1]=a=>f.value=!0)})])]),S.value?(u(),M(oe,{key:0,class:"mb-6"},{content:y(()=>[i("div",Je,[i("div",Qe,[i("div",Xe,[l[27]||(l[27]=i("span",{class:"text-surface-600 dark:text-surface-400"},"Storage Used",-1)),i("span",Ye,x(S.value.human_size),1)]),r(Se,{value:fe.value,class:"h-2"},null,8,["value"]),i("div",Ze,[i("span",null,[l[28]||(l[28]=i("i",{class:"pi pi-image mr-1"},null,-1)),z(x(S.value.by_type.image||0)+" images",1)]),i("span",null,[l[29]||(l[29]=i("i",{class:"pi pi-video mr-1"},null,-1)),z(x(S.value.by_type.video||0)+" videos",1)]),i("span",null,[l[30]||(l[30]=i("i",{class:"pi pi-file mr-1"},null,-1)),z(x(S.value.by_type.document||0)+" documents",1)])])])])]),_:1})):U("",!0),r(oe,{class:"mb-6"},{content:y(()=>[i("div",et,[i("div",tt,[r(Pe,{iconPosition:"left"},{default:y(()=>[r(ze,{class:"pi pi-search"}),r(P,{modelValue:v.value.search,"onUpdate:modelValue":l[2]||(l[2]=a=>v.value.search=a),placeholder:"Search media...",class:"w-full",onKeyup:Re(A,["enter"])},null,8,["modelValue"])]),_:1})]),r(O,{modelValue:v.value.type,"onUpdate:modelValue":l[3]||(l[3]=a=>v.value.type=a),options:ee,optionLabel:"label",optionValue:"value",placeholder:"All Types",class:"w-full md:w-40",onChange:A},null,8,["modelValue"]),r(O,{modelValue:v.value.collection,"onUpdate:modelValue":l[4]||(l[4]=a=>v.value.collection=a),options:G,optionLabel:"label",optionValue:"value",placeholder:"All Collections",class:"w-full md:w-48",onChange:A},null,8,["modelValue"]),r(O,{modelValue:v.value.folder,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value.folder=a),options:me.value,placeholder:"All Folders",class:"w-full md:w-48",onChange:A,showClear:""},null,8,["modelValue","options"]),i("div",lt,[r(m,{icon:"pi pi-th-large",severity:E.value==="grid"?"primary":"secondary",text:"",size:"small",onClick:l[6]||(l[6]=a=>E.value="grid")},null,8,["severity"]),r(m,{icon:"pi pi-list",severity:E.value==="list"?"primary":"secondary",text:"",size:"small",onClick:l[7]||(l[7]=a=>E.value="list")},null,8,["severity"])])]),ce.value?(u(),p("div",at,[(u(!0),p(X,null,Y(ue.value,a=>(u(),M(re,{key:a.key,label:a.label,removable:"",onRemove:I=>ye(a.key),class:"text-xs"},null,8,["label","onRemove"]))),128)),r(m,{label:"Clear All",link:"",size:"small",onClick:he})])):U("",!0)]),_:1}),pe.value?(u(),p("div",st,[i("div",it,[i("span",ot,x(T.value)+" item"+x(T.value!==1?"s":"")+" selected ",1),i("div",rt,[r(m,{label:"Delete",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:_e}),r(m,{label:"Clear Selection",outlined:"",onClick:ae})])])])):U("",!0),L.value&&H.value.length===0?(u(),p("div",nt,[r($e)])):!te.value&&!L.value?(u(),p("div",dt,[l[31]||(l[31]=i("i",{class:"pi pi-folder-open text-6xl text-surface-300 dark:text-surface-600 mb-4"},null,-1)),l[32]||(l[32]=i("h3",{class:"text-xl font-semibold text-surface-900 dark:text-surface-0 mb-2"}," No media files yet ",-1)),l[33]||(l[33]=i("p",{class:"text-surface-600 dark:text-surface-400 mb-6 max-w-md"}," Upload images, videos, documents, and other files to manage them in one place. ",-1)),r(m,{label:"Upload Files",icon:"pi pi-upload",onClick:l[8]||(l[8]=a=>d.value=!0)})])):E.value==="grid"?(u(),p("div",ct,[(u(!0),p(X,null,Y(H.value,a=>(u(),p("div",{key:a.id,class:j(["media-item group relative",{"ring-2 ring-primary-500":le(a.id)}]),onClick:I=>J(a)},[i("div",{class:"absolute top-2 left-2 z-10",onClick:l[9]||(l[9]=q(()=>{},["stop"]))},[r(De,{modelValue:le(a.id),onChange:I=>ge(a.id)},null,8,["modelValue","onChange"])]),i("div",mt,[a.is_image?(u(),p("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover",loading:"lazy"},null,8,pt)):(u(),p("div",ft,[i("i",{class:j([N(a.mime_type),"text-4xl text-surface-400"])},null,2)]))]),i("div",vt,[r(m,{icon:"pi pi-eye",rounded:"",size:"small",onClick:q(I=>J(a),["stop"])},null,8,["onClick"]),r(m,{icon:"pi pi-pencil",rounded:"",severity:"secondary",size:"small",onClick:q(I=>Q(a),["stop"])},null,8,["onClick"]),r(m,{icon:"pi pi-trash",rounded:"",severity:"danger",size:"small",onClick:q(I=>se(a),["stop"])},null,8,["onClick"])]),i("div",gt,[i("p",{class:"text-sm font-medium truncate",title:a.file_name},x(a.file_name),9,yt),i("p",ht,x(a.human_size),1)])],10,ut))),128))])):(u(),M(ne,{key:5,value:H.value,selection:F.value,onSelectionChange:l[10]||(l[10]=a=>F.value=a),dataKey:"id",loading:L.value,stripedRows:""},{default:y(()=>[r(V,{selectionMode:"multiple",headerStyle:"width: 3rem"}),r(V,{header:"File"},{body:y(({data:a})=>[i("div",bt,[i("div",xt,[a.is_image?(u(),p("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover rounded"},null,8,_t)):(u(),p("i",{key:1,class:j([N(a.mime_type),"text-xl text-surface-400"])},null,2))]),i("div",wt,[i("p",{class:"font-medium truncate",title:a.file_name},x(a.file_name),9,kt),i("p",Ct,x(a.mime_type),1)])])]),_:1}),r(V,{field:"media_type",header:"Type",class:"w-32"},{body:y(({data:a})=>[r(Ee,{value:a.media_type,severity:Ue(a.media_type)},null,8,["value","severity"])]),_:1}),r(V,{field:"file_size",header:"Size",class:"w-24"},{body:y(({data:a})=>[z(x(a.human_size),1)]),_:1}),r(V,{field:"collection",header:"Collection",class:"w-32"},{body:y(({data:a})=>[z(x(a.collection||"-"),1)]),_:1}),r(V,{field:"created_at",header:"Uploaded",class:"w-40"},{body:y(({data:a})=>[z(x(ie(a.created_at)),1)]),_:1}),r(V,{header:"Actions",class:"w-32"},{body:y(({data:a})=>[i("div",It,[r(m,{icon:"pi pi-eye",text:"",size:"small",onClick:I=>J(a)},null,8,["onClick"]),r(m,{icon:"pi pi-pencil",text:"",size:"small",onClick:I=>Q(a)},null,8,["onClick"]),r(m,{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:I=>se(a)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","selection","loading"])),te.value&&k.value.total>k.value.perPage?(u(),p("div",Ft,[i("span",Vt," Showing "+x((k.value.page-1)*k.value.perPage+1)+" to "+x(Math.min(k.value.page*k.value.perPage,k.value.total))+" of "+x(k.value.total)+" items ",1),r(Ae,{rows:k.value.perPage,totalRecords:k.value.total,first:(k.value.page-1)*k.value.perPage,onPage:Ve},null,8,["rows","totalRecords","first"])])):U("",!0),r(R,{visible:d.value,"onUpdate:visible":l[12]||(l[12]=a=>d.value=a),header:"Upload Files",style:{width:"600px"},modal:!0},{default:y(()=>[r(Me,{multiple:!0,auto:!1,customUpload:!0,onSelect:Ce,onUploader:ke,chooseLabel:"Choose Files",uploadLabel:"Upload",cancelLabel:"Cancel",maxFileSize:52428800,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx"},{empty:y(()=>[...l[34]||(l[34]=[i("div",{class:"flex flex-col items-center justify-center py-8"},[i("i",{class:"pi pi-cloud-upload text-4xl text-surface-400 mb-3"}),i("p",{class:"text-surface-600 dark:text-surface-400"}," Drag and drop files here or click to browse ")],-1)])]),_:1}),i("div",Ut,[l[35]||(l[35]=i("label",{class:"block text-sm font-medium mb-2"},"Collection (optional)",-1)),r(O,{modelValue:Z.value.collection,"onUpdate:modelValue":l[11]||(l[11]=a=>Z.value.collection=a),options:G,optionLabel:"label",optionValue:"value",placeholder:"Select collection",class:"w-full"},null,8,["modelValue"])])]),_:1},8,["visible"]),r(R,{visible:f.value,"onUpdate:visible":l[16]||(l[16]=a=>f.value=a),header:"Import from URL",style:{width:"500px"},modal:!0},{footer:y(()=>[r(m,{label:"Cancel",outlined:"",onClick:l[15]||(l[15]=a=>f.value=!1)}),r(m,{label:"Import",onClick:Ie,loading:K.value,disabled:!D.value},null,8,["loading","disabled"])]),default:y(()=>[i("div",St,[i("div",null,[l[36]||(l[36]=i("label",{class:"block text-sm font-medium mb-2"},"URL",-1)),r(P,{modelValue:D.value,"onUpdate:modelValue":l[13]||(l[13]=a=>D.value=a),placeholder:"https://example.com/image.jpg",class:"w-full"},null,8,["modelValue"])]),i("div",null,[l[37]||(l[37]=i("label",{class:"block text-sm font-medium mb-2"},"File Name (optional)",-1)),r(P,{modelValue:B.value,"onUpdate:modelValue":l[14]||(l[14]=a=>B.value=a),placeholder:"Custom file name",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]),r(R,{visible:w.value,"onUpdate:visible":l[22]||(l[22]=a=>w.value=a),header:"Edit Media",style:{width:"500px"},modal:!0},{footer:y(()=>[r(m,{label:"Cancel",outlined:"",onClick:l[21]||(l[21]=a=>w.value=!1)}),r(m,{label:"Save",onClick:be,loading:W.value},null,8,["loading"])]),default:y(()=>[g.value?(u(),p("div",zt,[i("div",Pt,[i("div",$t,[g.value.is_image?(u(),p("img",{key:0,src:g.value.thumbnail_url||g.value.url,alt:g.value.alt||g.value.file_name,class:"max-w-full max-h-full object-contain"},null,8,Dt)):(u(),p("i",{key:1,class:j([N(g.value.mime_type),"text-4xl text-surface-400"])},null,2))])]),i("div",null,[l[38]||(l[38]=i("label",{class:"block text-sm font-medium mb-2"},"File Name",-1)),r(P,{modelValue:g.value.file_name,"onUpdate:modelValue":l[17]||(l[17]=a=>g.value.file_name=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[l[39]||(l[39]=i("label",{class:"block text-sm font-medium mb-2"},"Alt Text",-1)),r(P,{modelValue:g.value.alt,"onUpdate:modelValue":l[18]||(l[18]=a=>g.value.alt=a),class:"w-full",placeholder:"Description for accessibility"},null,8,["modelValue"])]),i("div",null,[l[40]||(l[40]=i("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),r(P,{modelValue:g.value.title,"onUpdate:modelValue":l[19]||(l[19]=a=>g.value.title=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[l[41]||(l[41]=i("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),r(je,{modelValue:g.value.description,"onUpdate:modelValue":l[20]||(l[20]=a=>g.value.description=a),class:"w-full",rows:"3"},null,8,["modelValue"])])])):U("",!0)]),_:1},8,["visible"]),r(R,{visible:$.value,"onUpdate:visible":l[25]||(l[25]=a=>$.value=a),header:(de=c.value)==null?void 0:de.file_name,style:{width:"80vw"},modal:!0,maximizable:""},{footer:y(()=>[r(m,{label:"Close",onClick:l[23]||(l[23]=a=>$.value=!1)}),c.value&&!c.value.ai_analysis?(u(),M(m,{key:0,label:"Analyze with AI",icon:"pi pi-sparkles",outlined:"",onClick:Fe})):U("",!0),r(m,{label:"Edit",icon:"pi pi-pencil",onClick:l[24]||(l[24]=a=>{Q(c.value),$.value=!1})})]),default:y(()=>{var a;return[c.value?(u(),p("div",Et,[i("div",At,[c.value.is_image?(u(),p("img",{key:0,src:c.value.url,alt:c.value.alt||c.value.file_name,class:"max-w-full max-h-[60vh] object-contain"},null,8,Mt)):c.value.is_video?(u(),p("video",{key:1,src:c.value.url,controls:"",class:"max-w-full max-h-[60vh]"},null,8,jt)):c.value.is_audio?(u(),p("audio",{key:2,src:c.value.url,controls:""},null,8,Bt)):(u(),p("div",Lt,[i("i",{class:j([N(c.value.mime_type),"text-6xl text-surface-400 mb-4"])},null,2),i("p",null,x(c.value.file_name),1)]))]),c.value.ai_analysis?(u(),p("div",Tt,[l[42]||(l[42]=i("h4",{class:"font-medium mb-2"},[i("i",{class:"pi pi-sparkles mr-2"}),z("AI Analysis")],-1)),i("p",Nt,x(c.value.ai_analysis),1),(a=c.value.ai_tags)!=null&&a.length?(u(),p("div",Ot,[(u(!0),p(X,null,Y(c.value.ai_tags,I=>(u(),M(re,{key:I,label:I,size:"small"},null,8,["label"]))),128))])):U("",!0)])):U("",!0),r(ne,{value:ve.value,class:"text-sm"},{default:y(()=>[r(V,{field:"key",header:"Property",class:"w-40"}),r(V,{field:"value",header:"Value"})]),_:1},8,["value"])])):U("",!0)]}),_:1},8,["visible","header"]),r(Be)])}}},Wt=qe(Rt,[["__scopeId","data-v-f2db1098"]]);export{Wt as default};
