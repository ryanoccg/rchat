import{d as qe,H as h,a9 as We,q as Ke,r as _,c as k,o as Ge,b as p,e as i,B as P,h as U,g as n,x as b,w as y,t as x,F as Y,k as ee,X as He,m,l as $,a5 as Xe,n as j,y as K,Z as fe}from"./app-BgQ0ba_x.js";import{_ as Ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Je=qe("media",{state:()=>({items:[],selectedItems:[],loading:!1,error:null,pagination:{page:1,perPage:24,total:0,lastPage:1},filters:{type:"",collection:"",folder:"",search:"",attached:null},folders:[],storageUsage:null,currentView:"grid",sortBy:"created_at",sortOrder:"desc"}),getters:{hasItems:l=>l.items.length>0,hasSelectedItems:l=>l.selectedItems.length>0,selectedCount:l=>l.selectedItems.length,images:l=>l.items.filter(e=>e.media_type==="image"),videos:l=>l.items.filter(e=>e.media_type==="video"),audio:l=>l.items.filter(e=>e.media_type==="audio"),documents:l=>l.items.filter(e=>e.media_type==="document"),files:l=>l.items.filter(e=>e.media_type==="file"),isSelected:l=>e=>l.selectedItems.includes(e),allSelected:l=>l.items.length>0&&l.selectedItems.length===l.items.length,activeFilters:l=>{const e=[];return l.filters.type&&e.push(`Type: ${l.filters.type}`),l.filters.collection&&e.push(`Collection: ${l.filters.collection}`),l.filters.folder&&e.push(`Folder: ${l.filters.folder}`),l.filters.search&&e.push(`Search: ${l.filters.search}`),e}},actions:{async fetchItems(l=null){var e,o;this.loading=!0,this.error=null;try{const s={page:l||this.pagination.page,per_page:this.pagination.perPage,sort_by:this.sortBy,sort_order:this.sortOrder};this.filters.type&&(s.type=this.filters.type),this.filters.collection&&(s.collection=this.filters.collection),this.filters.folder!==""&&(s.folder=this.filters.folder),this.filters.search&&(s.search=this.filters.search),this.filters.attached!==null&&(s.attached=this.filters.attached);const d=await h.get("/media",{params:s});this.items=d.data.data,this.pagination={page:d.data.current_page,perPage:d.data.per_page,total:d.data.total,lastPage:d.data.last_page}}catch(s){this.error=((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to load media",console.error("Failed to fetch media:",s)}finally{this.loading=!1}},async upload(l,e={}){var s,d;const o=new FormData;o.append("file",l),e.collection&&o.append("collection",e.collection),e.folder&&o.append("folder",e.folder),e.alt&&o.append("alt",e.alt),e.title&&o.append("title",e.title),e.description&&o.append("description",e.description),e.caption&&o.append("caption",e.caption),o.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await h.post("/media",o,{headers:{"Content-Type":"multipart/form-data"}})).data.media}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload file")}},async bulkUpload(l,e={}){var s,d;const o=new FormData;l.forEach(f=>{o.append("files[]",f)}),e.collection&&o.append("collection",e.collection),e.folder&&o.append("folder",e.folder),o.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await h.post("/media/bulk-upload",o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e.onProgress})).data}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload files")}},async importFromUrl(l,e={}){var o,s;try{return(await h.post("/media/import-from-url",{url:l,file_name:e.fileName,collection:e.collection,folder:e.folder,ai_analyze:e.aiAnalyze!==!1})).data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to import from URL")}},async getItem(l){var e,o;try{return(await h.get(`/media/${l}`)).data.media}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to get media")}},async updateItem(l,e){var o,s;try{const d=await h.put(`/media/${l}`,e),f=this.items.findIndex(C=>C.id===l);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to update media")}},async deleteItem(l){var e,o;try{return await h.delete(`/media/${l}`),this.items=this.items.filter(s=>s.id!==l),this.selectedItems=this.selectedItems.filter(s=>s!==l),!0}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete media")}},async bulkDelete(l){var e,o;try{const s=await h.post("/media/bulk-delete",{ids:l});return this.items=this.items.filter(d=>!l.includes(d.id)),this.selectedItems=this.selectedItems.filter(d=>!l.includes(d)),s.data.deleted}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to delete media")}},async copyItem(l,e){var o,s;try{return(await h.post(`/media/${l}/copy`,{file_name:e})).data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to copy media")}},async moveToFolder(l,e){var o,s;try{const d=await h.post(`/media/${l}/move`,{folder:e}),f=this.items.findIndex(C=>C.id===l);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to move media")}},async attachToModel(l,e,o,s=0){var d,f;try{return(await h.post(`/media/${l}/attach`,{mediable_type:e,mediable_id:o,order:s})).data.media}catch(C){throw new Error(((f=(d=C.response)==null?void 0:d.data)==null?void 0:f.message)||"Failed to attach media")}},async detachFromModel(l){var e,o;try{return(await h.post(`/media/${l}/detach`)).data.media}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to detach media")}},async getForModel(l,e){var o,s;try{return(await h.get("/media/for-model",{params:{mediable_type:l,mediable_id:e}})).data}catch(d){throw new Error(((s=(o=d.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to get media")}},async reorder(l){var e,o;try{await h.post("/media/reorder",{media:l})}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to reorder media")}},async analyzeItem(l){var e,o;try{await h.post(`/media/${l}/analyze`);const s=await this.getItem(l),d=this.items.findIndex(f=>f.id===l);return d!==-1&&(this.items[d]=s),s}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to analyze media")}},async fetchStorageUsage(){try{const l=await h.get("/media/storage-usage");return this.storageUsage=l.data,l.data}catch(l){return console.error("Failed to fetch storage usage:",l),null}},async fetchFolders(){try{const l=await h.get("/media/folders");return this.folders=l.data.folders,l.data.folders}catch(l){return console.error("Failed to fetch folders:",l),[]}},async fetchByCollection(l){var e,o;try{const s={per_page:this.pagination.perPage};return this.filters.type&&(s.type=this.filters.type),(await h.get(`/media/collection/${l}`,{params:s})).data}catch(s){throw new Error(((o=(e=s.response)==null?void 0:e.data)==null?void 0:o.message)||"Failed to fetch media")}},setFilter(l,e){this.filters[l]=e,this.pagination.page=1},clearFilters(){this.filters={type:"",collection:"",folder:"",search:"",attached:null},this.pagination.page=1},setSorting(l,e="desc"){this.sortBy=l,this.sortOrder=e},setView(l){this.currentView=l},toggleSelect(l){this.selectedItems.includes(l)?this.selectedItems=this.selectedItems.filter(e=>e!==l):this.selectedItems.push(l)},toggleSelectAll(){this.allSelected?this.selectedItems=[]:this.selectedItems=this.items.map(l=>l.id)},clearSelection(){this.selectedItems=[]},selectMultiple(l){l.forEach(e=>{this.selectedItems.includes(e)||this.selectedItems.push(e)})},nextPage(){this.pagination.page<this.pagination.lastPage&&(this.pagination.page++,this.fetchItems())},prevPage(){this.pagination.page>1&&(this.pagination.page--,this.fetchItems())},goToPage(l){this.pagination.page=l,this.fetchItems()},setPerPage(l){this.pagination.perPage=l,this.pagination.page=1,this.fetchItems()},getFileIcon(l){return l.startsWith("image/")?"pi pi-image":l.startsWith("video/")?"pi pi-video":l.startsWith("audio/")?"pi pi-volume-up":l.includes("pdf")?"pi pi-file-pdf":l.includes("word")||l.includes("document")?"pi pi-file-word":l.includes("excel")||l.includes("sheet")?"pi pi-file-excel":l.includes("powerpoint")||l.includes("presentation")?"pi pi-file":l.includes("zip")||l.includes("rar")||l.includes("compressed")?"pi pi-file-zip":"pi pi-file"},getMediaTypeColor(l){const e={image:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",video:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",audio:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",document:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",file:"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300"};return e[l]||e.file}}}),Qe={class:"media-library"},Ye={class:"flex items-center justify-between mb-6"},et={class:"flex items-center gap-3"},tt={class:"flex items-center justify-between"},lt={class:"flex-1"},at={class:"flex items-center justify-between text-sm mb-2"},st={class:"font-medium"},it={class:"flex items-center gap-4 mt-3 text-xs text-surface-500"},ot={class:"flex flex-col md:flex-row gap-4"},rt={class:"flex-1"},nt={class:"flex items-center gap-1 border rounded-lg p-1"},dt={key:0,class:"flex items-center gap-2 mt-4 flex-wrap"},ut={key:1,class:"fixed bottom-0 left-0 right-0 bg-surface-0 dark:bg-surface-900 border-t border-surface-200 dark:border-surface-700 p-4 shadow-lg z-10"},ct={class:"max-w-7xl mx-auto flex items-center justify-between"},mt={class:"text-surface-600 dark:text-surface-400"},pt={class:"flex items-center gap-2"},ft={key:2,class:"flex items-center justify-center py-20"},vt={key:3,class:"flex flex-col items-center justify-center py-20 text-center"},gt={key:4,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4"},yt=["onClick"],ht={class:"aspect-square bg-surface-100 dark:bg-surface-800 rounded-lg overflow-hidden"},bt=["src","alt"],xt={key:1,class:"w-full h-full flex items-center justify-center"},wt={class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center gap-2"},_t={class:"mt-2"},kt=["title"],Ct={class:"text-xs text-surface-500"},It={class:"flex items-center gap-3"},Ft={class:"w-12 h-12 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center flex-shrink-0"},Ut=["src","alt"],Vt={class:"min-w-0"},St=["title"],zt={class:"text-xs text-surface-500"},$t={class:"flex items-center gap-1"},Pt={key:6,class:"flex items-center justify-between mt-6"},Dt={class:"text-sm text-surface-600 dark:text-surface-400"},Et={class:"mt-4"},At={class:"space-y-4"},Mt={key:0,class:"space-y-4"},jt={class:"flex justify-center"},Lt={class:"w-32 h-32 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center"},Bt=["src","alt"],Tt={class:"flex items-center gap-2"},Rt={key:0,class:"space-y-4"},Nt={class:"flex justify-center bg-surface-100 dark:bg-surface-800 rounded-lg p-4"},Ot=["src","alt"],qt=["src"],Wt=["src"],Kt={key:3,class:"text-center"},Gt={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Ht={class:"text-sm text-surface-600 dark:text-surface-400"},Xt={key:0,class:"flex flex-wrap gap-2 mt-3"},Zt={class:"flex items-center justify-between w-full"},Jt={class:"flex items-center gap-2"},Qt={class:"flex items-center gap-2"},Yt={__name:"Index",setup(l){const e=Je(),o=We(),s=Ke(),d=_(!1),f=_(!1),C=_(!1),D=_(!1),v=_(null),u=_(null),E=_(""),L=_(""),G=_(!1),H=_(!1),F=_([]),B=_({collection:"",folder:"",aiAnalyze:!0}),T=_([]),te=_(!1),le=[{label:"All Types",value:""},{label:"Images",value:"image"},{label:"Videos",value:"video"},{label:"Audio",value:"audio"},{label:"Documents",value:"document"},{label:"Files",value:"file"}],X=[{label:"All Collections",value:""},{label:"Product Images",value:"products"},{label:"Message Attachments",value:"messages"},{label:"General Attachments",value:"attachments"},{label:"Profile Photos",value:"avatars"},{label:"Company Logos",value:"logos"},{label:"Documents",value:"documents"},{label:"Broadcast Media",value:"broadcasts"}],Z=k(()=>e.items),R=k(()=>e.loading),I=k(()=>e.pagination),z=k(()=>e.storageUsage),A=k({get:()=>e.currentView,set:r=>e.setView(r)}),g=k({get:()=>e.filters,set:r=>e.filters=r}),ve=k(()=>Object.values(g.value).some(r=>r!==""&&r!==null)),ge=k(()=>{const r=[];if(g.value.type){const t=le.find(c=>c.value===g.value.type);r.push({key:"type",label:(t==null?void 0:t.label)||g.value.type})}if(g.value.collection){const t=X.find(c=>c.value===g.value.collection);r.push({key:"collection",label:(t==null?void 0:t.label)||g.value.collection})}return g.value.folder&&r.push({key:"folder",label:`Folder: ${g.value.folder}`}),g.value.search&&r.push({key:"search",label:`Search: ${g.value.search}`}),r}),ye=k(()=>["",...e.folders||[]]),ae=k(()=>e.hasItems),he=k(()=>F.value.length>0),N=k(()=>F.value.length),be=k(()=>{if(!z.value)return 0;const r=5*1024*1024*1024;return Math.min(100,Math.round(z.value.total_size/r*100))}),xe=k(()=>u.value?[{key:"Type",value:u.value.media_type},{key:"MIME Type",value:u.value.mime_type},{key:"Size",value:u.value.human_size},{key:"Dimensions",value:u.value.width&&u.value.height?`${u.value.width} Ã— ${u.value.height}`:"-"},{key:"Uploaded",value:ne(u.value.created_at)},{key:"Collection",value:u.value.collection||"-"},{key:"Usage Count",value:u.value.usage_count||0}]:[]),se=r=>F.value.includes(r),we=r=>{const t=F.value.indexOf(r);t>-1?F.value.splice(t,1):F.value.push(r)},ie=()=>{F.value=[]},M=()=>{e.filters={...g.value},e.fetchItems()},_e=r=>{g.value[r]=r==="attached"?null:"",M()},ke=()=>{e.clearFilters(),g.value={...e.filters}},J=r=>{u.value=r,D.value=!0},Q=r=>{v.value={...r},C.value=!0},Ce=async()=>{H.value=!0;try{await e.updateItem(v.value.id,{file_name:v.value.file_name,alt:v.value.alt,title:v.value.title,description:v.value.description}),C.value=!1,s.add({severity:"success",summary:"Success",detail:"Media updated successfully",life:3e3})}catch(r){s.add({severity:"error",summary:"Error",detail:r.message,life:3e3})}finally{H.value=!1}},oe=r=>{o.require({message:`Are you sure you want to delete "${r.file_name}"?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>Ie(r.id)})},Ie=async r=>{try{await e.deleteItem(r),s.add({severity:"success",summary:"Success",detail:"Media deleted",life:3e3})}catch(t){s.add({severity:"error",summary:"Error",detail:t.message,life:3e3})}},Fe=()=>{o.require({message:`Are you sure you want to delete ${N.value} item${N.value!==1?"s":""}?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:Ue})},Ue=async()=>{try{const r=await e.bulkDelete(F.value);ie(),s.add({severity:"success",summary:"Success",detail:`${r} item(s) deleted`,life:3e3})}catch(r){s.add({severity:"error",summary:"Error",detail:r.message,life:3e3})}},Ve=async r=>{if(!T.value.length){s.add({severity:"warn",summary:"Warning",detail:"Please select files to upload",life:3e3});return}te.value=!0;try{const t=T.value.map(c=>c.file||c);await e.bulkUpload(t,{collection:B.value.collection||void 0,aiAnalyze:B.value.aiAnalyze}),d.value=!1,T.value=[],await e.fetchItems(),await e.fetchStorageUsage(),s.add({severity:"success",summary:"Success",detail:"Files uploaded successfully",life:3e3})}catch(t){s.add({severity:"error",summary:"Error",detail:t.message,life:3e3})}finally{te.value=!1}},Se=r=>{T.value=r.files},ze=async()=>{G.value=!0;try{await e.importFromUrl(E.value,{fileName:L.value||void 0,aiAnalyze:!0}),f.value=!1,E.value="",L.value="",await e.fetchItems(),s.add({severity:"success",summary:"Success",detail:"Media imported successfully",life:3e3})}catch(r){s.add({severity:"error",summary:"Error",detail:r.message,life:3e3})}finally{G.value=!1}},$e=async()=>{try{await e.analyzeItem(u.value.id),s.add({severity:"success",summary:"Success",detail:"AI analysis started",life:3e3})}catch(r){s.add({severity:"error",summary:"Error",detail:r.message,life:3e3})}},re=async r=>{if(r)try{await navigator.clipboard.writeText(r),s.add({severity:"success",summary:"Copied",detail:"URL copied to clipboard",life:2e3})}catch{const c=document.createElement("input");c.value=r,document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c),s.add({severity:"success",summary:"Copied",detail:"URL copied to clipboard",life:2e3})}},Pe=r=>{e.goToPage(r.page+1)},ne=r=>r?new Date(r).toLocaleDateString():"-",O=r=>e.getFileIcon(r),De=r=>({image:"info",video:"warn",audio:"success",document:"secondary",file:"secondary"})[r]||"secondary";return Ge(async()=>{await Promise.all([e.fetchItems(),e.fetchStorageUsage(),e.fetchFolders()])}),(r,t)=>{var pe;const c=b("Button"),Ee=b("ProgressBar"),de=b("Card"),Ae=b("InputIcon"),S=b("InputText"),Me=b("IconField"),q=b("Dropdown"),ue=b("Chip"),je=b("ProgressSpinner"),Le=b("Checkbox"),V=b("Column"),Be=b("Tag"),ce=b("DataTable"),Te=b("Paginator"),Re=b("FileUpload"),W=b("Dialog"),Ne=b("Textarea"),Oe=b("ConfirmDialog"),me=He("tooltip");return m(),p("div",Qe,[i("div",Ye,[t[30]||(t[30]=i("div",null,[i("h1",{class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},"Media Library"),i("p",{class:"text-surface-600 dark:text-surface-400 mt-1"}," Manage all your images, videos, documents, and files ")],-1)),i("div",et,[n(c,{label:"Add New",icon:"pi pi-plus",onClick:t[0]||(t[0]=a=>d.value=!0),disabled:R.value},null,8,["disabled"]),n(c,{label:"Import from URL",icon:"pi pi-link",outlined:"",onClick:t[1]||(t[1]=a=>f.value=!0)})])]),z.value?(m(),P(de,{key:0,class:"mb-6"},{content:y(()=>[i("div",tt,[i("div",lt,[i("div",at,[t[31]||(t[31]=i("span",{class:"text-surface-600 dark:text-surface-400"},"Storage Used",-1)),i("span",st,x(z.value.human_size),1)]),n(Ee,{value:be.value,class:"h-2"},null,8,["value"]),i("div",it,[i("span",null,[t[32]||(t[32]=i("i",{class:"pi pi-image mr-1"},null,-1)),$(x(z.value.by_type.image||0)+" images",1)]),i("span",null,[t[33]||(t[33]=i("i",{class:"pi pi-video mr-1"},null,-1)),$(x(z.value.by_type.video||0)+" videos",1)]),i("span",null,[t[34]||(t[34]=i("i",{class:"pi pi-file mr-1"},null,-1)),$(x(z.value.by_type.document||0)+" documents",1)])])])])]),_:1})):U("",!0),n(de,{class:"mb-6"},{content:y(()=>[i("div",ot,[i("div",rt,[n(Me,{iconPosition:"left"},{default:y(()=>[n(Ae,{class:"pi pi-search"}),n(S,{modelValue:g.value.search,"onUpdate:modelValue":t[2]||(t[2]=a=>g.value.search=a),placeholder:"Search media...",class:"w-full",onKeyup:Xe(M,["enter"])},null,8,["modelValue"])]),_:1})]),n(q,{modelValue:g.value.type,"onUpdate:modelValue":t[3]||(t[3]=a=>g.value.type=a),options:le,optionLabel:"label",optionValue:"value",placeholder:"All Types",class:"w-full md:w-40",onChange:M},null,8,["modelValue"]),n(q,{modelValue:g.value.collection,"onUpdate:modelValue":t[4]||(t[4]=a=>g.value.collection=a),options:X,optionLabel:"label",optionValue:"value",placeholder:"All Collections",class:"w-full md:w-48",onChange:M},null,8,["modelValue"]),n(q,{modelValue:g.value.folder,"onUpdate:modelValue":t[5]||(t[5]=a=>g.value.folder=a),options:ye.value,placeholder:"All Folders",class:"w-full md:w-48",onChange:M,showClear:""},null,8,["modelValue","options"]),i("div",nt,[n(c,{icon:"pi pi-th-large",severity:A.value==="grid"?"primary":"secondary",text:"",size:"small",onClick:t[6]||(t[6]=a=>A.value="grid")},null,8,["severity"]),n(c,{icon:"pi pi-list",severity:A.value==="list"?"primary":"secondary",text:"",size:"small",onClick:t[7]||(t[7]=a=>A.value="list")},null,8,["severity"])])]),ve.value?(m(),p("div",dt,[(m(!0),p(Y,null,ee(ge.value,a=>(m(),P(ue,{key:a.key,label:a.label,removable:"",onRemove:w=>_e(a.key),class:"text-xs"},null,8,["label","onRemove"]))),128)),n(c,{label:"Clear All",link:"",size:"small",onClick:ke})])):U("",!0)]),_:1}),he.value?(m(),p("div",ut,[i("div",ct,[i("span",mt,x(N.value)+" item"+x(N.value!==1?"s":"")+" selected ",1),i("div",pt,[n(c,{label:"Delete",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:Fe}),n(c,{label:"Clear Selection",outlined:"",onClick:ie})])])])):U("",!0),R.value&&Z.value.length===0?(m(),p("div",ft,[n(je)])):!ae.value&&!R.value?(m(),p("div",vt,[t[35]||(t[35]=i("i",{class:"pi pi-folder-open text-6xl text-surface-300 dark:text-surface-600 mb-4"},null,-1)),t[36]||(t[36]=i("h3",{class:"text-xl font-semibold text-surface-900 dark:text-surface-0 mb-2"}," No media files yet ",-1)),t[37]||(t[37]=i("p",{class:"text-surface-600 dark:text-surface-400 mb-6 max-w-md"}," Upload images, videos, documents, and other files to manage them in one place. ",-1)),n(c,{label:"Upload Files",icon:"pi pi-upload",onClick:t[8]||(t[8]=a=>d.value=!0)})])):A.value==="grid"?(m(),p("div",gt,[(m(!0),p(Y,null,ee(Z.value,a=>(m(),p("div",{key:a.id,class:j(["media-item group relative",{"ring-2 ring-primary-500":se(a.id)}]),onClick:w=>J(a)},[i("div",{class:"absolute top-2 left-2 z-10",onClick:t[9]||(t[9]=K(()=>{},["stop"]))},[n(Le,{modelValue:se(a.id),onChange:w=>we(a.id)},null,8,["modelValue","onChange"])]),i("div",ht,[a.is_image?(m(),p("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover",loading:"lazy"},null,8,bt)):(m(),p("div",xt,[i("i",{class:j([O(a.mime_type),"text-4xl text-surface-400"])},null,2)]))]),i("div",wt,[n(c,{icon:"pi pi-eye",rounded:"",size:"small",onClick:K(w=>J(a),["stop"])},null,8,["onClick"]),n(c,{icon:"pi pi-pencil",rounded:"",severity:"secondary",size:"small",onClick:K(w=>Q(a),["stop"])},null,8,["onClick"]),n(c,{icon:"pi pi-trash",rounded:"",severity:"danger",size:"small",onClick:K(w=>oe(a),["stop"])},null,8,["onClick"])]),i("div",_t,[i("p",{class:"text-sm font-medium truncate",title:a.file_name},x(a.file_name),9,kt),i("p",Ct,x(a.human_size),1)])],10,yt))),128))])):(m(),P(ce,{key:5,value:Z.value,selection:F.value,onSelectionChange:t[10]||(t[10]=a=>F.value=a),dataKey:"id",loading:R.value,stripedRows:""},{default:y(()=>[n(V,{selectionMode:"multiple",headerStyle:"width: 3rem"}),n(V,{header:"File"},{body:y(({data:a})=>[i("div",It,[i("div",Ft,[a.is_image?(m(),p("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover rounded"},null,8,Ut)):(m(),p("i",{key:1,class:j([O(a.mime_type),"text-xl text-surface-400"])},null,2))]),i("div",Vt,[i("p",{class:"font-medium truncate",title:a.file_name},x(a.file_name),9,St),i("p",zt,x(a.mime_type),1)])])]),_:1}),n(V,{field:"media_type",header:"Type",class:"w-32"},{body:y(({data:a})=>[n(Be,{value:a.media_type,severity:De(a.media_type)},null,8,["value","severity"])]),_:1}),n(V,{field:"file_size",header:"Size",class:"w-24"},{body:y(({data:a})=>[$(x(a.human_size),1)]),_:1}),n(V,{field:"collection",header:"Collection",class:"w-32"},{body:y(({data:a})=>[$(x(a.collection||"-"),1)]),_:1}),n(V,{field:"created_at",header:"Uploaded",class:"w-40"},{body:y(({data:a})=>[$(x(ne(a.created_at)),1)]),_:1}),n(V,{header:"Actions",class:"w-32"},{body:y(({data:a})=>[i("div",$t,[n(c,{icon:"pi pi-eye",text:"",size:"small",onClick:w=>J(a)},null,8,["onClick"]),n(c,{icon:"pi pi-pencil",text:"",size:"small",onClick:w=>Q(a)},null,8,["onClick"]),n(c,{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:w=>oe(a)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","selection","loading"])),ae.value&&I.value.total>I.value.perPage?(m(),p("div",Pt,[i("span",Dt," Showing "+x((I.value.page-1)*I.value.perPage+1)+" to "+x(Math.min(I.value.page*I.value.perPage,I.value.total))+" of "+x(I.value.total)+" items ",1),n(Te,{rows:I.value.perPage,totalRecords:I.value.total,first:(I.value.page-1)*I.value.perPage,onPage:Pe},null,8,["rows","totalRecords","first"])])):U("",!0),n(W,{visible:d.value,"onUpdate:visible":t[12]||(t[12]=a=>d.value=a),header:"Upload Files",style:{width:"600px"},modal:!0},{default:y(()=>[n(Re,{multiple:!0,auto:!1,customUpload:!0,onSelect:Se,onUploader:Ve,chooseLabel:"Choose Files",uploadLabel:"Upload",cancelLabel:"Cancel",maxFileSize:52428800,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx"},{empty:y(()=>[...t[38]||(t[38]=[i("div",{class:"flex flex-col items-center justify-center py-8"},[i("i",{class:"pi pi-cloud-upload text-4xl text-surface-400 mb-3"}),i("p",{class:"text-surface-600 dark:text-surface-400"}," Drag and drop files here or click to browse ")],-1)])]),_:1}),i("div",Et,[t[39]||(t[39]=i("label",{class:"block text-sm font-medium mb-2"},"Collection (optional)",-1)),n(q,{modelValue:B.value.collection,"onUpdate:modelValue":t[11]||(t[11]=a=>B.value.collection=a),options:X,optionLabel:"label",optionValue:"value",placeholder:"Select collection",class:"w-full"},null,8,["modelValue"])])]),_:1},8,["visible"]),n(W,{visible:f.value,"onUpdate:visible":t[16]||(t[16]=a=>f.value=a),header:"Import from URL",style:{width:"500px"},modal:!0},{footer:y(()=>[n(c,{label:"Cancel",outlined:"",onClick:t[15]||(t[15]=a=>f.value=!1)}),n(c,{label:"Import",onClick:ze,loading:G.value,disabled:!E.value},null,8,["loading","disabled"])]),default:y(()=>[i("div",At,[i("div",null,[t[40]||(t[40]=i("label",{class:"block text-sm font-medium mb-2"},"URL",-1)),n(S,{modelValue:E.value,"onUpdate:modelValue":t[13]||(t[13]=a=>E.value=a),placeholder:"https://example.com/image.jpg",class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[41]||(t[41]=i("label",{class:"block text-sm font-medium mb-2"},"File Name (optional)",-1)),n(S,{modelValue:L.value,"onUpdate:modelValue":t[14]||(t[14]=a=>L.value=a),placeholder:"Custom file name",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]),n(W,{visible:C.value,"onUpdate:visible":t[24]||(t[24]=a=>C.value=a),header:"Edit Media",style:{width:"500px"},modal:!0},{footer:y(()=>[n(c,{label:"Cancel",outlined:"",onClick:t[23]||(t[23]=a=>C.value=!1)}),n(c,{label:"Save",onClick:Ce,loading:H.value},null,8,["loading"])]),default:y(()=>[v.value?(m(),p("div",Mt,[i("div",jt,[i("div",Lt,[v.value.is_image?(m(),p("img",{key:0,src:v.value.thumbnail_url||v.value.url,alt:v.value.alt||v.value.file_name,class:"max-w-full max-h-full object-contain"},null,8,Bt)):(m(),p("i",{key:1,class:j([O(v.value.mime_type),"text-4xl text-surface-400"])},null,2))])]),i("div",null,[t[42]||(t[42]=i("label",{class:"block text-sm font-medium mb-2"},"File Name",-1)),n(S,{modelValue:v.value.file_name,"onUpdate:modelValue":t[17]||(t[17]=a=>v.value.file_name=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[43]||(t[43]=i("label",{class:"block text-sm font-medium mb-2"},"Alt Text",-1)),n(S,{modelValue:v.value.alt,"onUpdate:modelValue":t[18]||(t[18]=a=>v.value.alt=a),class:"w-full",placeholder:"Description for accessibility"},null,8,["modelValue"])]),i("div",null,[t[44]||(t[44]=i("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),n(S,{modelValue:v.value.title,"onUpdate:modelValue":t[19]||(t[19]=a=>v.value.title=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[45]||(t[45]=i("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),n(Ne,{modelValue:v.value.description,"onUpdate:modelValue":t[20]||(t[20]=a=>v.value.description=a),class:"w-full",rows:"3"},null,8,["modelValue"])]),i("div",null,[t[46]||(t[46]=i("label",{class:"block text-sm font-medium mb-2"},"File URL",-1)),i("div",Tt,[n(S,{value:v.value.url,readonly:"",class:"w-full text-sm bg-surface-50 dark:bg-surface-900",onFocus:t[21]||(t[21]=a=>a.target.select())},null,8,["value"]),fe(n(c,{icon:"pi pi-copy",outlined:"",onClick:t[22]||(t[22]=a=>{var w;return re((w=v.value)==null?void 0:w.url)})},null,512),[[me,"Copy URL"]])])])])):U("",!0)]),_:1},8,["visible"]),n(W,{visible:D.value,"onUpdate:visible":t[29]||(t[29]=a=>D.value=a),header:(pe=u.value)==null?void 0:pe.file_name,style:{width:"80vw"},modal:!0,maximizable:""},{footer:y(()=>[i("div",Zt,[i("div",Jt,[u.value?(m(),P(S,{key:0,value:u.value.url,readonly:"",class:"w-64 text-sm",onFocus:t[25]||(t[25]=a=>a.target.select())},null,8,["value"])):U("",!0),fe(n(c,{icon:"pi pi-copy",outlined:"",onClick:t[26]||(t[26]=a=>{var w;return re((w=u.value)==null?void 0:w.url)})},null,512),[[me,"Copy URL"]])]),i("div",Qt,[n(c,{label:"Close",outlined:"",onClick:t[27]||(t[27]=a=>D.value=!1)}),u.value&&!u.value.ai_analysis?(m(),P(c,{key:0,label:"Analyze with AI",icon:"pi pi-sparkles",outlined:"",onClick:$e})):U("",!0),n(c,{label:"Edit",icon:"pi pi-pencil",onClick:t[28]||(t[28]=a=>{Q(u.value),D.value=!1})})])])]),default:y(()=>{var a;return[u.value?(m(),p("div",Rt,[i("div",Nt,[u.value.is_image?(m(),p("img",{key:0,src:u.value.url,alt:u.value.alt||u.value.file_name,class:"max-w-full max-h-[60vh] object-contain"},null,8,Ot)):u.value.is_video?(m(),p("video",{key:1,src:u.value.url,controls:"",class:"max-w-full max-h-[60vh]"},null,8,qt)):u.value.is_audio?(m(),p("audio",{key:2,src:u.value.url,controls:""},null,8,Wt)):(m(),p("div",Kt,[i("i",{class:j([O(u.value.mime_type),"text-6xl text-surface-400 mb-4"])},null,2),i("p",null,x(u.value.file_name),1)]))]),u.value.ai_analysis?(m(),p("div",Gt,[t[47]||(t[47]=i("h4",{class:"font-medium mb-2"},[i("i",{class:"pi pi-sparkles mr-2"}),$("AI Analysis")],-1)),i("p",Ht,x(u.value.ai_analysis),1),(a=u.value.ai_tags)!=null&&a.length?(m(),p("div",Xt,[(m(!0),p(Y,null,ee(u.value.ai_tags,w=>(m(),P(ue,{key:w,label:w,size:"small"},null,8,["label"]))),128))])):U("",!0)])):U("",!0),n(ce,{value:xe.value,class:"text-sm"},{default:y(()=>[n(V,{field:"key",header:"Property",class:"w-40"}),n(V,{field:"value",header:"Value"})]),_:1},8,["value"])])):U("",!0)]}),_:1},8,["visible","header"]),n(Oe)])}}},ll=Ze(Yt,[["__scopeId","data-v-bb86c2ea"]]);export{ll as default};
