import{d as qe,H as b,a9 as We,q as Ke,r as _,c as k,o as Ge,b as m,e as i,B as A,h as V,g as o,x,w as h,t as w,F as ae,k as se,X as He,m as p,l as E,a5 as Xe,n as B,y as S,Z as z}from"./app-BPtEyV-V.js";import{_ as Ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Je=qe("media",{state:()=>({items:[],selectedItems:[],loading:!1,error:null,pagination:{page:1,perPage:24,total:0,lastPage:1},filters:{type:"",collection:"",folder:"",search:"",attached:null},folders:[],storageUsage:null,currentView:"grid",sortBy:"created_at",sortOrder:"desc"}),getters:{hasItems:l=>l.items.length>0,hasSelectedItems:l=>l.selectedItems.length>0,selectedCount:l=>l.selectedItems.length,images:l=>l.items.filter(e=>e.media_type==="image"),videos:l=>l.items.filter(e=>e.media_type==="video"),audio:l=>l.items.filter(e=>e.media_type==="audio"),documents:l=>l.items.filter(e=>e.media_type==="document"),files:l=>l.items.filter(e=>e.media_type==="file"),isSelected:l=>e=>l.selectedItems.includes(e),allSelected:l=>l.items.length>0&&l.selectedItems.length===l.items.length,activeFilters:l=>{const e=[];return l.filters.type&&e.push(`Type: ${l.filters.type}`),l.filters.collection&&e.push(`Collection: ${l.filters.collection}`),l.filters.folder&&e.push(`Folder: ${l.filters.folder}`),l.filters.search&&e.push(`Search: ${l.filters.search}`),e}},actions:{async fetchItems(l=null){var e,r;this.loading=!0,this.error=null;try{const s={page:l||this.pagination.page,per_page:this.pagination.perPage,sort_by:this.sortBy,sort_order:this.sortOrder};this.filters.type&&(s.type=this.filters.type),this.filters.collection&&(s.collection=this.filters.collection),this.filters.folder!==""&&(s.folder=this.filters.folder),this.filters.search&&(s.search=this.filters.search),this.filters.attached!==null&&(s.attached=this.filters.attached);const d=await b.get("/media",{params:s});this.items=d.data.data,this.pagination={page:d.data.current_page,perPage:d.data.per_page,total:d.data.total,lastPage:d.data.last_page}}catch(s){this.error=((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to load media",console.error("Failed to fetch media:",s)}finally{this.loading=!1}},async upload(l,e={}){var s,d;const r=new FormData;r.append("file",l),e.collection&&r.append("collection",e.collection),e.folder&&r.append("folder",e.folder),e.alt&&r.append("alt",e.alt),e.title&&r.append("title",e.title),e.description&&r.append("description",e.description),e.caption&&r.append("caption",e.caption),r.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await b.post("/media",r,{headers:{"Content-Type":"multipart/form-data"}})).data.media}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload file")}},async bulkUpload(l,e={}){var s,d;const r=new FormData;l.forEach(f=>{r.append("files[]",f)}),e.collection&&r.append("collection",e.collection),e.folder&&r.append("folder",e.folder),r.append("ai_analyze",e.aiAnalyze!==!1?"1":"0");try{return(await b.post("/media/bulk-upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e.onProgress})).data}catch(f){throw new Error(((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.message)||"Failed to upload files")}},async importFromUrl(l,e={}){var r,s;try{return(await b.post("/media/import-from-url",{url:l,file_name:e.fileName,collection:e.collection,folder:e.folder,ai_analyze:e.aiAnalyze!==!1})).data.media}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to import from URL")}},async getItem(l){var e,r;try{return(await b.get(`/media/${l}`)).data.media}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to get media")}},async updateItem(l,e){var r,s;try{const d=await b.put(`/media/${l}`,e),f=this.items.findIndex(C=>C.id===l);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to update media")}},async deleteItem(l){var e,r;try{return await b.delete(`/media/${l}`),this.items=this.items.filter(s=>s.id!==l),this.selectedItems=this.selectedItems.filter(s=>s!==l),!0}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete media")}},async bulkDelete(l){var e,r;try{const s=await b.post("/media/bulk-delete",{ids:l});return this.items=this.items.filter(d=>!l.includes(d.id)),this.selectedItems=this.selectedItems.filter(d=>!l.includes(d)),s.data.deleted}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to delete media")}},async copyItem(l,e){var r,s;try{return(await b.post(`/media/${l}/copy`,{file_name:e})).data.media}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to copy media")}},async moveToFolder(l,e){var r,s;try{const d=await b.post(`/media/${l}/move`,{folder:e}),f=this.items.findIndex(C=>C.id===l);return f!==-1&&(this.items[f]=d.data.media),d.data.media}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to move media")}},async attachToModel(l,e,r,s=0){var d,f;try{return(await b.post(`/media/${l}/attach`,{mediable_type:e,mediable_id:r,order:s})).data.media}catch(C){throw new Error(((f=(d=C.response)==null?void 0:d.data)==null?void 0:f.message)||"Failed to attach media")}},async detachFromModel(l){var e,r;try{return(await b.post(`/media/${l}/detach`)).data.media}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to detach media")}},async getForModel(l,e){var r,s;try{return(await b.get("/media/for-model",{params:{mediable_type:l,mediable_id:e}})).data}catch(d){throw new Error(((s=(r=d.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to get media")}},async reorder(l){var e,r;try{await b.post("/media/reorder",{media:l})}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to reorder media")}},async analyzeItem(l){var e,r;try{await b.post(`/media/${l}/analyze`);const s=await this.getItem(l),d=this.items.findIndex(f=>f.id===l);return d!==-1&&(this.items[d]=s),s}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to analyze media")}},async fetchStorageUsage(){try{const l=await b.get("/media/storage-usage");return this.storageUsage=l.data,l.data}catch(l){return console.error("Failed to fetch storage usage:",l),null}},async fetchFolders(){try{const l=await b.get("/media/folders");return this.folders=l.data.folders,l.data.folders}catch(l){return console.error("Failed to fetch folders:",l),[]}},async fetchByCollection(l){var e,r;try{const s={per_page:this.pagination.perPage};return this.filters.type&&(s.type=this.filters.type),(await b.get(`/media/collection/${l}`,{params:s})).data}catch(s){throw new Error(((r=(e=s.response)==null?void 0:e.data)==null?void 0:r.message)||"Failed to fetch media")}},setFilter(l,e){this.filters[l]=e,this.pagination.page=1},clearFilters(){this.filters={type:"",collection:"",folder:"",search:"",attached:null},this.pagination.page=1},setSorting(l,e="desc"){this.sortBy=l,this.sortOrder=e},setView(l){this.currentView=l},toggleSelect(l){this.selectedItems.includes(l)?this.selectedItems=this.selectedItems.filter(e=>e!==l):this.selectedItems.push(l)},toggleSelectAll(){this.allSelected?this.selectedItems=[]:this.selectedItems=this.items.map(l=>l.id)},clearSelection(){this.selectedItems=[]},selectMultiple(l){l.forEach(e=>{this.selectedItems.includes(e)||this.selectedItems.push(e)})},nextPage(){this.pagination.page<this.pagination.lastPage&&(this.pagination.page++,this.fetchItems())},prevPage(){this.pagination.page>1&&(this.pagination.page--,this.fetchItems())},goToPage(l){this.pagination.page=l,this.fetchItems()},setPerPage(l){this.pagination.perPage=l,this.pagination.page=1,this.fetchItems()},getFileIcon(l){return l.startsWith("image/")?"pi pi-image":l.startsWith("video/")?"pi pi-video":l.startsWith("audio/")?"pi pi-volume-up":l.includes("pdf")?"pi pi-file-pdf":l.includes("word")||l.includes("document")?"pi pi-file-word":l.includes("excel")||l.includes("sheet")?"pi pi-file-excel":l.includes("powerpoint")||l.includes("presentation")?"pi pi-file":l.includes("zip")||l.includes("rar")||l.includes("compressed")?"pi pi-file-zip":"pi pi-file"},getMediaTypeColor(l){const e={image:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300",video:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300",audio:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300",document:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300",file:"bg-gray-100 text-gray-700 dark:bg-gray-900 dark:text-gray-300"};return e[l]||e.file}}}),Qe={class:"media-library"},Ye={class:"flex items-center justify-between mb-6"},et={class:"flex items-center gap-3"},tt={class:"flex items-center justify-between"},lt={class:"flex-1"},at={class:"flex items-center justify-between text-sm mb-2"},st={class:"font-medium"},it={class:"flex items-center gap-4 mt-3 text-xs text-surface-500"},ot={class:"flex flex-col md:flex-row gap-4"},rt={class:"flex-1"},nt={class:"flex items-center gap-1 border rounded-lg p-1"},dt={key:0,class:"flex items-center gap-2 mt-4 flex-wrap"},ut={key:1,class:"fixed bottom-0 left-0 right-0 bg-surface-0 dark:bg-surface-900 border-t border-surface-200 dark:border-surface-700 p-4 shadow-lg z-10"},ct={class:"max-w-7xl mx-auto flex items-center justify-between"},pt={class:"text-surface-600 dark:text-surface-400"},mt={class:"flex items-center gap-2"},ft={key:2,class:"flex items-center justify-center py-20"},vt={key:3,class:"flex flex-col items-center justify-center py-20 text-center"},gt={key:4,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-4"},yt={class:"absolute top-2 right-2 z-10"},ht=["onClick"],bt=["src","alt"],xt={key:1,class:"w-full h-full flex items-center justify-center"},wt={class:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 hidden md:flex items-end justify-center pb-4 gap-2"},_t={class:"p-3"},kt=["title"],Ct={class:"text-xs text-surface-500 mt-1"},It={class:"flex items-center justify-between mt-3 md:hidden"},Ft={class:"flex items-center gap-3"},Ut={class:"w-12 h-12 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center flex-shrink-0"},Vt=["src","alt"],zt={class:"min-w-0"},$t=["title"],St={class:"text-xs text-surface-500"},Pt={class:"flex items-center gap-1"},Dt={key:6,class:"flex items-center justify-between mt-6"},Et={class:"text-sm text-surface-600 dark:text-surface-400"},At={class:"mt-4"},Mt={class:"space-y-4"},jt={key:0,class:"space-y-4"},Lt={class:"flex justify-center"},Rt={class:"w-32 h-32 bg-surface-100 dark:bg-surface-800 rounded flex items-center justify-center"},Bt=["src","alt"],Tt={class:"flex items-center gap-2"},Nt={key:0,class:"space-y-4"},Ot={class:"flex justify-center bg-surface-100 dark:bg-surface-800 rounded-lg p-4"},qt=["src","alt"],Wt=["src"],Kt=["src"],Gt={key:3,class:"text-center"},Ht={key:0,class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Xt={class:"text-sm text-surface-600 dark:text-surface-400"},Zt={key:0,class:"flex flex-wrap gap-2 mt-3"},Jt={class:"flex items-center justify-between w-full"},Qt={class:"flex items-center gap-2"},Yt={class:"flex items-center gap-2"},el={__name:"Index",setup(l){const e=Je(),r=We(),s=Ke(),d=_(!1),f=_(!1),C=_(!1),M=_(!1),v=_(null),c=_(null),j=_(""),T=_(""),Q=_(!1),Y=_(!1),F=_([]),N=_({collection:"",folder:"",aiAnalyze:!0}),O=_([]),ie=_(!1),oe=[{label:"All Types",value:""},{label:"Images",value:"image"},{label:"Videos",value:"video"},{label:"Audio",value:"audio"},{label:"Documents",value:"document"},{label:"Files",value:"file"}],ee=[{label:"All Collections",value:""},{label:"Product Images",value:"products"},{label:"Message Attachments",value:"messages"},{label:"General Attachments",value:"attachments"},{label:"Profile Photos",value:"avatars"},{label:"Company Logos",value:"logos"},{label:"Documents",value:"documents"},{label:"Broadcast Media",value:"broadcasts"}],te=k(()=>e.items),q=k(()=>e.loading),I=k(()=>e.pagination),D=k(()=>e.storageUsage),L=k({get:()=>e.currentView,set:n=>e.setView(n)}),g=k({get:()=>e.filters,set:n=>e.filters=n}),ye=k(()=>Object.values(g.value).some(n=>n!==""&&n!==null)),he=k(()=>{const n=[];if(g.value.type){const t=oe.find(u=>u.value===g.value.type);n.push({key:"type",label:(t==null?void 0:t.label)||g.value.type})}if(g.value.collection){const t=ee.find(u=>u.value===g.value.collection);n.push({key:"collection",label:(t==null?void 0:t.label)||g.value.collection})}return g.value.folder&&n.push({key:"folder",label:`Folder: ${g.value.folder}`}),g.value.search&&n.push({key:"search",label:`Search: ${g.value.search}`}),n}),be=k(()=>["",...e.folders||[]]),re=k(()=>e.hasItems),xe=k(()=>F.value.length>0),W=k(()=>F.value.length),we=k(()=>{if(!D.value)return 0;const n=5*1024*1024*1024;return Math.min(100,Math.round(D.value.total_size/n*100))}),_e=k(()=>c.value?[{key:"Type",value:c.value.media_type},{key:"MIME Type",value:c.value.mime_type},{key:"Size",value:c.value.human_size},{key:"Dimensions",value:c.value.width&&c.value.height?`${c.value.width} Ã— ${c.value.height}`:"-"},{key:"Uploaded",value:ue(c.value.created_at)},{key:"Collection",value:c.value.collection||"-"},{key:"Usage Count",value:c.value.usage_count||0}]:[]),ne=n=>F.value.includes(n),ke=n=>{const t=F.value.indexOf(n);t>-1?F.value.splice(t,1):F.value.push(n)},de=()=>{F.value=[]},R=()=>{e.filters={...g.value},e.fetchItems()},Ce=n=>{g.value[n]=n==="attached"?null:"",R()},Ie=()=>{e.clearFilters(),g.value={...e.filters}},K=n=>{c.value=n,M.value=!0},G=n=>{v.value={...n},C.value=!0},Fe=async()=>{Y.value=!0;try{await e.updateItem(v.value.id,{file_name:v.value.file_name,alt:v.value.alt,title:v.value.title,description:v.value.description}),C.value=!1,s.add({severity:"success",summary:"Success",detail:"Media updated successfully",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{Y.value=!1}},le=n=>{r.require({message:`Are you sure you want to delete "${n.file_name}"?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>Ue(n.id)})},Ue=async n=>{try{await e.deleteItem(n),s.add({severity:"success",summary:"Success",detail:"Media deleted",life:3e3})}catch(t){s.add({severity:"error",summary:"Error",detail:t.message,life:3e3})}},Ve=()=>{r.require({message:`Are you sure you want to delete ${W.value} item${W.value!==1?"s":""}?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:ze})},ze=async()=>{try{const n=await e.bulkDelete(F.value);de(),s.add({severity:"success",summary:"Success",detail:`${n} item(s) deleted`,life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}},$e=async n=>{if(!O.value.length){s.add({severity:"warn",summary:"Warning",detail:"Please select files to upload",life:3e3});return}ie.value=!0;try{const t=O.value.map(u=>u.file||u);await e.bulkUpload(t,{collection:N.value.collection||void 0,aiAnalyze:N.value.aiAnalyze}),d.value=!1,O.value=[],await e.fetchItems(),await e.fetchStorageUsage(),s.add({severity:"success",summary:"Success",detail:"Files uploaded successfully",life:3e3})}catch(t){s.add({severity:"error",summary:"Error",detail:t.message,life:3e3})}finally{ie.value=!1}},Se=n=>{O.value=n.files},Pe=async()=>{Q.value=!0;try{await e.importFromUrl(j.value,{fileName:T.value||void 0,aiAnalyze:!0}),f.value=!1,j.value="",T.value="",await e.fetchItems(),s.add({severity:"success",summary:"Success",detail:"Media imported successfully",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{Q.value=!1}},De=async()=>{try{await e.analyzeItem(c.value.id),s.add({severity:"success",summary:"Success",detail:"AI analysis started",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}},H=async n=>{if(n)try{await navigator.clipboard.writeText(n),s.add({severity:"success",summary:"Copied",detail:"URL copied to clipboard",life:2e3})}catch{const u=document.createElement("input");u.value=n,document.body.appendChild(u),u.select(),document.execCommand("copy"),document.body.removeChild(u),s.add({severity:"success",summary:"Copied",detail:"URL copied to clipboard",life:2e3})}},Ee=n=>{e.goToPage(n.page+1)},ue=n=>n?new Date(n).toLocaleDateString():"-",X=n=>e.getFileIcon(n),ce=n=>({image:"info",video:"warn",audio:"success",document:"secondary",file:"secondary"})[n]||"secondary";return Ge(async()=>{await Promise.all([e.fetchItems(),e.fetchStorageUsage(),e.fetchFolders()])}),(n,t)=>{var ge;const u=x("Button"),Ae=x("ProgressBar"),pe=x("Card"),Me=x("InputIcon"),P=x("InputText"),je=x("IconField"),Z=x("Dropdown"),me=x("Chip"),Le=x("ProgressSpinner"),Re=x("Checkbox"),fe=x("Tag"),$=x("Column"),ve=x("DataTable"),Be=x("Paginator"),Te=x("FileUpload"),J=x("Dialog"),Ne=x("Textarea"),Oe=x("ConfirmDialog"),U=He("tooltip");return p(),m("div",Qe,[i("div",Ye,[t[30]||(t[30]=i("div",null,[i("h1",{class:"text-2xl font-bold text-surface-900 dark:text-surface-0"},"Media Library"),i("p",{class:"text-surface-600 dark:text-surface-400 mt-1"}," Manage all your images, videos, documents, and files ")],-1)),i("div",et,[o(u,{label:"Add New",icon:"pi pi-plus",onClick:t[0]||(t[0]=a=>d.value=!0),disabled:q.value},null,8,["disabled"]),o(u,{label:"Import from URL",icon:"pi pi-link",outlined:"",onClick:t[1]||(t[1]=a=>f.value=!0)})])]),D.value?(p(),A(pe,{key:0,class:"mb-6"},{content:h(()=>[i("div",tt,[i("div",lt,[i("div",at,[t[31]||(t[31]=i("span",{class:"text-surface-600 dark:text-surface-400"},"Storage Used",-1)),i("span",st,w(D.value.human_size),1)]),o(Ae,{value:we.value,class:"h-2"},null,8,["value"]),i("div",it,[i("span",null,[t[32]||(t[32]=i("i",{class:"pi pi-image mr-1"},null,-1)),E(w(D.value.by_type.image||0)+" images",1)]),i("span",null,[t[33]||(t[33]=i("i",{class:"pi pi-video mr-1"},null,-1)),E(w(D.value.by_type.video||0)+" videos",1)]),i("span",null,[t[34]||(t[34]=i("i",{class:"pi pi-file mr-1"},null,-1)),E(w(D.value.by_type.document||0)+" documents",1)])])])])]),_:1})):V("",!0),o(pe,{class:"mb-6"},{content:h(()=>[i("div",ot,[i("div",rt,[o(je,{iconPosition:"left"},{default:h(()=>[o(Me,{class:"pi pi-search"}),o(P,{modelValue:g.value.search,"onUpdate:modelValue":t[2]||(t[2]=a=>g.value.search=a),placeholder:"Search media...",class:"w-full",onKeyup:Xe(R,["enter"])},null,8,["modelValue"])]),_:1})]),o(Z,{modelValue:g.value.type,"onUpdate:modelValue":t[3]||(t[3]=a=>g.value.type=a),options:oe,optionLabel:"label",optionValue:"value",placeholder:"All Types",class:"w-full md:w-40",onChange:R},null,8,["modelValue"]),o(Z,{modelValue:g.value.collection,"onUpdate:modelValue":t[4]||(t[4]=a=>g.value.collection=a),options:ee,optionLabel:"label",optionValue:"value",placeholder:"All Collections",class:"w-full md:w-48",onChange:R},null,8,["modelValue"]),o(Z,{modelValue:g.value.folder,"onUpdate:modelValue":t[5]||(t[5]=a=>g.value.folder=a),options:be.value,placeholder:"All Folders",class:"w-full md:w-48",onChange:R,showClear:""},null,8,["modelValue","options"]),i("div",nt,[o(u,{icon:"pi pi-th-large",severity:L.value==="grid"?"primary":"secondary",text:"",size:"small",onClick:t[6]||(t[6]=a=>L.value="grid")},null,8,["severity"]),o(u,{icon:"pi pi-list",severity:L.value==="list"?"primary":"secondary",text:"",size:"small",onClick:t[7]||(t[7]=a=>L.value="list")},null,8,["severity"])])]),ye.value?(p(),m("div",dt,[(p(!0),m(ae,null,se(he.value,a=>(p(),A(me,{key:a.key,label:a.label,removable:"",onRemove:y=>Ce(a.key),class:"text-xs"},null,8,["label","onRemove"]))),128)),o(u,{label:"Clear All",link:"",size:"small",onClick:Ie})])):V("",!0)]),_:1}),xe.value?(p(),m("div",ut,[i("div",ct,[i("span",pt,w(W.value)+" item"+w(W.value!==1?"s":"")+" selected ",1),i("div",mt,[o(u,{label:"Delete",icon:"pi pi-trash",severity:"danger",outlined:"",onClick:Ve}),o(u,{label:"Clear Selection",outlined:"",onClick:de})])])])):V("",!0),q.value&&te.value.length===0?(p(),m("div",ft,[o(Le)])):!re.value&&!q.value?(p(),m("div",vt,[t[35]||(t[35]=i("i",{class:"pi pi-folder-open text-6xl text-surface-300 dark:text-surface-600 mb-4"},null,-1)),t[36]||(t[36]=i("h3",{class:"text-xl font-semibold text-surface-900 dark:text-surface-0 mb-2"}," No media files yet ",-1)),t[37]||(t[37]=i("p",{class:"text-surface-600 dark:text-surface-400 mb-6 max-w-md"}," Upload images, videos, documents, and other files to manage them in one place. ",-1)),o(u,{label:"Upload Files",icon:"pi pi-upload",onClick:t[8]||(t[8]=a=>d.value=!0)})])):L.value==="grid"?(p(),m("div",gt,[(p(!0),m(ae,null,se(te.value,a=>(p(),m("div",{key:a.id,class:B(["media-card group relative bg-white dark:bg-surface-800 rounded-xl border border-surface-200 dark:border-surface-700 shadow-sm hover:shadow-lg transition-all duration-200",{"ring-2 ring-primary-500 border-primary-500":ne(a.id)}])},[i("div",{class:"absolute top-2 left-2 z-10",onClick:t[9]||(t[9]=S(()=>{},["stop"]))},[o(Re,{modelValue:ne(a.id),onChange:y=>ke(a.id),class:"bg-white/90 dark:bg-surface-900/90 rounded"},null,8,["modelValue","onChange"])]),i("div",yt,[o(fe,{value:a.media_type,severity:ce(a.media_type),size:"small"},null,8,["value","severity"])]),i("div",{class:"aspect-square bg-surface-100 dark:bg-surface-900 rounded-t-xl overflow-hidden cursor-pointer relative",onClick:y=>K(a)},[a.is_image?(p(),m("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover",loading:"lazy"},null,8,bt)):(p(),m("div",xt,[i("i",{class:B([X(a.mime_type),"text-4xl text-surface-400"])},null,2)])),i("div",wt,[z(o(u,{icon:"pi pi-eye",rounded:"",size:"small",class:"bg-white/90 hover:bg-white text-surface-900",onClick:S(y=>K(a),["stop"])},null,8,["onClick"]),[[U,"Preview",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-pencil",rounded:"",size:"small",class:"bg-white/90 hover:bg-white text-surface-900",onClick:S(y=>G(a),["stop"])},null,8,["onClick"]),[[U,"Edit",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-copy",rounded:"",size:"small",class:"bg-white/90 hover:bg-white text-surface-900",onClick:S(y=>H(a.url),["stop"])},null,8,["onClick"]),[[U,"Copy URL",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-trash",rounded:"",size:"small",class:"bg-red-500/90 hover:bg-red-500 text-white",onClick:S(y=>le(a),["stop"])},null,8,["onClick"]),[[U,"Delete",void 0,{top:!0}]])])],8,ht),i("div",_t,[i("p",{class:"text-sm font-medium truncate text-surface-900 dark:text-surface-0",title:a.file_name},w(a.file_name),9,kt),i("p",Ct,w(a.human_size),1),i("div",It,[z(o(u,{icon:"pi pi-eye",text:"",size:"small",onClick:S(y=>K(a),["stop"])},null,8,["onClick"]),[[U,"Preview",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-pencil",text:"",size:"small",onClick:S(y=>G(a),["stop"])},null,8,["onClick"]),[[U,"Edit",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-copy",text:"",size:"small",onClick:S(y=>H(a.url),["stop"])},null,8,["onClick"]),[[U,"Copy URL",void 0,{top:!0}]]),z(o(u,{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:S(y=>le(a),["stop"])},null,8,["onClick"]),[[U,"Delete",void 0,{top:!0}]])])])],2))),128))])):(p(),A(ve,{key:5,value:te.value,selection:F.value,onSelectionChange:t[10]||(t[10]=a=>F.value=a),dataKey:"id",loading:q.value,stripedRows:""},{default:h(()=>[o($,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o($,{header:"File"},{body:h(({data:a})=>[i("div",Ft,[i("div",Ut,[a.is_image?(p(),m("img",{key:0,src:a.thumbnail_url||a.url,alt:a.alt||a.file_name,class:"w-full h-full object-cover rounded"},null,8,Vt)):(p(),m("i",{key:1,class:B([X(a.mime_type),"text-xl text-surface-400"])},null,2))]),i("div",zt,[i("p",{class:"font-medium truncate",title:a.file_name},w(a.file_name),9,$t),i("p",St,w(a.mime_type),1)])])]),_:1}),o($,{field:"media_type",header:"Type",class:"w-32"},{body:h(({data:a})=>[o(fe,{value:a.media_type,severity:ce(a.media_type)},null,8,["value","severity"])]),_:1}),o($,{field:"file_size",header:"Size",class:"w-24"},{body:h(({data:a})=>[E(w(a.human_size),1)]),_:1}),o($,{field:"collection",header:"Collection",class:"w-32"},{body:h(({data:a})=>[E(w(a.collection||"-"),1)]),_:1}),o($,{field:"created_at",header:"Uploaded",class:"w-40"},{body:h(({data:a})=>[E(w(ue(a.created_at)),1)]),_:1}),o($,{header:"Actions",class:"w-32"},{body:h(({data:a})=>[i("div",Pt,[o(u,{icon:"pi pi-eye",text:"",size:"small",onClick:y=>K(a)},null,8,["onClick"]),o(u,{icon:"pi pi-pencil",text:"",size:"small",onClick:y=>G(a)},null,8,["onClick"]),o(u,{icon:"pi pi-trash",text:"",size:"small",severity:"danger",onClick:y=>le(a)},null,8,["onClick"])])]),_:1})]),_:1},8,["value","selection","loading"])),re.value&&I.value.total>I.value.perPage?(p(),m("div",Dt,[i("span",Et," Showing "+w((I.value.page-1)*I.value.perPage+1)+" to "+w(Math.min(I.value.page*I.value.perPage,I.value.total))+" of "+w(I.value.total)+" items ",1),o(Be,{rows:I.value.perPage,totalRecords:I.value.total,first:(I.value.page-1)*I.value.perPage,onPage:Ee},null,8,["rows","totalRecords","first"])])):V("",!0),o(J,{visible:d.value,"onUpdate:visible":t[12]||(t[12]=a=>d.value=a),header:"Upload Files",style:{width:"600px"},modal:!0},{default:h(()=>[o(Te,{multiple:!0,auto:!1,customUpload:!0,onSelect:Se,onUploader:$e,chooseLabel:"Choose Files",uploadLabel:"Upload",cancelLabel:"Cancel",maxFileSize:52428800,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.xls,.xlsx"},{empty:h(()=>[...t[38]||(t[38]=[i("div",{class:"flex flex-col items-center justify-center py-8"},[i("i",{class:"pi pi-cloud-upload text-4xl text-surface-400 mb-3"}),i("p",{class:"text-surface-600 dark:text-surface-400"}," Drag and drop files here or click to browse ")],-1)])]),_:1}),i("div",At,[t[39]||(t[39]=i("label",{class:"block text-sm font-medium mb-2"},"Collection (optional)",-1)),o(Z,{modelValue:N.value.collection,"onUpdate:modelValue":t[11]||(t[11]=a=>N.value.collection=a),options:ee,optionLabel:"label",optionValue:"value",placeholder:"Select collection",class:"w-full"},null,8,["modelValue"])])]),_:1},8,["visible"]),o(J,{visible:f.value,"onUpdate:visible":t[16]||(t[16]=a=>f.value=a),header:"Import from URL",style:{width:"500px"},modal:!0},{footer:h(()=>[o(u,{label:"Cancel",outlined:"",onClick:t[15]||(t[15]=a=>f.value=!1)}),o(u,{label:"Import",onClick:Pe,loading:Q.value,disabled:!j.value},null,8,["loading","disabled"])]),default:h(()=>[i("div",Mt,[i("div",null,[t[40]||(t[40]=i("label",{class:"block text-sm font-medium mb-2"},"URL",-1)),o(P,{modelValue:j.value,"onUpdate:modelValue":t[13]||(t[13]=a=>j.value=a),placeholder:"https://example.com/image.jpg",class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[41]||(t[41]=i("label",{class:"block text-sm font-medium mb-2"},"File Name (optional)",-1)),o(P,{modelValue:T.value,"onUpdate:modelValue":t[14]||(t[14]=a=>T.value=a),placeholder:"Custom file name",class:"w-full"},null,8,["modelValue"])])])]),_:1},8,["visible"]),o(J,{visible:C.value,"onUpdate:visible":t[24]||(t[24]=a=>C.value=a),header:"Edit Media",style:{width:"500px"},modal:!0},{footer:h(()=>[o(u,{label:"Cancel",outlined:"",onClick:t[23]||(t[23]=a=>C.value=!1)}),o(u,{label:"Save",onClick:Fe,loading:Y.value},null,8,["loading"])]),default:h(()=>[v.value?(p(),m("div",jt,[i("div",Lt,[i("div",Rt,[v.value.is_image?(p(),m("img",{key:0,src:v.value.thumbnail_url||v.value.url,alt:v.value.alt||v.value.file_name,class:"max-w-full max-h-full object-contain"},null,8,Bt)):(p(),m("i",{key:1,class:B([X(v.value.mime_type),"text-4xl text-surface-400"])},null,2))])]),i("div",null,[t[42]||(t[42]=i("label",{class:"block text-sm font-medium mb-2"},"File Name",-1)),o(P,{modelValue:v.value.file_name,"onUpdate:modelValue":t[17]||(t[17]=a=>v.value.file_name=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[43]||(t[43]=i("label",{class:"block text-sm font-medium mb-2"},"Alt Text",-1)),o(P,{modelValue:v.value.alt,"onUpdate:modelValue":t[18]||(t[18]=a=>v.value.alt=a),class:"w-full",placeholder:"Description for accessibility"},null,8,["modelValue"])]),i("div",null,[t[44]||(t[44]=i("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),o(P,{modelValue:v.value.title,"onUpdate:modelValue":t[19]||(t[19]=a=>v.value.title=a),class:"w-full"},null,8,["modelValue"])]),i("div",null,[t[45]||(t[45]=i("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),o(Ne,{modelValue:v.value.description,"onUpdate:modelValue":t[20]||(t[20]=a=>v.value.description=a),class:"w-full",rows:"3"},null,8,["modelValue"])]),i("div",null,[t[46]||(t[46]=i("label",{class:"block text-sm font-medium mb-2"},"File URL",-1)),i("div",Tt,[o(P,{value:v.value.url,readonly:"",class:"w-full text-sm bg-surface-50 dark:bg-surface-900",onFocus:t[21]||(t[21]=a=>a.target.select())},null,8,["value"]),z(o(u,{icon:"pi pi-copy",outlined:"",onClick:t[22]||(t[22]=a=>{var y;return H((y=v.value)==null?void 0:y.url)})},null,512),[[U,"Copy URL"]])])])])):V("",!0)]),_:1},8,["visible"]),o(J,{visible:M.value,"onUpdate:visible":t[29]||(t[29]=a=>M.value=a),header:(ge=c.value)==null?void 0:ge.file_name,style:{width:"80vw"},modal:!0,maximizable:""},{footer:h(()=>[i("div",Jt,[i("div",Qt,[c.value?(p(),A(P,{key:0,value:c.value.url,readonly:"",class:"w-64 text-sm",onFocus:t[25]||(t[25]=a=>a.target.select())},null,8,["value"])):V("",!0),z(o(u,{icon:"pi pi-copy",outlined:"",onClick:t[26]||(t[26]=a=>{var y;return H((y=c.value)==null?void 0:y.url)})},null,512),[[U,"Copy URL"]])]),i("div",Yt,[o(u,{label:"Close",outlined:"",onClick:t[27]||(t[27]=a=>M.value=!1)}),c.value&&!c.value.ai_analysis?(p(),A(u,{key:0,label:"Analyze with AI",icon:"pi pi-sparkles",outlined:"",onClick:De})):V("",!0),o(u,{label:"Edit",icon:"pi pi-pencil",onClick:t[28]||(t[28]=a=>{G(c.value),M.value=!1})})])])]),default:h(()=>{var a;return[c.value?(p(),m("div",Nt,[i("div",Ot,[c.value.is_image?(p(),m("img",{key:0,src:c.value.url,alt:c.value.alt||c.value.file_name,class:"max-w-full max-h-[60vh] object-contain"},null,8,qt)):c.value.is_video?(p(),m("video",{key:1,src:c.value.url,controls:"",class:"max-w-full max-h-[60vh]"},null,8,Wt)):c.value.is_audio?(p(),m("audio",{key:2,src:c.value.url,controls:""},null,8,Kt)):(p(),m("div",Gt,[i("i",{class:B([X(c.value.mime_type),"text-6xl text-surface-400 mb-4"])},null,2),i("p",null,w(c.value.file_name),1)]))]),c.value.ai_analysis?(p(),m("div",Ht,[t[47]||(t[47]=i("h4",{class:"font-medium mb-2"},[i("i",{class:"pi pi-sparkles mr-2"}),E("AI Analysis")],-1)),i("p",Xt,w(c.value.ai_analysis),1),(a=c.value.ai_tags)!=null&&a.length?(p(),m("div",Zt,[(p(!0),m(ae,null,se(c.value.ai_tags,y=>(p(),A(me,{key:y,label:y,size:"small"},null,8,["label"]))),128))])):V("",!0)])):V("",!0),o(ve,{value:_e.value,class:"text-sm"},{default:h(()=>[o($,{field:"key",header:"Property",class:"w-40"}),o($,{field:"value",header:"Value"})]),_:1},8,["value"])])):V("",!0)]}),_:1},8,["visible","header"]),o(Oe)])}}},al=Ze(el,[["__scopeId","data-v-cf6959c1"]]);export{al as default};
