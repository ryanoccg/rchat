import{d as Ue,H as g,a9 as $e,q as Ie,r as v,c as I,o as De,b as _,e as a,g as l,t as b,w as p,i as r,X as Ae,m as k,h as R,a5 as Ee,j as f,B as Ne,Z as N}from"./app-COZ50StM.js";import{s as se,a as w,b as X}from"./index-BotssOam.js";import{s as V}from"./index-CXogGqNS.js";import{s as re}from"./index-Brg-r7B6.js";import{s as T}from"./index-B0AQL8E4.js";import{s as O}from"./index-D8SOZXLq.js";import{s as M}from"./index-lWUrvOYP.js";import{s as Z}from"./index-D6-_aDNt.js";import{s as je}from"./index-m6s4Dd5q.js";import{s as ze}from"./index-CRT3YAgc.js";import{s as le}from"./index-C9afCttp.js";import{s as oe}from"./index-BEBcy9CH.js";import{s as Le}from"./index-faQNcuJe.js";import"./index-C0zA7P76.js";import"./index-CbPeJRyp.js";import"./index-DZelkFbS.js";import"./index-Cld1B_lA.js";import"./index-wZFL_vjB.js";import"./index-3Ec2l7fE.js";const Be=Ue("products",{state:()=>({products:[],categories:[],categoryTree:[],currentProduct:null,stats:{total:0,active:0,out_of_stock:0,featured:0,categories:0},pagination:{current_page:1,last_page:1,per_page:20,total:0},filters:{search:"",category_id:null,is_active:null,stock_status:null,is_featured:null},loading:!1,error:null}),actions:{async fetchProducts(d=1){var o,i;this.loading=!0,this.error=null;try{const s={page:d,per_page:this.pagination.per_page,...this.filters};Object.keys(s).forEach(h=>{(s[h]===null||s[h]==="")&&delete s[h]});const c=await g.get("/products",{params:s});this.products=c.data.data||[];const m=c.data.meta||c.data;this.pagination={current_page:m.current_page||1,last_page:m.last_page||1,per_page:m.per_page||20,total:m.total||0}}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to fetch products",s}finally{this.loading=!1}},async fetchStats(){try{const d=await g.get("/products/stats");this.stats=d.data}catch(d){console.error("Failed to fetch product stats:",d)}},async fetchCategories(){try{const d=await g.get("/product-categories");this.categories=d.data.categories||[]}catch(d){console.error("Failed to fetch categories:",d),this.categories=[]}},async fetchCategoryTree(){try{const d=await g.get("/product-categories/tree");this.categoryTree=d.data.categories}catch(d){console.error("Failed to fetch category tree:",d)}},async createProduct(d){var o,i;this.loading=!0;try{const s=await g.post("/products",d),c=s.data.product;return c&&(this.products=[c,...this.products]),await Promise.all([this.fetchProducts(1),this.fetchStats()]),s.data}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to create product",s}finally{this.loading=!1}},async updateProduct(d,o){var i,s;this.loading=!0;try{const c=await g.put(`/products/${d}`,o);return await this.fetchProducts(this.pagination.current_page),c.data}catch(c){throw this.error=((s=(i=c.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to update product",c}finally{this.loading=!1}},async deleteProduct(d){var o,i;this.loading=!0;try{await g.delete(`/products/${d}`),await this.fetchProducts(this.pagination.current_page),await this.fetchStats()}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete product",s}finally{this.loading=!1}},async bulkDeleteProducts(d){var o,i;this.loading=!0;try{await g.post("/products/bulk-delete",{ids:d}),await this.fetchProducts(this.pagination.current_page),await this.fetchStats()}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete products",s}finally{this.loading=!1}},async toggleProductStatus(d){var o,i;try{const s=await g.post(`/products/${d}/toggle`),c=this.products.findIndex(m=>m.id===d);return c!==-1&&(this.products[c]=s.data.product),await this.fetchStats(),s.data}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to toggle status",s}},async toggleProductFeatured(d){var o,i;try{const s=await g.post(`/products/${d}/toggle-featured`),c=this.products.findIndex(m=>m.id===d);return c!==-1&&(this.products[c]=s.data.product),await this.fetchStats(),s.data}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to toggle featured",s}},async createCategory(d){var o,i;try{const s=await g.post("/product-categories",d),c=s.data.category;return c&&(this.categories=[...this.categories,c]),this.stats&&(this.stats.total_categories=(this.stats.total_categories||0)+1),s.data}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to create category",s}},async updateCategory(d,o){var i,s;try{const c=await g.put(`/product-categories/${d}`,o),m=c.data.category;if(m){const h=this.categories.findIndex(P=>P.id===d);h!==-1&&(this.categories[h]=m)}return c.data}catch(c){throw this.error=((s=(i=c.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to update category",c}},async deleteCategory(d){var o,i;try{await g.delete(`/product-categories/${d}`),this.categories=this.categories.filter(s=>s.id!==d),this.stats&&(this.stats.total_categories=Math.max(0,(this.stats.total_categories||0)-1))}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete category",s}},async searchProducts(d,o={}){try{return(await g.get("/products/search",{params:{query:d,...o}})).data}catch(i){throw console.error("Failed to search products:",i),i}},async importProducts(d){var i,s;const o=new FormData;o.append("file",d);try{const c=await g.post("/products/import",o,{headers:{"Content-Type":"multipart/form-data"}});return await this.fetchProducts(),await this.fetchStats(),c.data}catch(c){throw this.error=((s=(i=c.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to import products",c}},async exportProducts(){var d,o;try{return(await g.get("/products/export")).data}catch(i){throw this.error=((o=(d=i.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to export products",i}},async uploadImage(d,o=!0){var s,c;const i=new FormData;i.append("image",d),i.append("generate_description",o?"1":"0");try{return(await g.post("/products/upload-image",i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(m){throw this.error=((c=(s=m.response)==null?void 0:s.data)==null?void 0:c.message)||"Failed to upload image",m}},async deleteImage(d){var o,i;try{return(await g.post("/products/delete-image",{path:d})).data}catch(s){throw this.error=((i=(o=s.response)==null?void 0:o.data)==null?void 0:i.message)||"Failed to delete image",s}},async regenerateAllEmbeddings(){var d,o;try{return(await g.post("/products/regenerate-embeddings")).data}catch(i){throw this.error=((o=(d=i.response)==null?void 0:d.data)==null?void 0:o.message)||"Failed to regenerate embeddings",i}},setFilters(d){this.filters={...this.filters,...d}},resetFilters(){this.filters={search:"",category_id:null,is_active:null,stock_status:null,is_featured:null}}}});var Re={name:"InputSwitch",extends:je,mounted:function(){console.warn("Deprecated since v4. Use ToggleSwitch component instead.")}};const Te={class:"space-y-6"},qe={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Ke={class:"bg-surface-0 dark:bg-surface-800 rounded-xl p-4 border border-surface-200 dark:border-surface-700"},Oe={class:"flex items-center gap-3"},Me={class:"text-2xl font-bold text-surface-900 dark:text-surface-100"},Qe={class:"bg-surface-0 dark:bg-surface-800 rounded-xl p-4 border border-surface-200 dark:border-surface-700"},Ye={class:"flex items-center gap-3"},He={class:"text-2xl font-bold text-surface-900 dark:text-surface-100"},Je={class:"bg-surface-0 dark:bg-surface-800 rounded-xl p-4 border border-surface-200 dark:border-surface-700"},Xe={class:"flex items-center gap-3"},Ze={class:"text-2xl font-bold text-surface-900 dark:text-surface-100"},Ge={class:"bg-surface-0 dark:bg-surface-800 rounded-xl p-4 border border-surface-200 dark:border-surface-700"},We={class:"flex items-center gap-3"},et={class:"text-2xl font-bold text-surface-900 dark:text-surface-100"},tt={class:"bg-surface-0 dark:bg-surface-800 rounded-xl p-4 border border-surface-200 dark:border-surface-700"},at={class:"flex items-center gap-3"},st={class:"text-2xl font-bold text-surface-900 dark:text-surface-100"},rt={class:"bg-surface-0 dark:bg-surface-800 rounded-xl border border-surface-200 dark:border-surface-700"},lt={class:"flex flex-col md:flex-row gap-4 mb-4"},ot={class:"flex-1"},it={class:"flex gap-2 flex-wrap"},dt={class:"flex items-center gap-3"},nt=["src","alt"],ut={key:1,class:"w-12 h-12 rounded-lg bg-surface-200 dark:bg-surface-700 flex items-center justify-center"},ct={class:"font-medium text-surface-900 dark:text-surface-100"},pt={class:"text-sm text-surface-500"},mt={key:1,class:"text-surface-400"},vt={class:"font-medium text-surface-900 dark:text-surface-100"},gt={key:0,class:"text-sm text-surface-400 line-through"},ft={class:"flex gap-1"},yt={key:0,class:"mt-4 flex items-center gap-4"},bt={class:"text-surface-500"},ht={class:"flex justify-between mb-4"},xt={class:"flex-1"},wt={class:"flex items-center gap-2"},kt={class:"font-medium"},_t={key:0},Ct={key:1,class:"text-surface-400"},Vt={class:"flex gap-1"},Pt={class:"grid grid-cols-2 gap-4"},St={class:"col-span-2"},Ft={class:"flex gap-2"},Ut={class:"col-span-2"},$t={class:"flex gap-4"},It={key:0,class:"relative"},Dt=["src"],At={class:"flex-1 space-y-2"},Et={key:0,class:"flex items-center gap-2 text-sm text-surface-500"},Nt={class:"col-span-2"},jt={class:"col-span-2"},zt={class:"flex items-center gap-2"},Lt={class:"flex items-center gap-2"},Bt={class:"space-y-4"},Rt={class:"flex items-center gap-2"},Tt={class:"space-y-4"},qt={key:0,class:"flex items-center gap-2"},Kt={class:"space-y-4"},na={__name:"Index",setup(d){const o=Be(),i=$e(),s=Ie(),c=v(0),m=v(!1),h=v(!1),P=v(!1),j=v(!1),D=v(null),S=v(null),A=v(!1),Q=v(!1),F=v(null),U=v([]),q=v(""),K=v(!1),E=v(null),z=v(""),Y=v(!1),$=v({search:"",category_id:null,stock_status:null}),u=v({name:"",sku:"",category_id:null,price:null,sale_price:null,brand:"",stock_status:"in_stock",short_description:"",description:"",thumbnail_url:"",currency:"MYR",is_active:!0,is_featured:!1}),x=v({name:"",parent_id:null,description:"",is_active:!0}),G=[{label:"In Stock",value:"in_stock"},{label:"Out of Stock",value:"out_of_stock"},{label:"Backorder",value:"backorder"},{label:"Pre-order",value:"preorder"}],ie=I(()=>o.products),L=I(()=>o.categories),B=I(()=>o.stats),W=I(()=>o.loading),ee=I(()=>o.pagination),de=I(()=>[{id:null,name:"All Categories"},...L.value]),ne=I(()=>{if(!q.value)return L.value;const n=q.value.toLowerCase();return L.value.filter(e=>{var y;return e.name.toLowerCase().includes(n)||((y=e.description)==null?void 0:y.toLowerCase().includes(n))})});De(async()=>{await Promise.all([o.fetchProducts(),o.fetchCategories(),o.fetchStats()])});const H=()=>{o.setFilters($.value),o.fetchProducts(1)},ue=n=>{o.fetchProducts(n.page+1)},te=n=>parseFloat(n).toFixed(2),ce=n=>n.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),pe=n=>({in_stock:"success",out_of_stock:"danger",backorder:"warning",preorder:"info"})[n]||"secondary",ae=()=>{u.value={name:"",sku:"",category_id:null,price:null,sale_price:null,brand:"",stock_status:"in_stock",short_description:"",description:"",thumbnail_url:"",currency:"MYR",is_active:!0,is_featured:!1},D.value=null},me=()=>{ae(),E.value=null,m.value=!0},ve=n=>{D.value=n,u.value={...n},E.value=null,m.value=!0},ge=async n=>{const e=n.files[0];if(e){K.value=!0;try{const y=await o.uploadImage(e,!0);if(u.value.thumbnail_url=y.url,E.value=y.path,y.ai_analysis){const t=y.ai_analysis;if(t.title&&!u.value.name&&(u.value.name=t.title),t.description&&!u.value.short_description&&(u.value.short_description=t.description),t.keywords){const C=typeof t.keywords=="string"?t.keywords:t.keywords.join(", ");u.value.description||(u.value.description=`Keywords: ${C}`)}s.add({severity:"success",summary:"Image Analyzed",detail:"AI has generated product details from the image",life:3e3})}}catch(y){s.add({severity:"error",summary:"Upload Failed",detail:y.message,life:3e3})}finally{K.value=!1}}},fe=async()=>{if(E.value)try{await o.deleteImage(E.value)}catch(n){console.error("Failed to delete image:",n)}u.value.thumbnail_url="",E.value=null},ye=async()=>{if(!u.value.name||u.value.price===null||u.value.price===void 0){s.add({severity:"error",summary:"Error",detail:"Name and price are required",life:3e3});return}A.value=!0;try{D.value?(await o.updateProduct(D.value.id,u.value),s.add({severity:"success",summary:"Success",detail:"Product updated",life:3e3})):(await o.createProduct(u.value),s.add({severity:"success",summary:"Success",detail:"Product created",life:3e3})),m.value=!1,ae()}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{A.value=!1}},be=async n=>{try{await o.toggleProductStatus(n.id)}catch(e){s.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}},J=v(null),he=async n=>{n.is_featured=!n.is_featured,J.value=n.id;try{await o.toggleProductFeatured(n.id)}catch(e){n.is_featured=!n.is_featured,s.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}finally{J.value=null}},xe=n=>{i.require({message:`Are you sure you want to delete "${n.name}"?`,header:"Delete Product",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{await o.deleteProduct(n.id),s.add({severity:"success",summary:"Deleted",detail:"Product deleted",life:3e3})}catch(e){s.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}})},we=()=>{i.require({message:`Are you sure you want to delete ${U.value.length} products?`,header:"Delete Products",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{const n=U.value.map(e=>e.id);await o.bulkDeleteProducts(n),U.value=[],s.add({severity:"success",summary:"Deleted",detail:"Products deleted",life:3e3})}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}}})},ke=()=>{x.value={name:"",parent_id:null,description:"",is_active:!0},S.value=null},_e=n=>{S.value=n,x.value={...n},h.value=!0},Ce=async()=>{if(!x.value.name){s.add({severity:"error",summary:"Error",detail:"Name is required",life:3e3});return}A.value=!0;try{S.value?(await o.updateCategory(S.value.id,x.value),s.add({severity:"success",summary:"Success",detail:"Category updated",life:3e3})):(await o.createCategory(x.value),s.add({severity:"success",summary:"Success",detail:"Category created",life:3e3})),h.value=!1,ke()}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{A.value=!1}},Ve=n=>{i.require({message:`Are you sure you want to delete "${n.name}"?`,header:"Delete Category",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:async()=>{try{await o.deleteCategory(n.id),s.add({severity:"success",summary:"Deleted",detail:"Category deleted",life:3e3})}catch(e){s.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}}})},Pe=async()=>{var n;if(!z.value.trim()){s.add({severity:"error",summary:"Error",detail:"Category name is required",life:3e3});return}Y.value=!0;try{const e=await o.createCategory({name:z.value.trim(),is_active:!0});(n=e.category)!=null&&n.id&&(u.value.category_id=e.category.id),s.add({severity:"success",summary:"Success",detail:"Category created and selected",life:3e3}),j.value=!1,z.value=""}catch(e){s.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}finally{Y.value=!1}},Se=n=>{F.value=n.files[0]},Fe=async()=>{if(F.value){Q.value=!0;try{const n=await o.importProducts(F.value);s.add({severity:"success",summary:"Import Complete",detail:n.message,life:5e3}),P.value=!1,F.value=null}catch(n){s.add({severity:"error",summary:"Error",detail:n.message,life:3e3})}finally{Q.value=!1}}};return(n,e)=>{const y=Ae("tooltip");return k(),_("div",Te,[a("div",qe,[a("div",Ke,[a("div",Oe,[e[35]||(e[35]=a("div",{class:"w-10 h-10 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center"},[a("i",{class:"pi pi-box text-primary-500 text-lg"})],-1)),a("div",null,[a("p",Me,b(B.value.total),1),e[34]||(e[34]=a("p",{class:"text-sm text-surface-500"},"Total Products",-1))])])]),a("div",Qe,[a("div",Ye,[e[37]||(e[37]=a("div",{class:"w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/30 flex items-center justify-center"},[a("i",{class:"pi pi-check-circle text-green-500 text-lg"})],-1)),a("div",null,[a("p",He,b(B.value.active),1),e[36]||(e[36]=a("p",{class:"text-sm text-surface-500"},"Active",-1))])])]),a("div",Je,[a("div",Xe,[e[39]||(e[39]=a("div",{class:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},[a("i",{class:"pi pi-times-circle text-red-500 text-lg"})],-1)),a("div",null,[a("p",Ze,b(B.value.out_of_stock),1),e[38]||(e[38]=a("p",{class:"text-sm text-surface-500"},"Out of Stock",-1))])])]),a("div",Ge,[a("div",We,[e[41]||(e[41]=a("div",{class:"w-10 h-10 rounded-lg bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center"},[a("i",{class:"pi pi-star text-yellow-500 text-lg"})],-1)),a("div",null,[a("p",et,b(B.value.featured),1),e[40]||(e[40]=a("p",{class:"text-sm text-surface-500"},"Featured",-1))])])]),a("div",tt,[a("div",at,[e[43]||(e[43]=a("div",{class:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center"},[a("i",{class:"pi pi-tags text-purple-500 text-lg"})],-1)),a("div",null,[a("p",st,b(B.value.categories),1),e[42]||(e[42]=a("p",{class:"text-sm text-surface-500"},"Categories",-1))])])])]),a("div",rt,[l(r(ze),{activeIndex:c.value,"onUpdate:activeIndex":e[7]||(e[7]=t=>c.value=t)},{default:p(()=>[l(r(le),{header:"Products"},{default:p(()=>[a("div",lt,[a("div",ot,[l(r(V),{modelValue:$.value.search,"onUpdate:modelValue":e[0]||(e[0]=t=>$.value.search=t),placeholder:"Search products...",class:"w-full",onKeyup:Ee(H,["enter"])},null,8,["modelValue"])]),a("div",it,[l(r(T),{modelValue:$.value.category_id,"onUpdate:modelValue":e[1]||(e[1]=t=>$.value.category_id=t),options:de.value,optionLabel:"name",optionValue:"id",placeholder:"Category",class:"w-40",showClear:"",onChange:H},null,8,["modelValue","options"]),l(r(T),{modelValue:$.value.stock_status,"onUpdate:modelValue":e[2]||(e[2]=t=>$.value.stock_status=t),options:G,optionLabel:"label",optionValue:"value",placeholder:"Stock Status",class:"w-40",showClear:"",onChange:H},null,8,["modelValue"]),l(r(f),{icon:"pi pi-plus",label:"Add Product",onClick:me}),l(r(f),{icon:"pi pi-upload",label:"Import",severity:"secondary",onClick:e[3]||(e[3]=t=>P.value=!0)})])]),l(r(se),{value:ie.value,loading:W.value,selection:U.value,"onUpdate:selection":e[4]||(e[4]=t=>U.value=t),dataKey:"id",paginator:!0,rows:ee.value.per_page,totalRecords:ee.value.total,lazy:!0,onPage:ue,stripedRows:"",class:"p-datatable-sm"},{empty:p(()=>[...e[44]||(e[44]=[a("div",{class:"text-center py-8 text-surface-500"},[a("i",{class:"pi pi-box text-4xl mb-2"}),a("p",null,"No products found")],-1)])]),default:p(()=>[l(r(w),{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(r(w),{header:"Product",style:{"min-width":"250px"}},{body:p(({data:t})=>[a("div",dt,[t.thumbnail_url||t.images&&t.images[0]?(k(),_("img",{key:0,src:t.thumbnail_url||t.images[0],alt:t.name,class:"w-12 h-12 rounded-lg object-cover"},null,8,nt)):(k(),_("div",ut,[...e[45]||(e[45]=[a("i",{class:"pi pi-image text-surface-400"},null,-1)])])),a("div",null,[a("p",ct,b(t.name),1),a("p",pt,"SKU: "+b(t.sku||"N/A"),1)])])]),_:1}),l(r(w),{field:"category.name",header:"Category"},{body:p(({data:t})=>[t.category?(k(),Ne(r(O),{key:0,value:t.category.name,severity:"secondary"},null,8,["value"])):(k(),_("span",mt,"â€”"))]),_:1}),l(r(w),{header:"Price",style:{"min-width":"120px"}},{body:p(({data:t})=>[a("div",null,[a("p",vt,b(t.currency)+" "+b(te(t.sale_price||t.price)),1),t.sale_price?(k(),_("p",gt,b(t.currency)+" "+b(te(t.price)),1)):R("",!0)])]),_:1}),l(r(w),{field:"stock_status",header:"Stock"},{body:p(({data:t})=>[l(r(O),{value:ce(t.stock_status),severity:pe(t.stock_status)},null,8,["value","severity"])]),_:1}),l(r(w),{header:"Status",style:{width:"100px"}},{body:p(({data:t})=>[l(r(Re),{modelValue:t.is_active,"onUpdate:modelValue":C=>be(t)},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(r(w),{header:"Featured",style:{width:"100px"}},{body:p(({data:t})=>[N(l(r(f),{icon:t.is_featured?"pi pi-star-fill":"pi pi-star",severity:t.is_featured?"warning":"secondary",outlined:"",rounded:"",size:"small",loading:J.value===t.id,onClick:C=>he(t)},null,8,["icon","severity","loading","onClick"]),[[y,t.is_featured?"Remove Featured":"Mark Featured",void 0,{top:!0}]])]),_:1}),l(r(w),{header:"Actions",style:{width:"120px"}},{body:p(({data:t})=>[a("div",ft,[N(l(r(f),{icon:"pi pi-pencil",outlined:"",rounded:"",size:"small",severity:"secondary",onClick:C=>ve(t)},null,8,["onClick"]),[[y,"Edit",void 0,{top:!0}]]),N(l(r(f),{icon:"pi pi-trash",outlined:"",rounded:"",size:"small",severity:"danger",onClick:C=>xe(t)},null,8,["onClick"]),[[y,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","selection","rows","totalRecords"]),U.value.length>0?(k(),_("div",yt,[a("span",bt,b(U.value.length)+" selected",1),l(r(f),{label:"Delete Selected",icon:"pi pi-trash",severity:"danger",size:"small",onClick:we})])):R("",!0)]),_:1}),l(r(le),{header:"Categories"},{default:p(()=>[a("div",ht,[a("div",xt,[l(r(V),{modelValue:q.value,"onUpdate:modelValue":e[5]||(e[5]=t=>q.value=t),placeholder:"Search categories...",class:"w-full max-w-md"},null,8,["modelValue"])]),l(r(f),{icon:"pi pi-plus",label:"Add Category",onClick:e[6]||(e[6]=t=>h.value=!0)})]),l(r(se),{value:ne.value,loading:W.value,dataKey:"id",stripedRows:"",class:"p-datatable-sm"},{empty:p(()=>[...e[46]||(e[46]=[a("div",{class:"text-center py-8 text-surface-500"},[a("i",{class:"pi pi-tags text-4xl mb-2"}),a("p",null,"No categories found")],-1)])]),default:p(()=>[l(r(w),{field:"name",header:"Name",style:{"min-width":"200px"}},{body:p(({data:t})=>[a("div",wt,[e[47]||(e[47]=a("i",{class:"pi pi-folder text-primary-500"},null,-1)),a("span",kt,b(t.name),1)])]),_:1}),l(r(w),{field:"parent.name",header:"Parent"},{body:p(({data:t})=>[t.parent?(k(),_("span",_t,b(t.parent.name),1)):(k(),_("span",Ct,"Root"))]),_:1}),l(r(w),{field:"products_count",header:"Products"},{body:p(({data:t})=>[l(r(O),{value:t.products_count||0,severity:"secondary"},null,8,["value"])]),_:1}),l(r(w),{header:"Status",style:{width:"100px"}},{body:p(({data:t})=>[l(r(O),{value:t.is_active?"Active":"Inactive",severity:t.is_active?"success":"danger"},null,8,["value","severity"])]),_:1}),l(r(w),{header:"Actions",style:{width:"120px"}},{body:p(({data:t})=>[a("div",Vt,[N(l(r(f),{icon:"pi pi-pencil",outlined:"",rounded:"",size:"small",severity:"secondary",onClick:C=>_e(t)},null,8,["onClick"]),[[y,"Edit",void 0,{top:!0}]]),N(l(r(f),{icon:"pi pi-trash",outlined:"",rounded:"",size:"small",severity:"danger",onClick:C=>Ve(t)},null,8,["onClick"]),[[y,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])]),_:1})]),_:1},8,["activeIndex"])]),l(r(M),{visible:m.value,"onUpdate:visible":e[22]||(e[22]=t=>m.value=t),header:D.value?"Edit Product":"Add Product",modal:!0,style:{width:"700px"},class:"p-fluid"},{footer:p(()=>[l(r(f),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[21]||(e[21]=t=>m.value=!1)}),l(r(f),{label:D.value?"Update":"Create",loading:A.value,onClick:ye},null,8,["label","loading"])]),default:p(()=>[a("div",Pt,[a("div",St,[e[48]||(e[48]=a("label",{class:"block text-sm font-medium mb-2"},"Name *",-1)),l(r(V),{modelValue:u.value.name,"onUpdate:modelValue":e[8]||(e[8]=t=>u.value.name=t),placeholder:"Product name"},null,8,["modelValue"])]),a("div",null,[e[49]||(e[49]=a("label",{class:"block text-sm font-medium mb-2"},"SKU",-1)),l(r(V),{modelValue:u.value.sku,"onUpdate:modelValue":e[9]||(e[9]=t=>u.value.sku=t),placeholder:"SKU-001"},null,8,["modelValue"])]),a("div",null,[e[50]||(e[50]=a("label",{class:"block text-sm font-medium mb-2"},"Category",-1)),a("div",Ft,[l(r(T),{modelValue:u.value.category_id,"onUpdate:modelValue":e[10]||(e[10]=t=>u.value.category_id=t),options:L.value,optionLabel:"name",optionValue:"id",placeholder:"Select category",showClear:"",class:"flex-1"},null,8,["modelValue","options"]),N(l(r(f),{icon:"pi pi-plus",severity:"secondary",onClick:e[11]||(e[11]=t=>j.value=!0)},null,512),[[y,"Create Category",void 0,{top:!0}]])])]),a("div",null,[e[51]||(e[51]=a("label",{class:"block text-sm font-medium mb-2"},"Price *",-1)),l(r(re),{modelValue:u.value.price,"onUpdate:modelValue":e[12]||(e[12]=t=>u.value.price=t),mode:"currency",currency:u.value.currency,placeholder:"Enter price"},null,8,["modelValue","currency"])]),a("div",null,[e[52]||(e[52]=a("label",{class:"block text-sm font-medium mb-2"},"Sale Price",-1)),l(r(re),{modelValue:u.value.sale_price,"onUpdate:modelValue":e[13]||(e[13]=t=>u.value.sale_price=t),mode:"currency",currency:u.value.currency,placeholder:"Enter sale price (optional)"},null,8,["modelValue","currency"])]),a("div",null,[e[53]||(e[53]=a("label",{class:"block text-sm font-medium mb-2"},"Brand",-1)),l(r(V),{modelValue:u.value.brand,"onUpdate:modelValue":e[14]||(e[14]=t=>u.value.brand=t),placeholder:"Brand name"},null,8,["modelValue"])]),a("div",null,[e[54]||(e[54]=a("label",{class:"block text-sm font-medium mb-2"},"Stock Status",-1)),l(r(T),{modelValue:u.value.stock_status,"onUpdate:modelValue":e[15]||(e[15]=t=>u.value.stock_status=t),options:G,optionLabel:"label",optionValue:"value"},null,8,["modelValue"])]),a("div",Ut,[e[56]||(e[56]=a("label",{class:"block text-sm font-medium mb-2"},"Product Image",-1)),e[57]||(e[57]=a("p",{class:"text-xs text-surface-500 mb-2"},"Uploading an image will automatically generate the short and full description using AI.",-1)),a("div",$t,[u.value.thumbnail_url?(k(),_("div",It,[a("img",{src:u.value.thumbnail_url,class:"w-24 h-24 object-cover rounded-lg border",alt:"Product image"},null,8,Dt),l(r(f),{icon:"pi pi-times",severity:"danger",text:"",rounded:"",class:"absolute -top-2 -right-2",onClick:fe})])):R("",!0),a("div",At,[l(r(oe),{mode:"basic",accept:"image/*",maxFileSize:1e7,onSelect:ge,disabled:K.value,chooseLabel:"Upload Image",class:"w-full"},null,8,["disabled"]),K.value?(k(),_("div",Et,[...e[55]||(e[55]=[a("i",{class:"pi pi-spin pi-spinner"},null,-1),a("span",null,"Uploading & analyzing with AI...",-1)])])):R("",!0),l(r(V),{modelValue:u.value.thumbnail_url,"onUpdate:modelValue":e[16]||(e[16]=t=>u.value.thumbnail_url=t),placeholder:"Or enter image URL",class:"w-full"},null,8,["modelValue"])])])]),a("div",Nt,[e[58]||(e[58]=a("label",{class:"block text-sm font-medium mb-2"},"Short Description",-1)),l(r(Z),{modelValue:u.value.short_description,"onUpdate:modelValue":e[17]||(e[17]=t=>u.value.short_description=t),rows:"2",placeholder:"Brief description..."},null,8,["modelValue"])]),a("div",jt,[e[59]||(e[59]=a("label",{class:"block text-sm font-medium mb-2"},"Full Description",-1)),l(r(Z),{modelValue:u.value.description,"onUpdate:modelValue":e[18]||(e[18]=t=>u.value.description=t),rows:"4",placeholder:"Detailed description..."},null,8,["modelValue"])]),a("div",null,[a("div",zt,[l(r(X),{modelValue:u.value.is_active,"onUpdate:modelValue":e[19]||(e[19]=t=>u.value.is_active=t),binary:!0,inputId:"is_active"},null,8,["modelValue"]),e[60]||(e[60]=a("label",{for:"is_active"},"Active",-1))])]),a("div",null,[a("div",Lt,[l(r(X),{modelValue:u.value.is_featured,"onUpdate:modelValue":e[20]||(e[20]=t=>u.value.is_featured=t),binary:!0,inputId:"is_featured"},null,8,["modelValue"]),e[61]||(e[61]=a("label",{for:"is_featured"},"Featured",-1))])])])]),_:1},8,["visible","header"]),l(r(M),{visible:h.value,"onUpdate:visible":e[28]||(e[28]=t=>h.value=t),header:S.value?"Edit Category":"Add Category",modal:!0,style:{width:"500px"},class:"p-fluid"},{footer:p(()=>[l(r(f),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[27]||(e[27]=t=>h.value=!1)}),l(r(f),{label:S.value?"Update":"Create",loading:A.value,onClick:Ce},null,8,["label","loading"])]),default:p(()=>[a("div",Bt,[a("div",null,[e[62]||(e[62]=a("label",{class:"block text-sm font-medium mb-2"},"Name *",-1)),l(r(V),{modelValue:x.value.name,"onUpdate:modelValue":e[23]||(e[23]=t=>x.value.name=t),placeholder:"Category name"},null,8,["modelValue"])]),a("div",null,[e[63]||(e[63]=a("label",{class:"block text-sm font-medium mb-2"},"Parent Category",-1)),l(r(T),{modelValue:x.value.parent_id,"onUpdate:modelValue":e[24]||(e[24]=t=>x.value.parent_id=t),options:L.value.filter(t=>{var C;return t.id!==((C=S.value)==null?void 0:C.id)}),optionLabel:"name",optionValue:"id",placeholder:"None (Root)",showClear:""},null,8,["modelValue","options"])]),a("div",null,[e[64]||(e[64]=a("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),l(r(Z),{modelValue:x.value.description,"onUpdate:modelValue":e[25]||(e[25]=t=>x.value.description=t),rows:"3",placeholder:"Category description..."},null,8,["modelValue"])]),a("div",null,[a("div",Rt,[l(r(X),{modelValue:x.value.is_active,"onUpdate:modelValue":e[26]||(e[26]=t=>x.value.is_active=t),binary:!0,inputId:"cat_is_active"},null,8,["modelValue"]),e[65]||(e[65]=a("label",{for:"cat_is_active"},"Active",-1))])])])]),_:1},8,["visible","header"]),l(r(M),{visible:P.value,"onUpdate:visible":e[30]||(e[30]=t=>P.value=t),header:"Import Products",modal:!0,style:{width:"500px"}},{footer:p(()=>[l(r(f),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[29]||(e[29]=t=>P.value=!1)}),l(r(f),{label:"Import",loading:Q.value,disabled:!F.value,onClick:Fe},null,8,["loading","disabled"])]),default:p(()=>[a("div",Tt,[e[67]||(e[67]=a("p",{class:"text-surface-500"},"Upload a CSV or JSON file with product data.",-1)),l(r(oe),{mode:"basic",accept:".csv,.json",maxFileSize:1e7,onSelect:Se,chooseLabel:"Choose File"}),F.value?(k(),_("div",qt,[e[66]||(e[66]=a("i",{class:"pi pi-file"},null,-1)),a("span",null,b(F.value.name),1)])):R("",!0)])]),_:1},8,["visible"]),l(r(Le)),l(r(M),{visible:j.value,"onUpdate:visible":e[33]||(e[33]=t=>j.value=t),header:"Quick Add Category",modal:!0,style:{width:"400px"},class:"p-fluid"},{footer:p(()=>[l(r(f),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[32]||(e[32]=t=>j.value=!1)}),l(r(f),{label:"Create & Select",loading:Y.value,onClick:Pe},null,8,["loading"])]),default:p(()=>[a("div",Kt,[a("div",null,[e[68]||(e[68]=a("label",{class:"block text-sm font-medium mb-2"},"Category Name *",-1)),l(r(V),{modelValue:z.value,"onUpdate:modelValue":e[31]||(e[31]=t=>z.value=t),placeholder:"Enter category name",autofocus:""},null,8,["modelValue"])])])]),_:1},8,["visible"])])}}};export{na as default};
