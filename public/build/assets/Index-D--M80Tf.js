import{D as Q,E as S,b as c,m as d,G as C,e as a,h as B,t as p,u as q,r as D,c as N,o as Z,l as A,i as h,g as m,j as P,F as X,k as Y,f as E,w as aa,x as ta,H as I,v as ea,n as V,B as sa,I as na}from"./app-BPtEyV-V.js";import{s as ia}from"./index-Dq7VDPJu.js";import{s as T}from"./index-B6L4_FjG.js";import{s as oa}from"./index-BIYalJJ9.js";import{_ as la}from"./_plugin-vue_export-helper-DlAUqK2U.js";var ra=`
    .p-knob-range {
        fill: none;
        transition: stroke 0.1s ease-in;
    }

    .p-knob-value {
        animation-name: p-knob-dash-frame;
        animation-fill-mode: forwards;
        fill: none;
    }

    .p-knob-text {
        font-size: 1.3rem;
        text-align: center;
    }

    .p-knob svg {
        border-radius: 50%;
        outline-color: transparent;
        transition:
            background dt('knob.transition.duration'),
            color dt('knob.transition.duration'),
            outline-color dt('knob.transition.duration'),
            box-shadow dt('knob.transition.duration');
    }

    .p-knob svg:focus-visible {
        box-shadow: dt('knob.focus.ring.shadow');
        outline: dt('knob.focus.ring.width') dt('knob.focus.ring.style') dt('knob.focus.ring.color');
        outline-offset: dt('knob.focus.ring.offset');
    }

    @keyframes p-knob-dash-frame {
        100% {
            stroke-dashoffset: 0;
        }
    }
`,da={root:function(s){var r=s.instance,l=s.props;return["p-knob p-component",{"p-disabled":l.disabled,"p-invalid":r.$invalid}]},range:"p-knob-range",value:"p-knob-value",text:"p-knob-text"},ca=Q.extend({name:"knob",style:ra,classes:da}),ua={name:"BaseKnob",extends:oa,props:{size:{type:Number,default:100},readonly:{type:Boolean,default:!1},step:{type:Number,default:1},min:{type:Number,default:0},max:{type:Number,default:100},valueColor:{type:String,default:function(){return S("knob.value.background").variable}},rangeColor:{type:String,default:function(){return S("knob.range.background").variable}},textColor:{type:String,default:function(){return S("knob.text.color").variable}},strokeWidth:{type:Number,default:14},showValue:{type:Boolean,default:!0},valueTemplate:{type:[String,Function],default:"{value}"},tabindex:{type:Number,default:0},ariaLabelledby:{type:String,default:null},ariaLabel:{type:String,default:null}},style:ca,provide:function(){return{$pcKnob:this,$parentInstance:this}}},f=3.14159265358979,U={name:"Knob",extends:ua,inheritAttrs:!1,emits:["change"],data:function(){return{radius:40,midX:50,midY:50,minRadians:4*f/3,maxRadians:-f/3}},methods:{updateValueByOffset:function(s,r){var l=s-this.size/2,u=this.size/2-r,n=Math.atan2(u,l),b=-f/2-f/6;this.updateModel(n,b)},updateModel:function(s,r){var l;if(s>this.maxRadians)l=this.mapRange(s,this.minRadians,this.maxRadians,this.min,this.max);else if(s<r)l=this.mapRange(s+2*f,this.minRadians,this.maxRadians,this.min,this.max);else return;var u=Math.round((l-this.min)/this.step)*this.step+this.min;this.writeValue(u),this.$emit("change",u)},updateModelValue:function(s){s>this.max?this.writeValue(this.max):s<this.min?this.writeValue(this.min):this.writeValue(s)},mapRange:function(s,r,l,u,n){return(s-r)*(n-u)/(l-r)+u},onClick:function(s){!this.disabled&&!this.readonly&&this.updateValueByOffset(s.offsetX,s.offsetY)},onBlur:function(s){var r,l;(r=(l=this.formField).onBlur)===null||r===void 0||r.call(l,s)},onMouseDown:function(s){!this.disabled&&!this.readonly&&(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),s.preventDefault())},onMouseUp:function(s){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),s.preventDefault())},onTouchStart:function(s){!this.disabled&&!this.readonly&&(window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),s.preventDefault())},onTouchEnd:function(s){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),s.preventDefault())},onMouseMove:function(s){!this.disabled&&!this.readonly&&(this.updateValueByOffset(s.offsetX,s.offsetY),s.preventDefault())},onTouchMove:function(s){if(!this.disabled&&!this.readonly&&s.touches.length==1){var r=this.$el.getBoundingClientRect(),l=s.targetTouches.item(0),u=l.clientX-r.left,n=l.clientY-r.top;this.updateValueByOffset(u,n)}},onKeyDown:function(s){if(!this.disabled&&!this.readonly)switch(s.code){case"ArrowRight":case"ArrowUp":{s.preventDefault(),this.updateModelValue(this.d_value+this.step);break}case"ArrowLeft":case"ArrowDown":{s.preventDefault(),this.updateModelValue(this.d_value-this.step);break}case"Home":{s.preventDefault(),this.writeValue(this.min);break}case"End":{s.preventDefault(),this.writeValue(this.max);break}case"PageUp":{s.preventDefault(),this.updateModelValue(this.d_value+10);break}case"PageDown":{s.preventDefault(),this.updateModelValue(this.d_value-10);break}}}},computed:{rangePath:function(){return"M ".concat(this.minX," ").concat(this.minY," A ").concat(this.radius," ").concat(this.radius," 0 1 1 ").concat(this.maxX," ").concat(this.maxY)},valuePath:function(){return"M ".concat(this.zeroX," ").concat(this.zeroY," A ").concat(this.radius," ").concat(this.radius," 0 ").concat(this.largeArc," ").concat(this.sweep," ").concat(this.valueX," ").concat(this.valueY)},zeroRadians:function(){return this.min>0&&this.max>0?this.mapRange(this.min,this.min,this.max,this.minRadians,this.maxRadians):this.mapRange(0,this.min,this.max,this.minRadians,this.maxRadians)},valueRadians:function(){return this.mapRange(this.d_value,this.min,this.max,this.minRadians,this.maxRadians)},minX:function(){return this.midX+Math.cos(this.minRadians)*this.radius},minY:function(){return this.midY-Math.sin(this.minRadians)*this.radius},maxX:function(){return this.midX+Math.cos(this.maxRadians)*this.radius},maxY:function(){return this.midY-Math.sin(this.maxRadians)*this.radius},zeroX:function(){return this.midX+Math.cos(this.zeroRadians)*this.radius},zeroY:function(){return this.midY-Math.sin(this.zeroRadians)*this.radius},valueX:function(){return this.midX+Math.cos(this.valueRadians)*this.radius},valueY:function(){return this.midY-Math.sin(this.valueRadians)*this.radius},largeArc:function(){return Math.abs(this.zeroRadians-this.valueRadians)<f?0:1},sweep:function(){return this.valueRadians>this.zeroRadians?0:1},valueToDisplay:function(){return typeof this.valueTemplate=="string"?this.valueTemplate.replace(/{value}/g,this.d_value):this.valueTemplate(this.d_value)}}},ha=["width","height","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-labelledby","aria-label"],va=["d","stroke-width","stroke"],pa=["d","stroke-width","stroke"],ma=["fill"];function _a(e,s,r,l,u,n){return d(),c("div",C({class:e.cx("root")},e.ptmi("root")),[(d(),c("svg",C({viewBox:"0 0 100 100",role:"slider",width:e.size,height:e.size,tabindex:e.readonly||e.disabled?-1:e.tabindex,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.d_value,"aria-labelledby":e.ariaLabelledby,"aria-label":e.ariaLabel,onClick:s[0]||(s[0]=function(){return n.onClick&&n.onClick.apply(n,arguments)}),onBlur:s[1]||(s[1]=function(){return n.onBlur&&n.onBlur.apply(n,arguments)}),onKeydown:s[2]||(s[2]=function(){return n.onKeyDown&&n.onKeyDown.apply(n,arguments)}),onMousedown:s[3]||(s[3]=function(){return n.onMouseDown&&n.onMouseDown.apply(n,arguments)}),onMouseup:s[4]||(s[4]=function(){return n.onMouseUp&&n.onMouseUp.apply(n,arguments)}),onTouchstart:s[5]||(s[5]=function(){return n.onTouchStart&&n.onTouchStart.apply(n,arguments)}),onTouchend:s[6]||(s[6]=function(){return n.onTouchEnd&&n.onTouchEnd.apply(n,arguments)})},e.ptm("svg")),[a("path",C({d:n.rangePath,"stroke-width":e.strokeWidth,stroke:e.rangeColor,class:e.cx("range")},e.ptm("range")),null,16,va),a("path",C({d:n.valuePath,"stroke-width":e.strokeWidth,stroke:e.valueColor,class:e.cx("value")},e.ptm("value")),null,16,pa),e.showValue?(d(),c("text",C({key:0,x:50,y:57,"text-anchor":"middle",fill:e.textColor,class:e.cx("text")},e.ptm("text")),p(n.valueToDisplay),17,ma)):B("",!0)],16,ha))],16)}U.render=_a;const fa={class:"ch-dashboard"},ba={class:"ch-dashboard__header"},ga={class:"ch-dashboard__greeting"},wa={key:0},ya={class:"ch-dashboard__header-actions"},ka={class:"ch-stats-grid"},xa={class:"ch-stat-card__body"},Ma={class:"ch-stat-card__label"},Ra={class:"ch-stat-card__value-row"},Ca={key:1,class:"ch-stat-card__value"},Ta={key:0,class:"ch-stat-card__sub"},Da={class:"ch-dashboard__main"},Va={class:"ch-panel ch-panel--conversations"},Ba={class:"ch-panel__header"},za={class:"ch-panel__body"},Sa={key:0,class:"ch-conv-list"},Aa={class:"flex-1 space-y-2"},Xa={key:1,class:"ch-conv-empty"},Ya={key:2,class:"ch-conv-list"},Ea=["onClick"],La={class:"ch-conv-item__avatar-wrap"},Na={class:"ch-conv-item__content"},Pa={class:"ch-conv-item__top"},Ia={class:"ch-conv-item__name"},Ua={class:"ch-conv-item__badges"},Ka={key:0,class:"ch-badge ch-badge--ai"},$a={class:"ch-conv-item__msg"},Fa={class:"ch-conv-item__meta"},Ha={class:"ch-conv-item__time"},Oa={class:"ch-dashboard__sidebar"},Wa={class:"ch-panel ch-panel--ai"},ja={class:"ch-panel__body"},Ga={class:"ch-ai-gauge"},Ja={class:"ch-ai-stats"},Qa={class:"ch-ai-stat-row"},qa={class:"ch-ai-stat-row__value"},Za={class:"ch-ai-stat-row"},at={class:"ch-ai-stat-row__value"},tt={class:"ch-ai-stat-row"},et={class:"ch-ai-stat-row__value ch-ai-stat-row__value--star"},st={class:"ch-panel ch-panel--actions"},nt={class:"ch-panel__body"},it={class:"ch-actions-grid"},ot={__name:"Index",setup(e){const s=ea(),r=q(),l=D(!1),u=D(!1),n=D(null),b=D([]),K=N(()=>{var i,t,g,v,w,y,k,x,M,R,o,z;return[{label:"Active Conversations",value:((t=(i=n.value)==null?void 0:i.conversations)==null?void 0:t.active)||0,subtext:`${((v=(g=n.value)==null?void 0:g.conversations)==null?void 0:v.pending)||0} pending`,icon:"pi pi-comments",iconBg:"ch-stat-card__icon-wrap--blue",accent:"ch-stat-card--blue"},{label:"Messages Today",value:((y=(w=n.value)==null?void 0:w.messages)==null?void 0:y.today)||0,icon:"pi pi-envelope",iconBg:"ch-stat-card__icon-wrap--emerald",accent:"ch-stat-card--emerald"},{label:"Total Customers",value:((x=(k=n.value)==null?void 0:k.customers)==null?void 0:x.total)||0,subtext:`+${((R=(M=n.value)==null?void 0:M.customers)==null?void 0:R.new_today)||0} today`,icon:"pi pi-users",iconBg:"ch-stat-card__icon-wrap--violet",accent:"ch-stat-card--violet"},{label:"Satisfaction",value:`${((z=(o=n.value)==null?void 0:o.satisfaction)==null?void 0:z.average)||0}/5`,icon:"pi pi-star-fill",iconBg:"ch-stat-card__icon-wrap--amber",accent:"ch-stat-card--amber"}]}),L=N(()=>{var i,t;return((t=(i=n.value)==null?void 0:i.ai_stats)==null?void 0:t.ai_percentage)||0}),$=async()=>{l.value=!0;try{const i=await I.get("/dashboard/stats");n.value=i.data}catch(i){console.error("Failed to fetch stats:",i)}finally{l.value=!1}},F=async()=>{u.value=!0;try{const i=await I.get("/dashboard/recent-conversations");b.value=i.data||[]}catch(i){console.error("Failed to fetch conversations:",i)}finally{u.value=!1}},H=i=>i?i.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2):"?",O=i=>{if(!i)return"?";const t=i.display_name||i.name;return H(t)},W=i=>{if(!i)return"Customer";const t=i.display_name||i.name;return!t||t==="Unknown"?"Customer":t},j=i=>i.last_message?i.last_message:i.last_message_fallback?i.last_message_fallback:"No messages yet",G=i=>({active:"success",pending:"warn",closed:"secondary"})[i]||"secondary",_=i=>{s.push(i)},J=i=>{if(!i)return"";const t=new Date(i),v=new Date-t;return v<6e4?"Just now":v<36e5?`${Math.floor(v/6e4)}m ago`:v<864e5?`${Math.floor(v/36e5)}h ago`:t.toLocaleDateString()};return Z(async()=>{await Promise.all([$(),F()])}),(i,t)=>{var v,w,y,k,x,M,R;const g=ta("router-link");return d(),c("div",fa,[a("div",ba,[a("div",null,[a("h2",ga,[t[6]||(t[6]=A(" Welcome back",-1)),(v=h(r).user)!=null&&v.name?(d(),c("span",wa,", "+p(h(r).user.name.split(" ")[0]),1)):B("",!0)]),t[7]||(t[7]=a("p",{class:"ch-dashboard__subtext"},"Here's what's happening with your customer service today.",-1))]),a("div",ya,[m(h(P),{label:"View Analytics",icon:"pi pi-chart-bar",severity:"secondary",outlined:"",size:"small",onClick:t[0]||(t[0]=o=>_("/analytics"))})])]),a("div",ka,[(d(!0),c(X,null,Y(K.value,o=>(d(),c("div",{key:o.label,class:V(["ch-stat-card",o.accent])},[a("div",{class:V(["ch-stat-card__icon-wrap",o.iconBg])},[a("i",{class:V([o.icon,"ch-stat-card__icon"])},null,2)],2),a("div",xa,[a("span",Ma,p(o.label),1),a("div",Ra,[l.value?(d(),sa(h(T),{key:0,width:"48px",height:"28px"})):(d(),c("span",Ca,p(o.value),1))]),o.subtext?(d(),c("span",Ta,p(o.subtext),1)):B("",!0)]),t[8]||(t[8]=a("div",{class:"ch-stat-card__decoration"},null,-1))],2))),128))]),a("div",Da,[a("div",Va,[a("div",Ba,[t[9]||(t[9]=E('<div class="ch-panel__title-group" data-v-09c7d256><div class="ch-panel__icon-badge ch-panel__icon-badge--blue" data-v-09c7d256><i class="pi pi-comments" data-v-09c7d256></i></div><div data-v-09c7d256><h3 class="ch-panel__title" data-v-09c7d256>Recent Conversations</h3><p class="ch-panel__desc" data-v-09c7d256>Latest customer interactions</p></div></div>',1)),m(g,{to:"/conversations",class:"no-underline"},{default:aa(()=>[m(h(P),{label:"View All",icon:"pi pi-arrow-right",iconPos:"right",text:"",size:"small"})]),_:1})]),a("div",za,[u.value?(d(),c("div",Sa,[(d(),c(X,null,Y(5,o=>a("div",{key:o,class:"ch-conv-item ch-conv-item--skeleton"},[m(h(T),{shape:"circle",size:"2.5rem"}),a("div",Aa,[m(h(T),{width:"60%",height:"14px"}),m(h(T),{width:"80%",height:"12px"})]),m(h(T),{width:"50px",height:"20px"})])),64))])):b.value.length===0?(d(),c("div",Xa,[...t[10]||(t[10]=[a("div",{class:"ch-conv-empty__icon"},[a("i",{class:"pi pi-inbox"})],-1),a("p",{class:"ch-conv-empty__text"},"No conversations yet",-1),a("p",{class:"ch-conv-empty__sub"},"Conversations will appear here once customers reach out.",-1)])])):(d(),c("div",Ya,[(d(!0),c(X,null,Y(b.value,o=>(d(),c("div",{key:o.id,class:"ch-conv-item",onClick:z=>_(`/conversations?id=${o.id}`)},[a("div",La,[m(h(na),{label:O(o.customer),shape:"circle",class:"ch-conv-item__avatar"},null,8,["label"]),a("span",{class:V(["ch-conv-item__status-dot","ch-conv-item__status-dot--"+o.status])},null,2)]),a("div",Na,[a("div",Pa,[a("span",Ia,p(W(o.customer)),1),a("div",Ua,[o.is_ai_handling?(d(),c("span",Ka,[...t[11]||(t[11]=[a("i",{class:"pi pi-microchip-ai"},null,-1),A(" AI ",-1)])])):B("",!0)])]),a("p",$a,p(j(o)),1)]),a("div",Fa,[m(h(ia),{value:o.status,severity:G(o.status),class:"ch-conv-item__tag"},null,8,["value","severity"]),a("span",Ha,p(J(o.last_message_at)),1)])],8,Ea))),128))]))])]),a("div",Oa,[a("div",Wa,[t[17]||(t[17]=E('<div class="ch-panel__header" data-v-09c7d256><div class="ch-panel__title-group" data-v-09c7d256><div class="ch-panel__icon-badge ch-panel__icon-badge--emerald" data-v-09c7d256><i class="pi pi-microchip-ai" data-v-09c7d256></i></div><div data-v-09c7d256><h3 class="ch-panel__title" data-v-09c7d256>AI Performance</h3><p class="ch-panel__desc" data-v-09c7d256>Automation metrics</p></div></div></div>',1)),a("div",ja,[a("div",Ga,[m(h(U),{modelValue:L.value,"onUpdate:modelValue":t[1]||(t[1]=o=>L.value=o),size:140,readonly:"",valueTemplate:"{value}%",strokeWidth:8},null,8,["modelValue"]),t[12]||(t[12]=a("p",{class:"ch-ai-gauge__label"},"Handled by AI",-1))]),a("div",Ja,[a("div",Qa,[t[13]||(t[13]=a("div",{class:"ch-ai-stat-row__left"},[a("span",{class:"ch-ai-stat-row__dot ch-ai-stat-row__dot--ai"}),a("span",{class:"ch-ai-stat-row__label"},"AI Handled")],-1)),a("span",qa,p(((y=(w=n.value)==null?void 0:w.ai_stats)==null?void 0:y.ai_handled)||0),1)]),a("div",Za,[t[14]||(t[14]=a("div",{class:"ch-ai-stat-row__left"},[a("span",{class:"ch-ai-stat-row__dot ch-ai-stat-row__dot--human"}),a("span",{class:"ch-ai-stat-row__label"},"Human Handled")],-1)),a("span",at,p(((x=(k=n.value)==null?void 0:k.ai_stats)==null?void 0:x.human_handled)||0),1)]),a("div",tt,[t[16]||(t[16]=a("div",{class:"ch-ai-stat-row__left"},[a("span",{class:"ch-ai-stat-row__dot ch-ai-stat-row__dot--rating"}),a("span",{class:"ch-ai-stat-row__label"},"Avg. Satisfaction")],-1)),a("span",et,[t[15]||(t[15]=a("i",{class:"pi pi-star-fill"},null,-1)),A(" "+p(((R=(M=n.value)==null?void 0:M.satisfaction)==null?void 0:R.average)||0)+"/5 ",1)])])])])]),a("div",st,[t[22]||(t[22]=E('<div class="ch-panel__header" data-v-09c7d256><div class="ch-panel__title-group" data-v-09c7d256><div class="ch-panel__icon-badge ch-panel__icon-badge--violet" data-v-09c7d256><i class="pi pi-bolt" data-v-09c7d256></i></div><div data-v-09c7d256><h3 class="ch-panel__title" data-v-09c7d256>Quick Actions</h3><p class="ch-panel__desc" data-v-09c7d256>Common tasks</p></div></div></div>',1)),a("div",nt,[a("div",it,[a("button",{class:"ch-action-btn",onClick:t[2]||(t[2]=o=>_("/conversations"))},[...t[18]||(t[18]=[a("i",{class:"pi pi-plus ch-action-btn__icon ch-action-btn__icon--blue"},null,-1),a("span",{class:"ch-action-btn__label"},"New Chat",-1)])]),a("button",{class:"ch-action-btn",onClick:t[3]||(t[3]=o=>_("/platforms"))},[...t[19]||(t[19]=[a("i",{class:"pi pi-share-alt ch-action-btn__icon ch-action-btn__icon--emerald"},null,-1),a("span",{class:"ch-action-btn__label"},"Platforms",-1)])]),a("button",{class:"ch-action-btn",onClick:t[4]||(t[4]=o=>_("/knowledge-base"))},[...t[20]||(t[20]=[a("i",{class:"pi pi-book ch-action-btn__icon ch-action-btn__icon--amber"},null,-1),a("span",{class:"ch-action-btn__label"},"Knowledge",-1)])]),a("button",{class:"ch-action-btn",onClick:t[5]||(t[5]=o=>_("/team"))},[...t[21]||(t[21]=[a("i",{class:"pi pi-user-plus ch-action-btn__icon ch-action-btn__icon--violet"},null,-1),a("span",{class:"ch-action-btn__label"},"Invite",-1)])])])])])])])])}}},ht=la(ot,[["__scopeId","data-v-09c7d256"]]);export{ht as default};
