import{D as gt,J as bt,R as xt,K as De,L as Ke,O as kt,Y as _t,M as wt,N as It,P as fe,Q as ve,S as Ct,T as ne,U as le,V as Te,G as L,W as Lt,X as Re,b as o,h as p,m as l,e as i,Z as K,B as A,n as C,_ as Pe,t as g,x as Ve,w as E,g as v,$ as Ot,a0 as ye,F as T,k as R,l as X,q as St,r as h,c as Mt,a1 as he,o as At,C as Et,i as c,a2 as Tt,p as Pt,a3 as Vt,H as P,v as Ft,a4 as Y,I as re,j as V,a5 as zt,y as Fe,A as oe}from"./app-DJ0pZO5B.js";import{s as ge}from"./index-CBniI9_G.js";import{s as Dt}from"./index-abbMYiPI.js";import{s as be}from"./index-D6zsbsG1.js";import{s as D}from"./index-DTWL4fU4.js";import{s as Kt}from"./index-BjAOZkMO.js";import{s as Rt}from"./index-DOmSFTcJ.js";import{s as ue}from"./index-BuSGUNxZ.js";import{s as jt}from"./index-DNL7fXE4.js";import{s as Bt}from"./index-BIH652XY.js";import{_ as Ht}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dr7DX1aH.js";var Ut=`
    .p-menu {
        background: dt('menu.background');
        color: dt('menu.color');
        border: 1px solid dt('menu.border.color');
        border-radius: dt('menu.border.radius');
        min-width: 12.5rem;
    }

    .p-menu-list {
        margin: 0;
        padding: dt('menu.list.padding');
        outline: 0 none;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: dt('menu.list.gap');
    }

    .p-menu-item-content {
        transition:
            background dt('menu.transition.duration'),
            color dt('menu.transition.duration');
        border-radius: dt('menu.item.border.radius');
        color: dt('menu.item.color');
        overflow: hidden;
    }

    .p-menu-item-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        text-decoration: none;
        overflow: hidden;
        position: relative;
        color: inherit;
        padding: dt('menu.item.padding');
        gap: dt('menu.item.gap');
        user-select: none;
        outline: 0 none;
    }

    .p-menu-item-label {
        line-height: 1;
    }

    .p-menu-item-icon {
        color: dt('menu.item.icon.color');
    }

    .p-menu-item.p-focus .p-menu-item-content {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item.p-focus .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover {
        color: dt('menu.item.focus.color');
        background: dt('menu.item.focus.background');
    }

    .p-menu-item:not(.p-disabled) .p-menu-item-content:hover .p-menu-item-icon {
        color: dt('menu.item.icon.focus.color');
    }

    .p-menu-overlay {
        box-shadow: dt('menu.shadow');
    }

    .p-menu-submenu-label {
        background: dt('menu.submenu.label.background');
        padding: dt('menu.submenu.label.padding');
        color: dt('menu.submenu.label.color');
        font-weight: dt('menu.submenu.label.font.weight');
    }

    .p-menu-separator {
        border-block-start: 1px solid dt('menu.separator.border.color');
    }
`,Nt={root:function(t){var r=t.props;return["p-menu p-component",{"p-menu-overlay":r.popup}]},start:"p-menu-start",list:"p-menu-list",submenuLabel:"p-menu-submenu-label",separator:"p-menu-separator",end:"p-menu-end",item:function(t){var r=t.instance;return["p-menu-item",{"p-focus":r.id===r.focusedOptionId,"p-disabled":r.disabled()}]},itemContent:"p-menu-item-content",itemLink:"p-menu-item-link",itemIcon:"p-menu-item-icon",itemLabel:"p-menu-item-label"},$t=gt.extend({name:"menu",style:Ut,classes:Nt}),qt={name:"BaseMenu",extends:De,props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:[String,Object],default:"body"},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},tabindex:{type:Number,default:0},ariaLabel:{type:String,default:null},ariaLabelledby:{type:String,default:null}},style:$t,provide:function(){return{$pcMenu:this,$parentInstance:this}}},je={name:"Menuitem",hostName:"Menu",extends:De,inheritAttrs:!1,emits:["item-click","item-mousemove"],props:{item:null,templates:null,id:null,focusedOptionId:null,index:null},methods:{getItemProp:function(t,r){return t&&t.item?Lt(t.item[r]):void 0},getPTOptions:function(t){return this.ptm(t,{context:{item:this.item,index:this.index,focused:this.isItemFocused(),disabled:this.disabled()}})},isItemFocused:function(){return this.focusedOptionId===this.id},onItemClick:function(t){var r=this.getItemProp(this.item,"command");r&&r({originalEvent:t,item:this.item.item}),this.$emit("item-click",{originalEvent:t,item:this.item,id:this.id})},onItemMouseMove:function(t){this.$emit("item-mousemove",{originalEvent:t,item:this.item,id:this.id})},visible:function(){return typeof this.item.visible=="function"?this.item.visible():this.item.visible!==!1},disabled:function(){return typeof this.item.disabled=="function"?this.item.disabled():this.item.disabled},label:function(){return typeof this.item.label=="function"?this.item.label():this.item.label},getMenuItemProps:function(t){return{action:L({class:this.cx("itemLink"),tabindex:"-1"},this.getPTOptions("itemLink")),icon:L({class:[this.cx("itemIcon"),t.icon]},this.getPTOptions("itemIcon")),label:L({class:this.cx("itemLabel")},this.getPTOptions("itemLabel"))}}},computed:{dataP:function(){return Ke({focus:this.isItemFocused(),disabled:this.disabled()})}},directives:{ripple:xt}},Yt=["id","aria-label","aria-disabled","data-p-focused","data-p-disabled","data-p"],Wt=["data-p"],Zt=["href","target"],Gt=["data-p"],Qt=["data-p"];function Jt(s,t,r,y,O,d){var I=Re("ripple");return d.visible()?(l(),o("li",L({key:0,id:r.id,class:[s.cx("item"),r.item.class],role:"menuitem",style:r.item.style,"aria-label":d.label(),"aria-disabled":d.disabled(),"data-p-focused":d.isItemFocused(),"data-p-disabled":d.disabled()||!1,"data-p":d.dataP},d.getPTOptions("item")),[i("div",L({class:s.cx("itemContent"),onClick:t[0]||(t[0]=function(F){return d.onItemClick(F)}),onMousemove:t[1]||(t[1]=function(F){return d.onItemMouseMove(F)}),"data-p":d.dataP},d.getPTOptions("itemContent")),[r.templates.item?r.templates.item?(l(),A(Pe(r.templates.item),{key:1,item:r.item,label:d.label(),props:d.getMenuItemProps(r.item)},null,8,["item","label","props"])):p("",!0):K((l(),o("a",L({key:0,href:r.item.url,class:s.cx("itemLink"),target:r.item.target,tabindex:"-1"},d.getPTOptions("itemLink")),[r.templates.itemicon?(l(),A(Pe(r.templates.itemicon),{key:0,item:r.item,class:C(s.cx("itemIcon"))},null,8,["item","class"])):r.item.icon?(l(),o("span",L({key:1,class:[s.cx("itemIcon"),r.item.icon],"data-p":d.dataP},d.getPTOptions("itemIcon")),null,16,Gt)):p("",!0),i("span",L({class:s.cx("itemLabel"),"data-p":d.dataP},d.getPTOptions("itemLabel")),g(d.label()),17,Qt)],16,Zt)),[[I]])],16,Wt)],16,Yt)):p("",!0)}je.render=Jt;function ze(s){return ss(s)||ts(s)||es(s)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(s,t){if(s){if(typeof s=="string")return xe(s,t);var r={}.toString.call(s).slice(8,-1);return r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set"?Array.from(s):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(s,t):void 0}}function ts(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function ss(s){if(Array.isArray(s))return xe(s)}function xe(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,y=Array(t);r<t;r++)y[r]=s[r];return y}var Be={name:"Menu",extends:qt,inheritAttrs:!1,emits:["show","hide","focus","blur"],data:function(){return{overlayVisible:!1,focused:!1,focusedOptionIndex:-1,selectedOptionIndex:-1}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,list:null,mounted:function(){this.popup||(this.bindResizeListener(),this.bindOutsideClickListener())},beforeUnmount:function(){this.unbindResizeListener(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.target=null,this.container&&this.autoZIndex&&ve.clear(this.container),this.container=null},methods:{itemClick:function(t){var r=t.item;this.disabled(r)||(r.command&&r.command(t),this.overlayVisible&&this.hide(),!this.popup&&this.focusedOptionIndex!==t.id&&(this.focusedOptionIndex=t.id))},itemMouseMove:function(t){this.focused&&(this.focusedOptionIndex=t.id)},onListFocus:function(t){this.focused=!0,!this.popup&&this.changeFocusedOptionIndex(0),this.$emit("focus",t)},onListBlur:function(t){this.focused=!1,this.focusedOptionIndex=-1,this.$emit("blur",t)},onListKeyDown:function(t){switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"Enter":case"NumpadEnter":this.onEnterKey(t);break;case"Space":this.onSpaceKey(t);break;case"Escape":this.popup&&(ne(this.target),this.hide());case"Tab":this.overlayVisible&&this.hide();break}},onArrowDownKey:function(t){var r=this.findNextOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(r),t.preventDefault()},onArrowUpKey:function(t){if(t.altKey&&this.popup)ne(this.target),this.hide(),t.preventDefault();else{var r=this.findPrevOptionIndex(this.focusedOptionIndex);this.changeFocusedOptionIndex(r),t.preventDefault()}},onHomeKey:function(t){this.changeFocusedOptionIndex(0),t.preventDefault()},onEndKey:function(t){this.changeFocusedOptionIndex(le(this.container,'li[data-pc-section="item"][data-p-disabled="false"]').length-1),t.preventDefault()},onEnterKey:function(t){var r=Te(this.list,'li[id="'.concat("".concat(this.focusedOptionIndex),'"]')),y=r&&Te(r,'a[data-pc-section="itemlink"]');this.popup&&ne(this.target),y?y.click():r&&r.click(),t.preventDefault()},onSpaceKey:function(t){this.onEnterKey(t)},findNextOptionIndex:function(t){var r=le(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),y=ze(r).findIndex(function(O){return O.id===t});return y>-1?y+1:0},findPrevOptionIndex:function(t){var r=le(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),y=ze(r).findIndex(function(O){return O.id===t});return y>-1?y-1:0},changeFocusedOptionIndex:function(t){var r=le(this.container,'li[data-pc-section="item"][data-p-disabled="false"]'),y=t>=r.length?r.length-1:t<0?0:t;y>-1&&(this.focusedOptionIndex=r[y].getAttribute("id"))},toggle:function(t,r){this.overlayVisible?this.hide():this.show(t,r)},show:function(t,r){this.overlayVisible=!0,this.target=r??t.currentTarget},hide:function(){this.overlayVisible=!1,this.target=null},onEnter:function(t){Ct(t,{position:"absolute",top:"0"}),this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),this.autoZIndex&&ve.set("menu",t,this.baseZIndex+this.$primevue.config.zIndex.menu),this.popup&&ne(this.list),this.$emit("show")},onLeave:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener(),this.$emit("hide")},onAfterLeave:function(t){this.autoZIndex&&ve.clear(t)},alignOverlay:function(){It(this.container,this.target);var t=fe(this.target);t>fe(this.container)&&(this.container.style.minWidth=fe(this.target)+"px")},bindOutsideClickListener:function(){var t=this;this.outsideClickListener||(this.outsideClickListener=function(r){var y=t.container&&!t.container.contains(r.target),O=!(t.target&&(t.target===r.target||t.target.contains(r.target)));t.overlayVisible&&y&&O?t.hide():!t.popup&&y&&O&&(t.focusedOptionIndex=-1)},document.addEventListener("click",this.outsideClickListener,!0))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener,!0),this.outsideClickListener=null)},bindScrollListener:function(){var t=this;this.scrollHandler||(this.scrollHandler=new wt(this.target,function(){t.overlayVisible&&t.hide()})),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var t=this;this.resizeListener||(this.resizeListener=function(){t.overlayVisible&&!_t()&&t.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},visible:function(t){return typeof t.visible=="function"?t.visible():t.visible!==!1},disabled:function(t){return typeof t.disabled=="function"?t.disabled():t.disabled},label:function(t){return typeof t.label=="function"?t.label():t.label},onOverlayClick:function(t){kt.emit("overlay-click",{originalEvent:t,target:this.target})},containerRef:function(t){this.container=t},listRef:function(t){this.list=t}},computed:{focusedOptionId:function(){return this.focusedOptionIndex!==-1?this.focusedOptionIndex:null},dataP:function(){return Ke({popup:this.popup})}},components:{PVMenuitem:je,Portal:bt}},as=["id","data-p"],is=["id","tabindex","aria-activedescendant","aria-label","aria-labelledby"],ns=["id"];function ls(s,t,r,y,O,d){var I=Ve("PVMenuitem"),F=Ve("Portal");return l(),A(F,{appendTo:s.appendTo,disabled:!s.popup},{default:E(function(){return[v(Ot,L({name:"p-anchored-overlay",onEnter:d.onEnter,onLeave:d.onLeave,onAfterLeave:d.onAfterLeave},s.ptm("transition")),{default:E(function(){return[!s.popup||O.overlayVisible?(l(),o("div",L({key:0,ref:d.containerRef,id:s.$id,class:s.cx("root"),onClick:t[3]||(t[3]=function(){return d.onOverlayClick&&d.onOverlayClick.apply(d,arguments)}),"data-p":d.dataP},s.ptmi("root")),[s.$slots.start?(l(),o("div",L({key:0,class:s.cx("start")},s.ptm("start")),[ye(s.$slots,"start")],16)):p("",!0),i("ul",L({ref:d.listRef,id:s.$id+"_list",class:s.cx("list"),role:"menu",tabindex:s.tabindex,"aria-activedescendant":O.focused?d.focusedOptionId:void 0,"aria-label":s.ariaLabel,"aria-labelledby":s.ariaLabelledby,onFocus:t[0]||(t[0]=function(){return d.onListFocus&&d.onListFocus.apply(d,arguments)}),onBlur:t[1]||(t[1]=function(){return d.onListBlur&&d.onListBlur.apply(d,arguments)}),onKeydown:t[2]||(t[2]=function(){return d.onListKeyDown&&d.onListKeyDown.apply(d,arguments)})},s.ptm("list")),[(l(!0),o(T,null,R(s.model,function(k,w){return l(),o(T,{key:d.label(k)+w.toString()},[k.items&&d.visible(k)&&!k.separator?(l(),o(T,{key:0},[k.items?(l(),o("li",L({key:0,id:s.$id+"_"+w,class:[s.cx("submenuLabel"),k.class],role:"none"},{ref_for:!0},s.ptm("submenuLabel")),[ye(s.$slots,s.$slots.submenulabel?"submenulabel":"submenuheader",{item:k},function(){return[X(g(d.label(k)),1)]})],16,ns)):p("",!0),(l(!0),o(T,null,R(k.items,function(S,z){return l(),o(T,{key:S.label+w+"_"+z},[d.visible(S)&&!S.separator?(l(),A(I,{key:0,id:s.$id+"_"+w+"_"+z,item:S,templates:s.$slots,focusedOptionId:d.focusedOptionId,unstyled:s.unstyled,onItemClick:d.itemClick,onItemMousemove:d.itemMouseMove,pt:s.pt},null,8,["id","item","templates","focusedOptionId","unstyled","onItemClick","onItemMousemove","pt"])):d.visible(S)&&S.separator?(l(),o("li",L({key:"separator"+w+z,class:[s.cx("separator"),k.class],style:S.style,role:"separator"},{ref_for:!0},s.ptm("separator")),null,16)):p("",!0)],64)}),128))],64)):d.visible(k)&&k.separator?(l(),o("li",L({key:"separator"+w.toString(),class:[s.cx("separator"),k.class],style:k.style,role:"separator"},{ref_for:!0},s.ptm("separator")),null,16)):(l(),A(I,{key:d.label(k)+w.toString(),id:s.$id+"_"+w,item:k,index:w,templates:s.$slots,focusedOptionId:d.focusedOptionId,unstyled:s.unstyled,onItemClick:d.itemClick,onItemMousemove:d.itemMouseMove,pt:s.pt},null,8,["id","item","index","templates","focusedOptionId","unstyled","onItemClick","onItemMousemove","pt"]))],64)}),128))],16,is),s.$slots.end?(l(),o("div",L({key:1,class:s.cx("end")},s.ptm("end")),[ye(s.$slots,"end")],16)):p("",!0)],16,as)):p("",!0)]}),_:3},16,["onEnter","onLeave","onAfterLeave"])]}),_:3},8,["appendTo","disabled"])}Be.render=ls;const rs={class:"flex h-[calc(100vh-8rem)] gap-4"},os={class:"p-4 border-b border-surface-200 dark:border-surface-700 bg-surface-50 dark:bg-surface-800"},us={class:"flex gap-2 mt-3"},ds={class:"flex-1 overflow-y-auto -mx-4 -my-4",style:{"max-height":"calc(100vh - 18rem)"}},cs={key:0,class:"p-4 space-y-3"},ms={key:1,class:"p-8 text-center text-surface-500"},ps={key:2},fs=["onClick"],vs={class:"relative"},ys={key:0,class:"pi pi-lock absolute -top-1 -left-1 text-xs bg-surface-600 text-white rounded-full p-1"},hs={class:"flex-1 min-w-0"},gs={class:"flex items-center gap-2"},bs={class:"text-sm text-surface-500 truncate"},xs={class:"text-right shrink-0"},ks={class:"flex flex-col gap-1 items-end"},_s={class:"text-xs text-surface-400"},ws={class:"flex-1 flex gap-4 overflow-hidden"},Is={class:"flex items-center justify-between p-4 border-b border-surface-200 dark:border-surface-700 bg-surface-50 dark:bg-surface-800"},Cs={class:"flex items-center gap-3"},Ls={class:"flex items-center gap-2"},Os={class:"font-semibold text-surface-900 dark:text-surface-100"},Ss={class:"text-sm text-surface-500"},Ms={class:"flex items-center gap-3"},As={class:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-surface-100 dark:bg-surface-700 border border-surface-200 dark:border-surface-600"},Es={key:0,class:"flex justify-center py-2"},Ts={key:1,class:"flex justify-center py-2"},Ps={key:2,class:"flex justify-center py-8"},Vs={key:3,class:"flex flex-col items-center justify-center py-16 text-surface-500"},Fs={key:0,class:"mb-2 p-2 bg-black/5 rounded-lg border-l-2 border-black/20"},zs={class:"text-xs opacity-70 mb-1"},Ds={class:"text-sm italic opacity-90 line-clamp-2"},Ks={class:"whitespace-pre-wrap"},Rs={key:1,class:"flex items-center gap-1 mt-1 text-xs opacity-80"},js={key:2,class:"flex flex-wrap gap-2 mt-2"},Bs={key:0,class:"relative"},Hs=["src","alt","onClick","onError"],Us=["onClick"],Ns={class:"text-center"},$s={class:"text-xs text-surface-500"},qs={key:0,class:"text-xs text-primary-500 hover:underline mt-1"},Ys={key:1,class:"flex items-center gap-2 p-2 bg-surface-100 dark:bg-surface-600 rounded-lg min-w-[180px]"},Ws={class:"flex flex-col"},Zs={class:"text-xs text-surface-600 dark:text-surface-300"},Gs={key:0},Qs=["src"],Js={key:2,class:"relative"},Xs=["src"],ea={key:1,class:"w-40 h-32 rounded-lg bg-surface-200 dark:bg-surface-600 flex items-center justify-center"},ta={key:3,class:"flex items-center gap-2 p-2 bg-surface-100 dark:bg-surface-600 rounded-lg"},sa=["href"],aa={key:1,class:"text-xs text-surface-600 dark:text-surface-300"},ia=["onMouseenter"],na={class:"text-surface-600 dark:text-surface-300 line-clamp-3"},la={key:0,class:"flex items-center gap-1"},ra=["onClick"],oa={key:1,class:"flex-1 flex flex-col items-center justify-center text-surface-500 bg-surface-50 dark:bg-surface-900",style:{height:"calc(100vh - 21rem)","min-height":"300px"}},ua={class:"border-t border-surface-200 dark:border-surface-700 px-4 py-3 bg-white dark:bg-surface-800"},da={key:0,class:"mb-2 p-2 bg-surface-100 dark:bg-surface-700 rounded-lg flex items-start gap-2"},ca={class:"flex-1 min-w-0"},ma={class:"text-xs text-surface-500 dark:text-surface-400 mb-1"},pa={class:"text-sm text-surface-700 dark:text-surface-300 line-clamp-2 italic"},fa={key:1,class:"mb-2 p-2 bg-surface-100 dark:bg-surface-700 rounded-lg flex items-center gap-2"},va={class:"text-sm text-surface-700 dark:text-surface-300 flex-1 truncate"},ya={class:"text-xs text-surface-500"},ha={class:"flex items-end gap-2"},ga={class:"flex-1 overflow-y-auto -mx-4 -my-4 p-4",style:{"max-height":"calc(100vh - 200px)"}},ba={key:0,class:"mb-4 space-y-3"},xa={class:"bg-surface-50 dark:bg-surface-700/50 rounded-lg p-3 space-y-2"},ka={class:"flex items-center justify-center py-2"},_a={class:"flex items-center gap-2"},wa={class:"text-sm font-medium text-surface-900 dark:text-surface-100"},Ia={key:0,class:"flex items-center gap-2"},Ca={class:"text-sm text-surface-600 dark:text-surface-300"},La={key:1,class:"flex items-center gap-2"},Oa={class:"text-sm text-surface-600 dark:text-surface-300"},Sa={key:2,class:"flex items-center gap-2"},Ma={class:"text-sm text-surface-600 dark:text-surface-300"},Aa={key:0,class:"flex items-center gap-2"},Ea={key:1,class:"flex flex-wrap gap-1"},Ta={key:2,class:"flex justify-center py-8"},Pa={key:3,class:"text-center py-8"},Va={key:4,class:"space-y-4"},Fa={class:"text-sm text-surface-700 dark:text-surface-300 leading-relaxed"},za={key:0},Da={class:"space-y-2"},Ka={key:1},Ra={class:"flex-1"},ja={class:"pt-3 mt-3 border-t border-surface-200 dark:border-surface-700"},Ba={class:"flex items-center justify-between text-xs text-surface-400"},Ha={key:0,class:"flex items-center gap-1"},Ua={class:"space-y-4"},Na={key:0,class:"flex justify-center py-4"},$a={key:1},qa={class:"flex items-center gap-2"},Ya={class:"font-medium"},Wa={key:0,class:"text-xs text-surface-500"},Za={class:"flex justify-end gap-2"},Ga={class:"bg-slate-800 text-slate-100 px-3 py-2 rounded-lg shadow-lg max-w-md text-sm whitespace-pre-wrap break-words"},Qa={class:"text-slate-200"},Ja={__name:"Index",setup(s){const t=Et(),r=Ft(),y=St(),O=h(!1),d=h(null),I=h(null),F=h(!1),k=h(null),w=h(null),S=h(!1),z=h(!1),W=h(!1),Z=h(null),N=h([]),u=h(null),M=h([]),j=h(""),G=h(""),Q=h(null),J=h(null),B=h(null),ke=h(null),$=h(!1),de=h(!1),ce=h(!1),_e=h([]),H=h(void 0),ee=h({}),q=h({visible:!1,content:"",x:0,y:0}),te=h(!1),se=h(!1),x=h(null),He=[{label:"All Status",value:null},{label:"Open",value:"open"},{label:"Closed",value:"closed"}],Ue=Mt(()=>_e.value),Ne=[{label:"All",value:null},{label:"My Conversations",value:"me"},{label:"Unassigned",value:"unassigned"}],$e=[{label:"Close Conversation",icon:"pi pi-check",command:()=>Oe("closed")},{label:"Reopen Conversation",icon:"pi pi-replay",command:()=>Oe("open")},{separator:!0},{label:"View Customer",icon:"pi pi-user",command:()=>lt()}],we=async()=>{O.value=!0;try{const a={};G.value&&(a.search=G.value),Q.value&&(a.status=Q.value),J.value&&(a.assigned_to=J.value);const e=await P.get("/conversations",{params:a});N.value=e.data.data||e.data}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load conversations",life:3e3})}finally{O.value=!1}},Ie=async a=>{u.value=a,r.replace({query:{id:a.id}}),x.value=null,te.value=!0,ee.value={},await Promise.all([qe(a.id),rt()])},qe=async a=>{S.value=!0,M.value=[],W.value=!1,Z.value=null;try{const e=await P.get(`/conversations/${a}/messages`,{params:{limit:30}});M.value=e.data.data||[],W.value=e.data.has_more||!1,Z.value=e.data.oldest_id||null,await Y(),ae()}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load messages",life:3e3})}finally{S.value=!1}},Ce=async()=>{if(!u.value||!Z.value||z.value)return;z.value=!0;const a=B.value,e=(a==null?void 0:a.scrollHeight)||0;try{const m=await P.get(`/conversations/${u.value.id}/messages`,{params:{limit:30,before_id:Z.value}}),n=m.data.data||[];if(W.value=m.data.has_more||!1,Z.value=m.data.oldest_id||null,M.value=[...n,...M.value],await Y(),a){const f=a.scrollHeight;a.scrollTop=f-e}}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load older messages",life:3e3})}finally{z.value=!1}},Ye=a=>{a.target.scrollTop<50&&W.value&&!z.value&&!S.value&&Ce()},We=()=>{var a;(a=d.value)==null||a.click()},Ze=a=>{var m;const e=(m=a.target.files)==null?void 0:m[0];if(e){if(e.size>10*1024*1024){y.add({severity:"warn",summary:"File too large",detail:"Maximum file size is 10MB",life:3e3});return}I.value=e}a.target.value=""},Ge=()=>{I.value=null},Qe=a=>{if(!a)return"pi pi-file";const e=a.type||"";return e.startsWith("image/")?"pi pi-image":e.startsWith("audio/")?"pi pi-volume-up":e.startsWith("video/")?"pi pi-video":e.includes("pdf")?"pi pi-file-pdf":e.includes("word")||e.includes("document")?"pi pi-file-word":e.includes("excel")||e.includes("spreadsheet")?"pi pi-file-excel":"pi pi-file"},Je=a=>{if(!a)return"0 B";const e=1024,m=["B","KB","MB","GB"],n=Math.floor(Math.log(a)/Math.log(e));return parseFloat((a/Math.pow(e,n)).toFixed(1))+" "+m[n]},Xe=a=>{if(!a)return"text";const e=a.type||"";return e.startsWith("image/")?"image":e.startsWith("audio/")?"audio":e.startsWith("video/")?"video":"file"},Le=async()=>{if(!j.value.trim()&&!I.value||!u.value)return;const a=j.value,e=I.value,m=e?Xe(e):"text";j.value="",I.value=null,F.value=!0;const n="temp-"+Date.now();k.value={id:n,content:a||"",message_type:m,is_from_customer:!1,sender_type:"agent",created_at:new Date().toISOString(),isPending:!0,hasAttachment:!!e},M.value.push({...k.value}),await Y(),ae();try{let f;if(e){const b=new FormData;b.append("content",a||""),b.append("message_type",m),b.append("attachment",e),f=await P.post(`/conversations/${u.value.id}/messages`,b,{headers:{"Content-Type":"multipart/form-data"}})}else{const b={content:a,message_type:"text"};w.value&&(b.quoted_message_id=w.value.id),f=await P.post(`/conversations/${u.value.id}/messages`,b)}w.value=null;const _=M.value.findIndex(b=>b.id===n);_!==-1?M.value[_]=f.data:M.value.push(f.data),await Y(),ae()}catch{y.add({severity:"error",summary:"Error",detail:"Failed to send message",life:3e3}),M.value=M.value.filter(_=>_.id!==n),j.value=a,I.value=e}finally{F.value=!1,k.value=null}},et=a=>{w.value=a,Y(()=>{const e=document.querySelector("textarea");e&&e.focus()})},tt=()=>{w.value=null},Oe=async a=>{if(u.value)try{await P.patch(`/conversations/${u.value.id}/status`,{status:a}),u.value.status=a,y.add({severity:"success",summary:"Success",detail:`Conversation ${a}`,life:3e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to update status",life:3e3})}},st=async a=>{if(u.value&&u.value.is_ai_handling!==a)try{await P.patch(`/conversations/${u.value.id}/ai-handling`,{is_ai_handling:a}),u.value.is_ai_handling=a;const e=N.value.find(m=>m.id===u.value.id);e&&(e.is_ai_handling=a),y.add({severity:"success",summary:"Success",detail:a?"AI is now handling this conversation":"Human agent is now handling this conversation",life:3e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to update handler",life:3e3})}},at=async()=>{var a;de.value=!0;try{const e=await P.get("/team");_e.value=e.data.members||e.data.data||[],H.value=((a=u.value)==null?void 0:a.assigned_to)||void 0}catch{y.add({severity:"error",summary:"Error",detail:"Failed to load team members",life:3e3})}finally{de.value=!1}},it=async()=>{if(u.value){ce.value=!0;try{const a=await P.post(`/conversations/${u.value.id}/assign`,{agent_id:H.value||null});u.value.assigned_to=H.value||null,u.value.is_ai_handling=!1;const e=N.value.find(m=>m.id===u.value.id);e&&(e.assigned_to=H.value||null,e.is_ai_handling=!1),$.value=!1,y.add({severity:"success",summary:"Success",detail:H.value?"Agent assigned successfully":"Conversation unassigned",life:3e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to assign agent",life:3e3})}finally{ce.value=!1}}};he($,a=>{a&&at()});const ae=(a=!1)=>{setTimeout(()=>{B.value&&(a?B.value.scrollTo({top:B.value.scrollHeight,behavior:"smooth"}):B.value.scrollTop=B.value.scrollHeight)},100)},nt=a=>{ke.value.toggle(a)},lt=()=>{var a,e;(e=(a=u.value)==null?void 0:a.customer)!=null&&e.id&&r.push(`/customers?id=${u.value.customer.id}`)},rt=async()=>{if(u.value){te.value=!0;try{const a=await P.get(`/conversations/${u.value.id}/summary`,{params:{auto_generate:!0}});a.data.exists?x.value=a.data.summary:x.value=null}catch{x.value=null}finally{te.value=!1}}},Se=async()=>{if(u.value){se.value=!0;try{const a=await P.post(`/conversations/${u.value.id}/summary`);x.value=a.data.summary,y.add({severity:"success",summary:"Success",detail:"AI summary generated successfully",life:3e3})}catch{y.add({severity:"error",summary:"Error",detail:"Failed to generate summary",life:3e3})}finally{se.value=!1}}},ie=a=>a?a.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?",ot=a=>({open:"bg-green-500",in_progress:"bg-blue-500",escalated:"bg-orange-500",closed:"bg-surface-400"})[a]||"bg-surface-400",ut=a=>({open:"success",in_progress:"info",escalated:"warn",closed:"secondary"})[a]||"secondary",dt=a=>({"Technical Support":"danger","Product Inquiry":"info","Sales/Purchase":"success","Website Development":"primary","Custom System":"primary",Consultation:"info",Complaint:"danger","General Question":"secondary","Follow-up":"warn",Other:"secondary"})[a]||"secondary",ct=a=>{if(!a)return"";const e=new Date(a),n=new Date-e;return n<6e4?"Now":n<36e5?`${Math.floor(n/6e4)}m`:n<864e5?`${Math.floor(n/36e5)}h`:e.toLocaleDateString()},mt=a=>a?new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",pt=a=>a.media_urls&&a.media_urls.length>0||a.message_type&&["image","audio","voice","video"].includes(a.message_type),ft=a=>{const e=[];if(a.media_urls&&Array.isArray(a.media_urls))for(const m of a.media_urls){const n=m.local_url||m.url||null;e.push({type:m.type||a.message_type||"image",url:n,local_url:m.local_url||null,original_url:m.url||null,file_id:m.file_id||null,duration:m.duration||null,mime_type:m.mime_type||null})}return e.length===0&&a.message_type&&["image","audio","voice","video"].includes(a.message_type)&&e.push({type:a.message_type==="voice"?"audio":a.message_type,url:null,file_id:null}),e},me=a=>{var e;if((e=a.metadata)!=null&&e.media_text)return a.metadata.media_text;if(a.media_processing_results&&a.media_processing_results.length>0){const m=a.media_processing_results.find(n=>n.status==="completed");if(m!=null&&m.text_content)return m.text_content}return null},Me=a=>{a&&window.open(a,"_blank")},vt=(a,e)=>{ee.value[`${a}-${e}`]=!0},yt=(a,e)=>{const m=me(a);if(!m)return;const n=e.currentTarget.getBoundingClientRect();q.value={visible:!0,content:m,x:n.left+n.width/2,y:n.top-10}},ht=()=>{q.value.visible=!1};return he([G,Q,J],()=>{we()},{debounce:300}),At(async()=>{if(await we(),t.query.id){const a=N.value.find(e=>e.id==t.query.id);a&&Ie(a)}}),he(()=>M.value.length,(a,e)=>{a>e&&e>0&&Y(()=>{ae(!0)})}),(a,e)=>{const m=Re("tooltip");return l(),o("div",rs,[v(c(ge),{class:"w-96 flex flex-col overflow-hidden"},{header:E(()=>[i("div",os,[v(c(Dt),{modelValue:G.value,"onUpdate:modelValue":e[0]||(e[0]=n=>G.value=n),placeholder:"Search conversations...",class:"w-full"},null,8,["modelValue"]),i("div",us,[v(c(be),{modelValue:Q.value,"onUpdate:modelValue":e[1]||(e[1]=n=>Q.value=n),options:He,optionLabel:"label",optionValue:"value",placeholder:"Status",class:"flex-1",size:"small"},null,8,["modelValue"]),v(c(be),{modelValue:J.value,"onUpdate:modelValue":e[2]||(e[2]=n=>J.value=n),options:Ne,optionLabel:"label",optionValue:"value",placeholder:"Assigned",class:"flex-1",size:"small"},null,8,["modelValue"])])])]),content:E(()=>[i("div",ds,[O.value?(l(),o("div",cs,[(l(),o(T,null,R(8,n=>v(c(Rt),{key:n,height:"70px"})),64))])):N.value.length===0?(l(),o("div",ms,[...e[8]||(e[8]=[i("i",{class:"pi pi-inbox text-4xl mb-2"},null,-1),i("p",null,"No conversations found",-1)])])):(l(),o("div",ps,[(l(!0),o(T,null,R(N.value,n=>{var f,_,b,U,pe,Ae,Ee;return l(),o("div",{key:n.id,class:C(["flex items-center gap-3 p-4 cursor-pointer transition-colors border-b",n.status==="closed"?"opacity-60 border-l-4 border-l-surface-300 dark:border-l-surface-600 bg-surface-50/50 dark:bg-surface-800/30":"border-l-4 border-l-transparent",((f=u.value)==null?void 0:f.id)===n.id?"bg-primary-50 dark:bg-primary-900/20 border-b-surface-100 dark:border-b-surface-700":"hover:bg-surface-50 dark:hover:bg-surface-700 border-b-surface-100 dark:border-b-surface-700"]),onClick:Xa=>Ie(n)},[i("div",vs,[v(c(re),{label:ie((_=n.customer)==null?void 0:_.name),image:(b=n.customer)==null?void 0:b.profile_photo_url,shape:"circle",size:"large",class:C(n.status==="closed"?"grayscale":"")},null,8,["label","image","class"]),i("span",{class:C(["absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2 border-white dark:border-surface-800",ot(n.status)])},null,2),n.status==="closed"?(l(),o("i",ys)):p("",!0)]),i("div",hs,[i("div",gs,[i("span",{class:C(["font-medium truncate",n.status==="closed"?"text-surface-600 dark:text-surface-400":"text-surface-900 dark:text-surface-100"])},g(((U=n.customer)==null?void 0:U.name)||"Unknown Customer"),3),(Ae=(pe=n.platform_connection)==null?void 0:pe.platform)!=null&&Ae.icon?K((l(),o("i",{key:0,class:C(["pi pi-"+n.platform_connection.platform.icon,"text-xs text-surface-400"])},null,2)),[[m,n.platform_connection.platform.name,void 0,{top:!0}]]):p("",!0),n.status==="closed"?(l(),A(c(D),{key:1,value:"Closed",severity:"secondary",class:"text-xs"})):p("",!0)]),i("p",bs,g(n.last_message||n.last_message_fallback||"No messages yet"),1)]),i("div",xs,[i("div",ks,[((Ee=n.summary)==null?void 0:Ee.resolution)==="YES"?(l(),A(c(D),{key:0,value:"Agent Needed",severity:"danger",class:"text-xs"})):p("",!0),n.is_ai_handling?(l(),A(c(D),{key:1,value:"AI",severity:"info",class:"text-xs"})):p("",!0),i("p",_s,g(ct(n.last_message_at)),1)])])],10,fs)}),128))]))])]),_:1}),i("div",ws,[v(c(ge),{class:"flex-1 flex flex-col overflow-hidden chat-card"},Tt({content:E(()=>[u.value?(l(),o("div",{key:0,ref_key:"messagesContainer",ref:B,class:"flex-1 overflow-y-auto p-4 space-y-3 -mx-4 -my-4 bg-surface-50 dark:bg-surface-900 h-100 justify-content-between",style:{height:"calc(100vh - 21rem)","min-height":"300px"},onScroll:Ye},[z.value?(l(),o("div",Es,[v(c(oe),{style:{width:"24px",height:"24px"}})])):W.value&&!S.value?(l(),o("div",Ts,[v(c(V),{label:"Load older messages",icon:"pi pi-arrow-up",severity:"secondary",outlined:"",size:"small",onClick:Ce})])):p("",!0),S.value?(l(),o("div",Ps,[v(c(oe),{style:{width:"40px",height:"40px"}})])):M.value.length===0?(l(),o("div",Vs,[...e[9]||(e[9]=[i("div",{class:"w-16 h-16 rounded-full bg-surface-100 dark:bg-surface-700 flex items-center justify-center mb-4"},[i("i",{class:"pi pi-comment text-2xl"})],-1),i("p",{class:"text-sm font-medium"},"No messages yet",-1),i("p",{class:"text-xs text-surface-400"},"Start the conversation below",-1)])])):(l(!0),o(T,{key:4},R(M.value,n=>(l(),o("div",{key:n.id,class:C(["flex",n.is_from_customer?"justify-start":"justify-end"])},[i("div",{class:C(["max-w-[70%] rounded-2xl px-4 py-3 shadow-sm",n.is_from_customer?"bg-white dark:bg-surface-700 text-surface-900 dark:text-surface-100 rounded-bl-md":n.isPending?"bg-emerald-400 text-white rounded-br-md opacity-60":"bg-emerald-600 text-white rounded-br-md"])},[n.quoted_message?(l(),o("div",Fs,[i("p",zs,g(n.quoted_message.is_from_customer?"Customer":"You"),1),i("p",Ds,g(n.quoted_message.content),1)])):p("",!0),i("p",Ks,g(n.content),1),n.isPending?(l(),o("div",Rs,[...e[10]||(e[10]=[i("i",{class:"pi pi-spin pi-spinner text-xs"},null,-1),i("span",null,"Sending...",-1)])])):p("",!0),pt(n)?(l(),o("div",js,[(l(!0),o(T,null,R(ft(n),(f,_)=>(l(),o(T,{key:_},[f.type==="image"?(l(),o("div",Bs,[f.url&&!ee.value[`${n.id}-${_}`]?(l(),o("img",{key:0,src:f.url,class:"max-h-48 max-w-full rounded-lg border border-surface-200 dark:border-surface-700 cursor-pointer hover:opacity-90 transition-opacity",alt:"Image "+(_+1),loading:"lazy",onClick:b=>Me(f.url),onError:b=>vt(n.id,_)},null,40,Hs)):(l(),o("div",{key:1,class:"w-40 h-32 rounded-lg bg-surface-200 dark:bg-surface-600 flex items-center justify-center cursor-pointer",onClick:b=>f.url&&Me(f.url)},[i("div",Ns,[e[11]||(e[11]=i("i",{class:"pi pi-image text-2xl text-surface-400 mb-1"},null,-1)),i("p",$s,g(ee.value[`${n.id}-${_}`]?"Image expired":"Image"),1),f.url?(l(),o("p",qs,"Open link")):p("",!0)])],8,Us))])):f.type==="audio"?(l(),o("div",Ys,[e[13]||(e[13]=i("i",{class:"pi pi-volume-up text-primary-500"},null,-1)),i("div",Ws,[i("span",Zs,[e[12]||(e[12]=X(" Voice message ",-1)),f.duration?(l(),o("span",Gs,"("+g(Math.round(f.duration))+"s)",1)):p("",!0)]),f.url?(l(),o("audio",{key:0,src:f.url,controls:"",class:"h-8 mt-1",style:{"max-width":"200px"}},null,8,Qs)):p("",!0)])])):f.type==="video"?(l(),o("div",Js,[f.url?(l(),o("video",{key:0,src:f.url,class:"max-h-48 max-w-full rounded-lg border border-surface-200 dark:border-surface-700",controls:""},null,8,Xs)):(l(),o("div",ea,[...e[14]||(e[14]=[i("div",{class:"text-center"},[i("i",{class:"pi pi-video text-2xl text-surface-400 mb-1"}),i("p",{class:"text-xs text-surface-500"},"Video")],-1)])]))])):f.type==="document"||f.type==="file"?(l(),o("div",ta,[e[15]||(e[15]=i("i",{class:"pi pi-file text-primary-500"},null,-1)),f.url?(l(),o("a",{key:0,href:f.url,target:"_blank",class:"text-xs text-primary-500 hover:underline"}," Download file ",8,sa)):(l(),o("span",aa,"File attachment"))])):p("",!0)],64))),128))])):p("",!0),me(n)?(l(),o("div",{key:3,class:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-xs cursor-help",onMouseenter:f=>yt(n,f),onMouseleave:ht},[e[16]||(e[16]=i("div",{class:"flex items-center gap-1 text-blue-600 dark:text-blue-400 mb-1"},[i("i",{class:"pi pi-eye text-xs"}),i("span",{class:"font-medium"},"AI Analysis"),i("i",{class:"pi pi-info-circle text-xs ml-auto opacity-60"})],-1)),i("p",na,g(me(n)),1)],40,ia)):p("",!0),i("div",{class:C(["flex items-center gap-2 mt-1.5 text-xs",n.is_from_customer?"text-surface-400 dark:text-surface-500":"text-emerald-100"])},[i("span",null,g(mt(n.created_at)),1),n.sender_type==="ai"?(l(),o("span",la,[...e[17]||(e[17]=[i("i",{class:"pi pi-microchip-ai text-[10px]"},null,-1),X(" AI ",-1)])])):p("",!0),n.is_from_customer?K((l(),o("button",{key:1,onClick:Fe(f=>et(n),["stop"]),class:"opacity-60 hover:opacity-100 transition-opacity ml-1"},[...e[18]||(e[18]=[i("i",{class:"pi pi-reply"},null,-1)])],8,ra)),[[m,"Reply",void 0,{top:!0}]]):p("",!0)],2)],2)],2))),128))],544)):(l(),o("div",oa,[...e[19]||(e[19]=[i("div",{class:"w-20 h-20 rounded-full bg-surface-100 dark:bg-surface-700 flex items-center justify-center mb-4"},[i("i",{class:"pi pi-comments text-3xl text-surface-400"})],-1),i("h3",{class:"text-lg font-semibold text-surface-700 dark:text-surface-300 mb-1"},"Select a conversation",-1),i("p",{class:"text-sm text-surface-400"},"Choose from the list to view messages",-1)])]))]),_:2},[u.value?{name:"header",fn:E(()=>{var n,f,_,b,U;return[i("div",Is,[i("div",Cs,[v(c(re),{label:ie((n=u.value.customer)==null?void 0:n.name),image:(f=u.value.customer)==null?void 0:f.profile_photo_url,shape:"circle",size:"large",class:"bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-300"},null,8,["label","image"]),i("div",null,[i("div",Ls,[i("h3",Os,g(((_=u.value.customer)==null?void 0:_.name)||"Unknown"),1),(b=u.value.platform_connection)!=null&&b.platform?(l(),A(c(D),{key:0,icon:"pi pi-"+(u.value.platform_connection.platform.icon||"comments"),value:u.value.platform_connection.platform.name,severity:"secondary",class:"text-xs"},null,8,["icon","value"])):p("",!0)]),i("p",Ss,g((U=u.value.customer)==null?void 0:U.email),1)])]),i("div",Ms,[v(c(D),{value:u.value.status,severity:ut(u.value.status)},null,8,["value","severity"]),i("div",As,[i("i",{class:C(["pi pi-user text-sm",u.value.is_ai_handling?"text-surface-400":"text-primary-500"])},null,2),K(v(c(Bt),{modelValue:u.value.is_ai_handling,"onUpdate:modelValue":st},null,8,["modelValue"]),[[m,u.value.is_ai_handling?"AI is handling":"Human is handling",void 0,{bottom:!0}]]),i("i",{class:C(["pi pi-microchip-ai text-sm",u.value.is_ai_handling?"text-primary-500":"text-surface-400"])},null,2)]),K(v(c(V),{icon:"pi pi-user-plus",severity:"secondary",outlined:"",rounded:"",onClick:e[3]||(e[3]=pe=>$.value=!0)},null,512),[[m,"Assign Agent",void 0,{bottom:!0}]]),v(c(V),{icon:"pi pi-ellipsis-v",severity:"secondary",outlined:"",rounded:"",onClick:nt}),v(c(Be),{ref_key:"menu",ref:ke,model:$e,popup:""},null,512)])])]}),key:"0"}:void 0,u.value?{name:"footer",fn:E(()=>[i("div",ua,[w.value?(l(),o("div",da,[e[20]||(e[20]=i("i",{class:"pi pi-reply text-primary-500 text-sm mt-0.5"},null,-1)),i("div",ca,[i("p",ma," Replying to "+g(w.value.is_from_customer?"customer":"your message"),1),i("p",pa,g(w.value.content),1)]),v(c(V),{icon:"pi pi-times",text:"",rounded:"",size:"small",severity:"secondary",onClick:tt})])):p("",!0),I.value?(l(),o("div",fa,[i("i",{class:C(["text-primary-500",Qe(I.value)])},null,2),i("span",va,g(I.value.name),1),i("span",ya,"("+g(Je(I.value.size))+")",1),v(c(V),{icon:"pi pi-times",text:"",rounded:"",size:"small",severity:"secondary",onClick:Ge})])):p("",!0),i("div",ha,[i("input",{ref_key:"fileInput",ref:d,type:"file",class:"hidden",accept:"image/*,audio/*,video/*,.pdf,.doc,.docx,.xls,.xlsx",onChange:Ze},null,544),K(v(c(V),{icon:"pi pi-paperclip",severity:"secondary",outlined:"",rounded:"",onClick:We},null,512),[[m,"Attach file",void 0,{top:!0}]]),v(c(Kt),{modelValue:j.value,"onUpdate:modelValue":e[4]||(e[4]=n=>j.value=n),placeholder:"Type a message...",rows:"1",autoResize:"",class:"flex-1",onKeydown:zt(Fe(Le,["exact","prevent"]),["enter"])},null,8,["modelValue","onKeydown"]),K(v(c(V),{icon:"pi pi-send",rounded:"",disabled:!j.value.trim()&&!I.value,loading:F.value,onClick:Le},null,8,["disabled","loading"]),[[m,"Send (Enter)",void 0,{top:!0}]])])])]),key:"1"}:void 0]),1024),u.value?(l(),A(c(ge),{key:0,class:"w-80 flex flex-col h-full overflow-hidden"},{header:E(()=>[...e[21]||(e[21]=[i("div",{class:"p-4 border-b border-surface-200 dark:border-surface-700 bg-surface-50 dark:bg-surface-800"},[i("h3",{class:"font-semibold text-surface-900 dark:text-surface-100 flex items-center gap-2"},[i("i",{class:"pi pi-file-edit text-primary-500"}),X(" Summary ")])],-1)])]),content:E(()=>{var n,f,_;return[i("div",ga,[(n=u.value)!=null&&n.customer?(l(),o("div",ba,[e[27]||(e[27]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide"},"Customer Details",-1)),i("div",xa,[i("div",ka,[v(c(re),{label:ie(u.value.customer.name),image:u.value.customer.profile_photo_url,shape:"circle",size:"xlarge",class:"w-20 h-20"},null,8,["label","image"])]),i("div",_a,[e[22]||(e[22]=i("i",{class:"pi pi-user text-primary-500 text-sm w-4"},null,-1)),i("span",wa,g(u.value.customer.name||"Unknown"),1)]),u.value.customer.email?(l(),o("div",Ia,[e[23]||(e[23]=i("i",{class:"pi pi-envelope text-surface-400 text-sm w-4"},null,-1)),i("span",Ca,g(u.value.customer.email),1)])):p("",!0),u.value.customer.phone?(l(),o("div",La,[e[24]||(e[24]=i("i",{class:"pi pi-phone text-surface-400 text-sm w-4"},null,-1)),i("span",Oa,g(u.value.customer.phone),1)])):p("",!0),(f=u.value.platform_connection)!=null&&f.platform?(l(),o("div",Sa,[e[25]||(e[25]=i("i",{class:"pi pi-share-alt text-surface-400 text-sm w-4"},null,-1)),i("span",Ma,g(u.value.platform_connection.platform.name),1)])):p("",!0)]),u.value.assigned_user?(l(),o("div",Aa,[e[26]||(e[26]=i("span",{class:"text-xs text-surface-500"},"Assigned to:",-1)),v(c(D),{value:u.value.assigned_user.name,severity:"info",class:"text-xs"},null,8,["value"])])):p("",!0),u.value.tags&&u.value.tags.length>0?(l(),o("div",Ea,[(l(!0),o(T,null,R(u.value.tags,b=>(l(),A(c(D),{key:b.id||b,value:typeof b=="object"?b.tag:b,severity:"secondary",class:"text-xs"},null,8,["value"]))),128))])):p("",!0)])):p("",!0),(_=u.value)!=null&&_.customer?(l(),A(c(ue),{key:1,class:"my-3"})):p("",!0),e[36]||(e[36]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide mb-3"},"AI Summary",-1)),te.value?(l(),o("div",Ta,[v(c(oe),{style:{width:"32px",height:"32px"}})])):x.value?(l(),o("div",Va,[i("div",null,[e[30]||(e[30]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide mb-2"},"Description",-1)),i("p",Fa,g(x.value.summary),1)]),v(c(ue),{class:"my-3"}),x.value.key_points&&x.value.key_points.length>0?(l(),o("div",za,[e[32]||(e[32]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide mb-2"},"Client Request",-1)),i("ul",Da,[(l(!0),o(T,null,R(x.value.key_points,(b,U)=>(l(),o("li",{key:U,class:"flex items-start gap-2 text-sm text-surface-700 dark:text-surface-300"},[e[31]||(e[31]=i("i",{class:"pi pi-check-circle text-primary-500 mt-0.5 text-xs"},null,-1)),i("span",null,g(b),1)]))),128))])])):p("",!0),v(c(ue),{class:"my-3"}),x.value.action_items&&x.value.action_items.length>0?(l(),o("div",Ka,[e[33]||(e[33]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide mb-2"},"Category",-1)),v(c(D),{value:x.value.action_items[0],severity:dt(x.value.action_items[0]),class:"text-sm"},null,8,["value","severity"])])):p("",!0),v(c(ue),{class:"my-3"}),i("div",null,[e[34]||(e[34]=i("h4",{class:"text-xs font-semibold text-surface-500 dark:text-surface-400 uppercase tracking-wide mb-2"},"Agent Needed",-1)),i("div",{class:C(["flex items-center gap-2 p-3 rounded-lg",x.value.resolution==="YES"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800"])},[i("i",{class:C(["pi text-lg",x.value.resolution==="YES"?"pi-exclamation-triangle text-red-600 dark:text-red-400":"pi-check-circle text-green-600 dark:text-green-400"])},null,2),i("div",Ra,[i("p",{class:C(["font-semibold text-sm",x.value.resolution==="YES"?"text-red-700 dark:text-red-300":"text-green-700 dark:text-green-300"])},g(x.value.resolution==="YES"?"Yes":"No"),3),i("p",{class:C(["text-xs",x.value.resolution==="YES"?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"])},g(x.value.resolution==="YES"?"Requires human agent":"AI can handle this"),3)])],2)]),i("div",ja,[i("div",Ba,[x.value.is_ai_generated?(l(),o("span",Ha,[...e[35]||(e[35]=[i("i",{class:"pi pi-sparkles"},null,-1),X(" AI Generated ",-1)])])):p("",!0),K(v(c(V),{icon:"pi pi-refresh",outlined:"",rounded:"",size:"small",severity:"secondary",loading:se.value,onClick:Se},null,8,["loading"]),[[m,"Regenerate Summary",void 0,{bottom:!0}]])])])])):(l(),o("div",Pa,[e[28]||(e[28]=i("div",{class:"w-12 h-12 mx-auto rounded-full bg-surface-100 dark:bg-surface-700 flex items-center justify-center mb-3"},[i("i",{class:"pi pi-info-circle text-lg text-surface-400"})],-1)),e[29]||(e[29]=i("p",{class:"text-sm text-surface-500 mb-3"},"No summary yet",-1)),v(c(V),{label:"Generate",icon:"pi pi-sparkles",size:"small",loading:se.value,onClick:Se},null,8,["loading"])]))])]}),_:1})):p("",!0)]),v(c(jt),{visible:$.value,"onUpdate:visible":e[7]||(e[7]=n=>$.value=n),header:"Assign Agent",modal:"",style:{width:"400px"}},{footer:E(()=>[i("div",Za,[v(c(V),{label:"Cancel",severity:"secondary",outlined:"",onClick:e[6]||(e[6]=n=>$.value=!1)}),v(c(V),{label:"Assign",loading:ce.value,onClick:it},null,8,["loading"])])]),default:E(()=>[i("div",Ua,[de.value?(l(),o("div",Na,[v(c(oe),{style:{width:"30px",height:"30px"}})])):(l(),o("div",$a,[e[37]||(e[37]=i("p",{class:"text-sm text-surface-600 dark:text-surface-400 mb-3"}," Select a team member to assign this conversation to: ",-1)),v(c(be),{modelValue:H.value,"onUpdate:modelValue":e[5]||(e[5]=n=>H.value=n),options:Ue.value,optionLabel:"name",optionValue:"id",placeholder:"Search or select agent...",filter:"",filterPlaceholder:"Search by name...",class:"w-full",showClear:""},{option:E(({option:n})=>[i("div",qa,[v(c(re),{label:ie(n.name),shape:"circle",size:"small"},null,8,["label"]),i("div",null,[i("p",Ya,g(n.name),1),n.email?(l(),o("p",Wa,g(n.email),1)):p("",!0)])])]),_:1},8,["modelValue","options"])]))])]),_:1},8,["visible"]),(l(),A(Vt,{to:"body"},[q.value.visible?(l(),o("div",{key:0,class:"fixed z-[10000] pointer-events-none transform -translate-x-1/2 -translate-y-full mb-2",style:Pt({left:q.value.x+"px",top:q.value.y+"px"})},[i("div",Ga,[e[38]||(e[38]=i("div",{class:"flex items-center gap-2 mb-1"},[i("i",{class:"pi pi-eye text-blue-400 text-xs"}),i("span",{class:"font-medium text-blue-400"},"AI Analysis")],-1)),i("p",Qa,g(q.value.content),1)]),e[39]||(e[39]=i("div",{class:"w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-slate-800 mx-auto"},null,-1))],4)):p("",!0)]))])}}},mi=Ht(Ja,[["__scopeId","data-v-0f3181b4"]]);export{mi as default};
